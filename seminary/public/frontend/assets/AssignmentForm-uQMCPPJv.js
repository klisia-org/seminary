var F=Object.defineProperty;var w=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var k=(i,t,n)=>t in i?F(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,c=(i,t)=>{for(var n in t||(t={}))E.call(t,n)&&k(i,n,t[n]);if(w)for(var n of w(t))L.call(t,n)&&k(i,n,t[n]);return i};import{i as $,x as B,a as N,m as R,ae as T,a0 as U,c as j,C as p,n as P,l as x,b as K,d as M,o as A,f as r,j as u,e as l,g as O,h as z,w as g,_ as V,A as b,t as f,F as Q}from"./index-Bp-UPm00.js";import{_ as G}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-BKdvViSe.js";import{a as I}from"./FormControl.vue_vue_type_script_setup_true_lang-D9NZV9wG.js";import{_ as H}from"./TextEditor.vue_vue_type_script_setup_true_lang-BTikwLvi.js";import{e as _}from"./exam-mhN0AOXW.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-67bzkd8U.js";const J={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},W={class:"space-x-2"},X={class:"w-3/4 mx-auto py-5"},Y={class:"font-semibold mb-4"},Z={class:"grid grid-cols-2 gap-5 mt-4 mb-8"},ee={class:"text-xs text-ink-gray-5 mb-2"},le={__name:"AssignmentForm",props:{assignmentID:{type:String,required:!1}},setup(i){const t=$("$user"),n=B(),d=i,a=N({title:"",type:"PDF",question:""});R(()=>{var e,s;d.assignmentID=="new"&&!((e=t.data)!=null&&e.is_moderator)&&!((s=t.data)!=null&&s.is_instructor)&&n.push({name:"Courses"}),d.assignmentID==="new"&&(_.prefillData.title&&(a.title=_.prefillData.title),_.prefillData.course&&(a.course=_.prefillData.course)),d.assignmentID!=="new"&&o.reload(),window.addEventListener("keydown",y)});const y=e=>{e.key==="s"&&(e.ctrlKey||e.metaKey)&&(v(),e.preventDefault())};U(()=>{window.removeEventListener("keydown",y)});const o=T({doctype:"Assignment Activity",name:d.assignmentID,auto:!1}),S=j({url:"frappe.client.insert",makeParams(e){return{doc:c({doctype:"Assignment Activity"},e)}},onSuccess(e){p.success(__("Assignment saved successfully")),n.push({name:"AssignmentForm",params:{assignmentID:e.name}})},onError(e){var s;p.error(((s=e.messages)==null?void 0:s[0])||e)}}),v=()=>{d.assignmentID=="new"?S.submit(c({},a)):o.setValue.submit(c({},a),{onSuccess(e){p.success(__("Assignment saved successfully")),o.reload()},onError(e){var s;p.error(((s=e.messages)==null?void 0:s[0])||e)}})};P(o,()=>{o.doc&&Object.keys(o.doc).forEach(e=>{a[e]=o.doc[e]})});const h=x(()=>[{label:__("Assignments"),route:{name:"Assignments"}},{label:o.doc?o.doc.title:__("New Assignment")}]),C=x(()=>[{label:"PDF",value:"PDF"},{label:"Image",value:"Image"},{label:"Document",value:"Document"},{label:"Text",value:"Text"},{label:"URL",value:"URL"}]);return(e,s)=>{var D;const q=K("router-link");return A(),M(Q,null,[r("header",J,[u(l(G),{items:h.value},null,8,["items"]),r("div",W,[(D=l(o).doc)!=null&&D.name?(A(),O(q,{key:0,to:{name:"AssignmentSubmissionList",query:{assignmentID:l(o).doc.name}}},{default:g(()=>[u(l(V),null,{default:g(()=>[b(f(e.__("Submission List")),1)]),_:1})]),_:1},8,["to"])):z("",!0),u(l(V),{variant:"solid",onClick:s[0]||(s[0]=m=>v())},{default:g(()=>[b(f(e.__("Save")),1)]),_:1})])]),r("div",X,[r("div",Y,f(e.__("Details")),1),r("div",Z,[u(l(I),{modelValue:a.title,"onUpdate:modelValue":s[1]||(s[1]=m=>a.title=m),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),u(l(I),{modelValue:a.type,"onUpdate:modelValue":s[2]||(s[2]=m=>a.type=m),type:"select",options:C.value,label:e.__("Type"),required:!0},null,8,["modelValue","options","label"])]),r("div",null,[r("div",ee,[b(f(e.__("Question"))+" ",1),s[4]||(s[4]=r("span",{class:"text-ink-red-3"},"*",-1))]),u(l(H),{content:a.question,onChange:s[3]||(s[3]=m=>a.question=m),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]"},null,8,["content"])])])],64)}}};export{le as default};
//# sourceMappingURL=AssignmentForm-uQMCPPJv.js.map
