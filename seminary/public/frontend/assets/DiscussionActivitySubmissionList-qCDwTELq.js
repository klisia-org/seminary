var P=Object.defineProperty,T=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var V=(o,s,i)=>s in o?P(o,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[s]=i,$=(o,s)=>{for(var i in s||(s={}))A.call(s,i)&&V(o,i,s[i]);if(S)for(var i of S(s))L.call(s,i)&&V(o,i,s[i]);return o},x=(o,s)=>T(o,U(s));import{B as z,u as O,w as E,j as H,k as K,C as M,l as J,m as Q,n as W,o as X}from"./frappe-ui-BC6vlBMo.js";import{F as Y,bk as N,r as b,av as Z,I as ee,c as g,a8 as se,t as v,b as n,g as f,e as u,u as a,a as h,w as m,H as k,O as C,C as te,D as y,ce as ae}from"./vendor-CA0oFrry.js";import{_ as B}from"./Link-Dl_y0tb2.js";const ie={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},le={class:"md:w-3/4 md:mx-auto py-5 mx-5"},oe={class:"grid grid-cols-3 gap-5 mb-5"},ue={key:0},ne={key:1},re={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},de={class:"text-xl font-medium"},ce={class:"leading-5"},ye={__name:"DiscussionActivitySubmissionList",setup(o){const s=Y(),i=N("$user"),G=N("$dayjs"),r=b(""),d=b(""),c=b("");Z(()=>{var e,l;!((e=i.data)!=null&&e.is_instructor)&&!((l=i.data)!=null&&l.is_moderator)&&s.push({name:"Courses"}),r.value=s.currentRoute.value.query.discussionID,d.value=s.currentRoute.value.query.member,c.value=s.currentRoute.value.query.status,D()});const j=()=>{let e={};return r.value&&(e.disc_activity=r.value),d.value&&(e.member=d.value),c.value&&(e.status=c.value),e},_=z({doctype:"Discussion Submission",fields:["name","disc_activity","member","student_name","score","percentage","disc_title","status","extra_credit","fudge_points"],orderBy:"creation desc",transform(e){return e.map(l=>x($({},l),{creation:G(l.creation).fromNow()}))}});ee([r,d,c],()=>{s.push({query:{discussionID:r.value,member:d.value,status:c.value}}),D()});const D=()=>{_.update({filters:j()}),_.reload()};g(()=>[{label:__("Student"),key:"student_name",width:1},{label:__("Discussion Title"),key:"disc_title",width:2},{label:__("Submitted"),key:"creation",width:1,align:"left"},{label:__("Status"),key:"status",width:1,align:"center"},{label:__("Score"),key:"score",width:1,align:"center"}]);const F=g(()=>[{label:"",value:""},{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Not Graded",value:"Not Graded"},{label:"Graded",value:"Graded"}]),I=e=>e==="Pass"||e==="Graded"?"green":e==="Not Graded"?"blue":"red",R=g(()=>[{label:__("Discussion Submissions")}]);return(e,l)=>{var w;const q=se("router-link");return n(),v(k,null,[f("header",ie,[u(a(O),{items:R.value},null,8,["items"])]),f("div",le,[f("div",oe,[u(B,{doctype:"Discussion Activity",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=t=>r.value=t),placeholder:e.__("Discussion")},null,8,["modelValue","placeholder"]),u(B,{doctype:"User",modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=t=>d.value=t),placeholder:e.__("Student")},null,8,["modelValue","placeholder"]),u(a(E),{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=t=>c.value=t),type:"select",options:F.value,placeholder:e.__("Status")},null,8,["modelValue","options","placeholder"])]),a(_).loading||(w=a(_).data)!=null&&w.length?(n(),h(a(X),{key:0,columns:e.submissionColumns,rows:a(_).data,rowKey:"name"},{default:m(()=>[u(a(H),{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2"},{default:m(()=>[(n(!0),v(k,null,C(e.submissionColumns,t=>(n(),h(a(K),{item:t},null,8,["item"]))),256))]),_:1}),u(a(M),null,{default:m(()=>[(n(!0),v(k,null,C(a(_).data,t=>(n(),h(q,{to:{name:"DiscussionActivitySubmission",params:{discussionID:t.disc_activity,submissionName:t.name}}},{default:m(()=>[u(a(J),{row:t},{default:m(({column:p,item:me})=>[u(a(Q),{item:t[p.key],align:p.align},{default:m(()=>[p.key=="status"?(n(),v("div",ue,[u(a(W),{theme:I(t[p.key])},{default:m(()=>[te(y(t[p.key]),1)]),_:2},1032,["theme"])])):(n(),v("div",ne,y(t[p.key]),1))]),_:2},1032,["item","align"])]),_:2},1032,["row"])]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["columns","rows"])):(n(),v("div",re,[u(a(ae),{class:"size-8 mx-auto stroke-1 text-ink-gray-4"}),f("div",de,y(e.__("No submissions")),1),f("div",ce,y(e.__("There are no submissions for this discussion activity.")),1)]))])],64)}}};export{ye as default};
//# sourceMappingURL=DiscussionActivitySubmissionList-qCDwTELq.js.map
