{"version":3,"file":"CourseOutline-agG91JAR.js","sources":["../../../../frontend/src/components/Modals/ChapterModal.vue","../../../../frontend/src/components/CourseOutline.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"dialogOptions\"\n\t\t:disableOutsideClickToClose=\"true\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"chapter-dialog space-y-4 text-base max-h-[70vh] overflow-y-auto\">\n\t\t\t\t<FormControl label=\"Title\" v-model=\"chapter.chapter_title\" :required=\"true\" />\n\t\t\t\t<Switch\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t:label=\"__('SCORM Package')\"\n\t\t\t\t\t:description=\"\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Enable this only if you want to upload a SCORM package as a chapter.'\n\t\t\t\t\t\t)\n\t\t\t\t\t\"\n\t\t\t\t\tv-model=\"chapter.is_scorm_package\"\n\t\t\t\t/>\n\t\t\t\t<div v-if=\"chapter.is_scorm_package\">\n\t\t\t\t\t<FileUploader\n\t\t\t\t\t\tv-if=\"!chapter.scorm_package\"\n\t\t\t\t\t\t:fileTypes=\"['.zip']\"\n\t\t\t\t\t\t:validateFile=\"validateFile\"\n\t\t\t\t\t\t@success=\"(file) => (chapter.scorm_package = file)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot=\"{ file, progress, uploading, openFileSelector }\">\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button @click=\"openFileSelector\" :loading=\"uploading\">\n\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\tuploading ? `Uploading ${progress}%` : 'Upload an zip file'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FileUploader>\n\t\t\t\t\t<div v-else class=\"\">\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<div class=\"border rounded-md p-2 mr-2\">\n\t\t\t\t\t\t\t\t<FileText class=\"h-5 w-5 stroke-1.5 text-ink-gray-7\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ chapter.scorm_package.file_name }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"text-sm text-ink-gray-4 mt-1\">\n\t\t\t\t\t\t\t\t\t{{ getFileSize(chapter.scorm_package.file_size) }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t@click=\"() => (chapter.scorm_package = null)\"\n\t\t\t\t\t\t\t\tclass=\"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport {\n\tButton,\n\tcreateResource,\n\tDialog,\n\tFileUploader,\n\tFormControl,\n\tSwitch,\n\ttoast\n} from 'frappe-ui'\nimport { computed, reactive, watch } from 'vue'\nimport { getFileSize } from '@/utils/'\nimport { capture } from '@/telemetry'\nimport { FileText, X } from 'lucide-vue-next'\nimport { useSettings } from '@/stores/settings'\nimport {createDialog} from '@/utils/dialogs'\n\nconst $dialog = createDialog\n\nconst show = defineModel()\nconst outline = defineModel('outline')\nconst settingsStore = useSettings()\n\nconst props = defineProps({\n\tcourse: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tchapterDetail: {\n\t\ttype: Object,\n\t},\n})\n\nconst defaultChapterState = () => ({\n\tchapter_title: '',\n\tis_scorm_package: 0,\n\tscorm_package: null,\n})\n\nconst chapter = reactive(defaultChapterState())\n\nconst resetChapter = () => {\n\tObject.assign(chapter, defaultChapterState())\n}\n\nconst chapterResource = createResource({\n\turl: 'seminary.seminary.api.upsert_chapter',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tchapter_title: chapter.chapter_title,\n\t\t\tcourse: props.course,\n\t\t\tis_scorm_package: chapter.is_scorm_package,\n\t\t\tscorm_package: chapter.scorm_package,\n\t\t\tname: props.chapterDetail?.name,\n\t\t}\n\t},\n})\n\nconst chapterReference = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Course Schedule Chapter Reference',\n\t\t\t\tchapter: values.name,\n\t\t\t\tparent: props.course,\n\t\t\t\tparenttype: 'Course Schedule',\n\t\t\t\tparentfield: 'chapters',\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst addChapter = async (close) => {\n\tchapterResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\treturn validateChapter()\n\t\t\t},\n\t\t\tonSuccess: (data) => {\n\t\t\t\tcapture('chapter_created')\n\t\t\t\tchapterReference.submit(\n\t\t\t\t\t{ name: data.name },\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess() {\n\t\t\t\t\t\t\tresetChapter()\n\t\t\t\t\t\t\t/* if (!settingsStore.onboardingDetails.data?.is_onboarded) {\n\t\t\t\t\t\t\tsettingsStore.onboardingDetails.reload()\n\t\t\t\t\t\t} */\n\t\t\t\t\t\t\toutline.value.reload()\n\t\t\t\t\t\t\ttoast.success(__('Chapter added successfully'))\n\t\t\t\t\t\t\tshow.value = false\n\t\t\t\t\t\t\tclose()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError(err) {\n\t\t\t\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst validateChapter = () => {\n\tif (!chapter.chapter_title) {\n\t\treturn __('Chapter Title is required')\n\t}\n\tif (chapter.is_scorm_package && !chapter.scorm_package) {\n\t\treturn __('Please upload a SCORM package or uncheck the SCORM package option')\n\t}\n}\n\nconst editChapter = (close) => {\n\tchapterResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\tif (!chapter.chapter_title) {\n\t\t\t\t\treturn 'Chapter Title is required'\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\tshow.value = false\n\t\t\t\tresetChapter()\n\t\t\t\toutline.value.reload()\n\t\t\t\ttoast.success(__('Chapter updated successfully'))\n\t\t\t\tclose()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst populateChapter = (detail) => {\n\tif (!detail) {\n\t\tresetChapter()\n\t\treturn\n\t}\n\tchapter.chapter_title = detail.chapter_title || ''\n\tchapter.is_scorm_package = detail.is_scorm_package || 0\n\tchapter.scorm_package = detail.scorm_package || null\n}\n\nconst initializeState = () => {\n\tif (props.chapterDetail) {\n\t\tpopulateChapter(props.chapterDetail)\n\t} else {\n\t\tresetChapter()\n\t}\n}\n\nconst handleCancel = (close) => {\n\tshow.value = false\n\tresetChapter()\n\tclose?.()\n}\n\nwatch(show, (value) => {\n\tif (value) {\n\t\tinitializeState()\n\t} else {\n\t\tresetChapter()\n\t}\n})\n\nwatch(\n\t() => props.chapterDetail,\n\t(newChapter) => {\n\t\tif (show.value) {\n\t\t\tpopulateChapter(newChapter)\n\t\t}\n\t}\n)\n\nconst validateFile = (file) => {\n\tlet extension = file.name.split('.').pop().toLowerCase()\n\tif (extension !== 'zip') {\n\t\treturn __('Only zip files are allowed')\n\t}\n}\n\nconst dialogOptions = computed(() => ({\n\ttitle: props.chapterDetail ? __('Edit Chapter') : __('Add Chapter'),\n\tsize: 'lg',\n\tactions: [\n\t\t{\n\t\t\tlabel: props.chapterDetail ? __('Edit') : __('Create'),\n\t\t\tvariant: 'solid',\n\t\t\tonClick: (close) =>\n\t\t\t\tprops.chapterDetail ? editChapter(close) : addChapter(close),\n\t\t},\n\t\t{\n\t\t\tlabel: __('Cancel'),\n\t\t\tvariant: 'text',\n\t\t\tonClick: (close) => handleCancel(close),\n\t\t},\n\t],\n}))\n</script>\n","<template>\n\t\t<div class=\"text-base\">\n\t\t\t<div class=\"grid grid-cols-[70%,30%] mb-4 px-2\">\n\t\t\t\t<div class=\"font-semibold text-lg leading-5 text-ink-gray-9\">\n\t\t\t\t\t<!-- {{ (course_title) }} -->\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t@click=\"openChapterModal()\"\n\t\t\t\t\tv-if=\"props.allowEdit\"\n\t\t\t\t>\n\t\t\t\t\t{{ __('Add Chapter') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\t:class=\"{\n\t\t\t\t\t'border-2 rounded-md py-2 px-2': showOutline && outline.data?.length,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Disclosure\n\t\t\t\t\tv-slot=\"{ open }\"\n\t\t\t\t\tv-for=\"(chapter, index) in outline.data\"\n\t\t\t\t\t:key=\"chapter.name\"\n\t\t\t\t\t:defaultOpen=\"openChapterDetail(chapter.idx)\"\n\t\t\t\t>\n\t\t\t\t\t<DisclosureButton ref=\"\" class=\"flex w-full items-center p-2 group\">\n\t\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'rotate-90 transform duration-200': open,\n\t\t\t\t\t\t\t\t'duration-200': !open,\n\t\t\t\t\t\t\t\thidden: chapter.is_scorm_package,\n\t\t\t\t\t\t\t\topen: index == 1,\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 stroke-1\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"ml-2 text-left text-base font-medium leading-5 text-ink-gray-9\"\n\t\t\t\t\t\t\t@click=\"redirectToChapter(chapter)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ chapter.chapter_title }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"props.allowEdit\" class=\"ml-auto flex space-x-4\">\n\t\t\t\t\t\t\t<Tooltip :text=\"__('Edit Chapter')\" placement=\"bottom\">\n\t\t\t\t\t\t\t\t<FilePenLine\n\t\t\t\t\t\t\t\t\t@click.prevent=\"openChapterModal(chapter)\"\n\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 invisible group-hover:visible\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<Tooltip :text=\"__('Delete Chapter')\" placement=\"bottom\">\n\t\t\t\t\t\t\t\t<Trash2\n\t\t\t\t\t\t\t\t\t@click.prevent=\"trashChapter(chapter.name)\"\n\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-red-500 invisible group-hover:visible\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DisclosureButton>\n\t\t\t\t\t<DisclosurePanel v-if=\"!chapter.is_scorm_package\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for=\"(lesson, lessonIndex) in chapter.lessons\"\n\t\t\t\t\t\t\t:key=\"lesson.name\"\n\t\t\t\t\t\t\tclass=\"lesson-wrapper\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"props.allowEdit\"\n\t\t\t\t\t\t\t\tclass=\"ml-8 mr-4 h-3 rounded border border-dashed border-outline-gray-3 transition hover:border-outline-gray-4\"\n\t\t\t\t\t\t\t\t@dragover.prevent=\"onDragOver($event)\"\n\t\t\t\t\t\t\t\t@drop.prevent=\"onDrop($event, chapter, lessonIndex)\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"group ml-8 mr-4 rounded-lg border border-outline-gray-2 bg-white p-4 transition hover:border-outline-gray-3\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'bg-surface-selected': isActiveLesson(lesson.number),\n\t\t\t\t\t\t\t\t\t'cursor-grab': props.allowEdit,\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t:draggable=\"props.allowEdit\"\n\t\t\t\t\t\t\t\t@dragstart=\"onDragStart($event, chapter, lesson, lessonIndex)\"\n\t\t\t\t\t\t\t\t@dragend=\"onDragFinish\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t<div v-if=\"props.allowEdit\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip :text=\"__('Delete Lesson')\" placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"rounded-md p-1 text-red-500 opacity-0 transition-opacity group-hover:opacity-100 hover:bg-red-50\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click.prevent=\"trashLesson(lesson.name, chapter.name)\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 class=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t\t\t\tclass=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tcourseName: courseName,\n\t\t\t\t\t\t\t\t\t\t\t\tchapterNumber: lesson.number.split('.')[0],\n\t\t\t\t\t\t\t\t\t\t\t\tlessonNumber: lesson.number.split('.')[1],\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col items-start gap-2 text-sm leading-5\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<MonitorPlay\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.icon === 'icon-youtube'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<HelpCircle\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-quiz'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<BookOpenCheck\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-exam'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<FileUp\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-assignment'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<FileText\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-7 stroke-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{ lesson.lesson_title }}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<Check\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.is_complete\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-green-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.preview\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-md bg-[#E6F4FF] p-2\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{{ lesson.preview }}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.due_date\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"rounded-md bg-[#E6F7F4] p-2\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{{ __('Due: ') + new Intl.DateTimeFormat(user.data.language || 'en-US', { dateStyle: 'medium' }).format(new Date(lesson.due_date)) }}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t\t\t<div v-if=\"props.allowEdit\" class=\"ml-auto hidden items-center group-hover:flex\">\n\t\t\t\t\t\t\t\t\t\t<GripVertical class=\"h-4 w-4 text-ink-gray-5\" aria-hidden=\"true\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"props.allowEdit\"\n\t\t\t\t\t\t\tclass=\"ml-8 mr-4 mt-2 rounded-md border border-dashed border-outline-gray-3 p-3 text-sm text-ink-gray-5 transition hover:border-outline-gray-4 hover:text-ink-gray-7\"\n\t\t\t\t\t\t\t@dragover.prevent=\"onDragOver($event)\"\n\t\t\t\t\t\t\t@drop.prevent=\"onDrop($event, chapter, chapter.lessons?.length || 0)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span v-if=\"chapter.lessons?.length\">{{ __('Drop here to move to the end of this chapter') }}</span>\n\t\t\t\t\t\t\t<span v-else>{{ __('Drop a lesson here to start this chapter') }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"props.allowEdit\" class=\"flex mt-2 mb-4 pl-8\">\n\t\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t\tv-if=\"!chapter.is_scorm_package\"\n\t\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\t\tname: 'LessonForm',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tcourseName: courseName,\n\t\t\t\t\t\t\t\t\t\tchapterNumber: chapter.idx,\n\t\t\t\t\t\t\t\t\t\tlessonNumber: chapter.lessons.length + 1,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t{{ __('Add Lesson') }}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DisclosurePanel>\n\t\t\t\t</Disclosure>\n\t\t\t</div>\n\t\t</div>\n\t\t<ChapterModal\n\t\tv-model=\"showChapterModal\"\n\t\tv-model:outline=\"outline\"\n\t\t:course=\"courseName\"\n\t\t:chapterDetail=\"getCurrentChapter()\"\n\t/>\n</template>\n<script setup>\nimport { Button, createResource, Tooltip, toast } from 'frappe-ui'\nimport { inject, ref } from 'vue'\nimport { Disclosure, DisclosureButton, DisclosurePanel } from '@headlessui/vue'\nimport {\n\tCheck,\n\tChevronRight,\n\tFileText,\n\tFilePenLine,\n\tHelpCircle,\n\tMonitorPlay,\n\tBookOpenCheck,\n\tTrash2,\n\tFileUp,\n\tGripVertical,\n} from 'lucide-vue-next'\nimport { useRoute, useRouter } from 'vue-router'\nimport ChapterModal from '@/components/Modals/ChapterModal.vue'\nimport { createDialog } from '@/utils/dialogs'\n\nconst route = useRoute()\nconst router = useRouter()\nconst user = inject('$user')\nconst showChapterModal = ref(false)\nconst currentChapter = ref(null)\nconst draggedLesson = ref(null); // Use a ref to store the dragged lesson\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tshowOutline: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\ttitle: {\n\t\ttype: String,\n\t\tdefault: '',\n\t},\n\tallowEdit: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tgetProgress: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n})\n\nconst outline = createResource({\n\turl: 'seminary.seminary.utils.get_course_outline',\n\tcache: ['course_outline', props.courseName],\n\tparams: {\n\t\tcourse: props.courseName,\n\t\tprogress: props.getProgress,\n\t},\n\tauto: true,\n})\n\nconst course_title = createResource({\n\turl: 'seminary.seminary.utils.get_course_title',\n\tcache: ['course_title', props.courseName],\n\tparams: {\n\t\tcourse: props.courseName,\n\t},\n\tauto: true,\n})\n\nconst deleteLesson = createResource({\n\turl: 'seminary.seminary.api.delete_lesson',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tlesson: values.lesson,\n\t\t\tchapter: values.chapter,\n\t\t}\n\t},\n\tonSuccess() {\n\t\toutline.reload()\n\t\ttoast.success(__('Lesson deleted successfully'))\n\t},\n})\n\nconst updateLessonIndex = createResource({\n\turl: 'seminary.seminary.api.update_lesson_index',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tlesson: values.lesson,\n\t\t\tsource_chapter: values.sourceChapter,\n\t\t\ttarget_chapter: values.targetChapter,\n\t\t\tidx: parseInt(values.idx, 10),\n\t\t}\n\t},\n\tonSuccess() {\n\t\toutline.reload()\n\t\ttoast.success(__('Lesson moved successfully'))\n\t},\n})\n\nconst trashLesson = (lessonName, chapterName) => {\n\tcreateDialog({\n\t\ttitle: __('Delete this lesson?'),\n\t\tmessage: __(\n\t\t\t'Deleting this lesson will permanently remove it from the course. This action cannot be undone. Are you sure you want to continue?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteLesson.submit({\n\t\t\t\t\t\tlesson: lessonName,\n\t\t\t\t\t\tchapter: chapterName,\n\t\t\t\t\t})\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nconst openChapterDetail = (index) => {\n\treturn index == route.params.chapterNumber || index == 1\n}\n\nconst openChapterModal = (chapter = null) => {\n\tif (!props.allowEdit) {\n\t\treturn\n\t}\n\tcurrentChapter.value = chapter\n\tshowChapterModal.value = true\n}\n\nconst getCurrentChapter = () => {\n\treturn currentChapter.value\n}\n\nconst deleteChapter = createResource({\n\turl: 'seminary.seminary.api.delete_chapter',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tchapter: values.chapter,\n\t\t}\n\t},\n\tonSuccess() {\n\t\toutline.reload()\n\t\ttoast.success(__('Chapter deleted successfully'))\n\t},\n})\n\nconst trashChapter = (chapterName) => {\n\tif (!props.allowEdit) {\n\t\treturn\n\t}\n\tcreateDialog({\n\t\ttitle: __('Delete this chapter?'),\n\t\tmessage: __(\n\t\t\t'Deleting this chapter will also delete all its lessons and permanently remove it from the course. This action cannot be undone. Are you sure you want to continue?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteChapter.submit({ chapter: chapterName })\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nconst redirectToChapter = (chapter) => {\n\tif (!chapter.is_scorm_package) return\n\tevent.preventDefault()\n\tif (props.allowEdit) return\n\tif (!user.data) {\n\t\ttoast.warning(\n\t\t\t__('You are not enrolled'),\n\t\t\t__('Please enroll for this course to view this lesson')\n\t\t)\n\t\treturn\n\t}\n\n\trouter.push({\n\t\tname: 'SCORMChapter',\n\t\tparams: {\n\t\t\tcourseName: props.courseName,\n\t\t\tchapterName: chapter.name,\n\t\t},\n\t})\n}\n\nconst isActiveLesson = (lessonNumber) => {\n\treturn (\n\t\troute.params.chapterNumber == lessonNumber.split('.')[0] &&\n\t\troute.params.lessonNumber == lessonNumber.split('.')[1]\n\t)\n}\n\nconst onDragStart = (event, chapter, lesson, lessonIndex) => {\n\tif (!props.allowEdit) {\n\t\treturn\n\t}\n\tif (event?.dataTransfer) {\n\t\tevent.dataTransfer.effectAllowed = 'move'\n\t\tevent.dataTransfer.setData('text/plain', lesson.name)\n\t}\n\tdraggedLesson.value = {\n\t\tlessonName: lesson.name,\n\t\tsourceChapter: chapter.name,\n\t\tsourceIndex: lessonIndex,\n\t}\n}\n\nconst onDragOver = (event) => {\n\tif (!props.allowEdit || !draggedLesson.value) {\n\t\treturn\n\t}\n\tif (event?.dataTransfer) {\n\t\tevent.dataTransfer.dropEffect = 'move'\n\t}\n}\n\nconst onDrop = (event, chapter, targetIndex) => {\n\tif (!props.allowEdit || !draggedLesson.value) {\n\t\treturn\n\t}\n\tevent?.preventDefault?.()\n\n\tconst { lessonName, sourceChapter, sourceIndex } = draggedLesson.value\n\tconst targetChapter = chapter.name\n\n\tlet insertionIndex = targetIndex\n\n\tif (sourceChapter === targetChapter && targetIndex > sourceIndex) {\n\t\tinsertionIndex = targetIndex - 1\n\t}\n\n\tif (sourceChapter === targetChapter && insertionIndex === sourceIndex) {\n\t\tdraggedLesson.value = null\n\t\treturn\n\t}\n\n\tconst newIdx = insertionIndex + 1\n\n\tupdateLessonIndex.submit({\n\t\tlesson: lessonName,\n\t\tsourceChapter,\n\t\ttargetChapter,\n\t\tidx: newIdx,\n\t})\n\n\tdraggedLesson.value = null\n}\n\nconst onDragFinish = () => {\n\tdraggedLesson.value = null\n}\n</script>\n"],"names":["show","_useModel","__props","outline","useSettings","props","defaultChapterState","chapter","reactive","resetChapter","chapterResource","createResource","values","_a","chapterReference","addChapter","close","__async","validateChapter","data","capture","toast","err","editChapter","populateChapter","detail","initializeState","handleCancel","watch","value","newChapter","validateFile","file","dialogOptions","computed","_createBlock","_unref","Dialog","$event","_createElementVNode","_hoisted_1","_createVNode","FormControl","_cache","Switch","__","_createElementBlock","_hoisted_2","_openBlock","_hoisted_4","_hoisted_5","_hoisted_6","FileText","_hoisted_7","_toDisplayString","_hoisted_8","getFileSize","X","FileUploader","_withCtx","progress","uploading","openFileSelector","_hoisted_3","Button","_createTextVNode","route","useRoute","router","useRouter","user","inject","showChapterModal","ref","currentChapter","draggedLesson","deleteLesson","updateLessonIndex","trashLesson","lessonName","chapterName","createDialog","openChapterDetail","index","openChapterModal","getCurrentChapter","deleteChapter","trashChapter","redirectToChapter","isActiveLesson","lessonNumber","onDragStart","event","lesson","lessonIndex","onDragOver","onDrop","targetIndex","sourceChapter","sourceIndex","targetChapter","insertionIndex","newIdx","onDragFinish","_normalizeClass","_Fragment","Disclosure","open","DisclosureButton","ChevronRight","Tooltip","FilePenLine","_withModifiers","Trash2","DisclosurePanel","_component_router_link","_hoisted_10","_hoisted_11","MonitorPlay","HelpCircle","BookOpenCheck","FileUp","Check","_hoisted_12","_hoisted_13","_hoisted_14","GripVertical","_hoisted_18","ChapterModal"],"mappings":"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"}