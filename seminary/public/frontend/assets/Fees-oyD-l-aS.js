import{c as g,j as B,k as D,l as P,m as F,n as N,o as R}from"./frappe-ui-DItCq3tW.js";import{bk as U,r as y,am as O,a8 as z,t as n,u as o,b as t,g as d,D as A,a as r,z as f,w as p,e as _,H as b,O as w}from"./vendor-HNRiXHBS.js";import{_ as V}from"./MissingData-BnCi4hhi.js";import{u as x}from"./index-DYiOfYjK.js";/* empty css                                                                     */const M={key:0},T={key:0,class:"flex flex-col items-center justify-center p-3"},E={class:"text-lg font-bold text-gray-800"},H={key:1,class:"flex flex-col items-center justify-center"},L={key:2,class:"px-5 py-4"},q={key:3},G={key:1,class:"flex flex-col items-center justify-center"},Z={__name:"Fees",setup(J){let u=x();const h=U("$user");y(0),x();let v=h.data.is_student,k=h.data.student;g({url:"seminary.seminary.api.get_scholarship",params:{student:k},onSuccess:s=>{u.scholarships=s},auto:!0}),g({url:"seminary.seminary.api.get_student_invoices",params:{student:k},onSuccess:s=>{s=s.sort((a,m)=>{const e={Unpaid:0,Paid:1},i=e[a.status],c=e[m.status];if(i!==c)return i-c}),l.rows=s},auto:!0});const l=O({rows:[],columns:[{label:"Name",key:"name",width:1},{label:"Customer",key:"customer",width:1},{label:"Posting Date",key:"posting_date",width:1},{label:"Total Amount",key:"total",width:1},{label:"Outsdanding Amount",key:"outstanding_amount",width:1},{label:"Status",key:"status",width:1},{label:"Invoice",key:"cta",width:1}]}),S=y(null),$=y(!1),C=s=>{let a=`/api/method/frappe.utils.print_format.download_pdf?
		doctype=${encodeURIComponent("Sales Invoice")}
		&name=${encodeURIComponent(s.name)}
		&format=${encodeURIComponent("Standard")}
	`;window.open(a,"_blank")},I=s=>{S.value=s,$.value=!0};return(s,a)=>{const m=z("Button");return o(v)?(t(),n("div",M,[a[2]||(a[2]=d("h2",{class:"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"}," My Financial Status ",-1)),o(u).scholarships&&o(u).scholarships.length>0&&o(u).scholarships?(t(),n("div",T,[d("h2",E," Scholarship: "+A(o(u).scholarships[0].scholarship),1),a[0]||(a[0]=d("br",null,null,-1))])):(t(),n("div",H,[...a[1]||(a[1]=[d("p",{class:"text-lg font-bold text-gray-800"},null,-1)])])),l.rows.length>0?(t(),n("div",L,[l.rows.length>0?(t(),r(o(R),{key:0,columns:l.columns,rows:l.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},{default:p(()=>[_(o(B),null,{default:p(()=>[(t(!0),n(b,null,w(l.columns,e=>(t(),r(o(D),{key:e.key,item:e},null,8,["item"]))),128))]),_:1}),(t(!0),n(b,null,w(l.rows,e=>(t(),r(o(P),{key:e.id,row:e},{default:p(({column:i,item:c})=>[_(o(F),{item:c,align:i.align},{default:p(()=>[i.key==="status"?(t(),r(o(N),{key:0,variant:"subtle",theme:e.status==="Paid"?s.bg_color="green":s.bg_color="red",size:"md",label:c},null,8,["theme","label"])):f("",!0),i.key==="cta"&&e.status==="Paid"?(t(),r(m,{key:1,onClick:j=>C(e),class:"hover:bg-gray-900 hover:text-white","icon-left":"download",label:"Download Invoice"},null,8,["onClick"])):f("",!0),i.key==="cta"&&(e.status==="Unpaid"||e.status==="Overdue")?(t(),r(m,{key:2,onClick:j=>I(e),class:"hover:bg-gray-900 hover:text-white flex flex-column items-center justify-center","icon-left":"credit-card",label:"Pay Now"},null,8,["onClick"])):f("",!0)]),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1},8,["columns","rows"])):f("",!0)])):(t(),n("div",q,[_(V,{message:"No Fees found"})]))])):(t(),n("div",G,[...a[3]||(a[3]=[d("p",{class:"text-lg font-bold text-gray-500"},"Student Financial Status are only displayed for Students",-1)])]))}}};export{Z as default};
//# sourceMappingURL=Fees-oyD-l-aS.js.map
