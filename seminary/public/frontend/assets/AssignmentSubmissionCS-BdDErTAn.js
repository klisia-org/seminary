var T=Object.defineProperty,z=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var C=(l,s,r)=>s in l?T(l,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[s]=r,D=(l,s)=>{for(var r in s||(s={}))L.call(s,r)&&C(l,r,s[r]);if(A)for(var r of A(s))O.call(s,r)&&C(l,r,s[r]);return l},q=(l,s)=>z(l,E(s));import{c as H,E as K,w as M,y as J,l as Q,m as W,G as X,n as Y,o as Z,q as ee,t as se}from"./frappe-ui-BzEkZ7NZ.js";import{bk as I,F as ae,r as k,av as te,I as ne,c as N,a8 as re,t as b,b as o,g as y,e as u,u as n,a as S,w as c,H as w,O as R,C as le,D as v,ce as ue}from"./vendor-IWZbD1HA.js";import{_ as B}from"./Link-DmVUQNbJ.js";const oe={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ie={class:"md:w-3/4 md:mx-auto py-5 mx-5"},me={class:"grid grid-cols-3 gap-5 mb-5"},de={key:0},ce={key:1},_e={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},pe={class:"text-xl font-medium"},ge={class:"leading-5"},ke={__name:"AssignmentSubmissionCS",props:{assignmentID:{type:String,required:!1},courseName:{type:String,required:!0}},setup(l){const s=I("$user"),r=I("$dayjs"),f=ae(),i=k(""),m=k(""),d=k("");te(()=>{var e,a;!((e=s.data)!=null&&e.is_instructor)&&!((a=s.data)!=null&&a.is_moderator)&&f.push({name:"Courses"}),i.value=_.assignmentID||f.currentRoute.value.query.assignmentID,m.value=f.currentRoute.value.query.member,d.value=f.currentRoute.value.query.status,V()});const _=l,h=H({url:"seminary.seminary.utils.get_course_details",cache:["course",_.courseName],params:{course:_.courseName},auto:!0}),x=()=>{let e={course:_.courseName};return i.value&&(e.assignment=i.value),m.value&&(e.member=m.value),d.value&&(e.status=d.value),e},p=K({doctype:"Assignment Submission",fields:["name","assignment","assignment_title","member_name","creation","status","grade"],filters:x(),orderBy:"creation desc",transform(e){return e.map(a=>q(D({},a),{creation:r(a.creation).fromNow()}))}});ne([i,m,d],()=>{f.push({query:{assignmentID:i.value,member:m.value,status:d.value}}),V()});const V=()=>{p.update({filters:x()}),p.reload()},$=N(()=>[{label:"Student",key:"member_name",width:1},{label:"Assignment",key:"assignment_title",width:2},{label:"Submitted",key:"creation",width:1,align:"left"},{label:"Grade",key:"grade",width:1,align:"center"},{label:"Status",key:"status",width:1,align:"center"}]),F=N(()=>[{label:"",value:""},{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Not Graded",value:"Not Graded"},{label:"Graded",value:"Graded"}]),j=e=>e==="Pass"||e==="Graded"?"green":e==="Not Graded"?"blue":"red",P=N(()=>{var a;let e=[{label:"Courses",route:{name:"Courses"}}];return e.push({label:(a=h==null?void 0:h.data)==null?void 0:a.course,route:{name:"CourseDetail",params:{courseName:_.courseName}}}),e.push({label:"Gradebook",route:{name:"Gradebook",params:{courseName:_.courseName}}}),e.push({label:"Assignment Submissions"}),e});return(e,a)=>{var G;const U=re("router-link");return o(),b(w,null,[y("header",oe,[u(n(M),{items:P.value},null,8,["items"])]),y("div",ie,[y("div",me,[u(B,{doctype:"Assignment Activity",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value=t),placeholder:e.__("Assignment")},null,8,["modelValue","placeholder"]),u(B,{doctype:"User",modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=t=>m.value=t),placeholder:e.__("Student")},null,8,["modelValue","placeholder"]),u(n(J),{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=t=>d.value=t),type:"select",options:F.value,placeholder:e.__("Status")},null,8,["modelValue","options","placeholder"])]),n(p).loading||(G=n(p).data)!=null&&G.length?(o(),S(n(se),{key:0,columns:$.value,rows:n(p).data,rowKey:"name"},{default:c(()=>[u(n(Q),{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2"},{default:c(()=>[(o(!0),b(w,null,R($.value,t=>(o(),S(n(W),{item:t},null,8,["item"]))),256))]),_:1}),u(n(X),null,{default:c(()=>[(o(!0),b(w,null,R(n(p).data,t=>(o(),S(U,{to:{name:"AssignmentSubmission",params:{assignmentID:t.assignment,submissionName:t.name}}},{default:c(()=>[u(n(Y),{row:t},{default:c(({column:g,item:be})=>[u(n(Z),{item:t[g.key],align:g.align},{default:c(()=>[g.key=="status"?(o(),b("div",de,[u(n(ee),{theme:j(t[g.key])},{default:c(()=>[le(v(t[g.key]),1)]),_:2},1032,["theme"])])):(o(),b("div",ce,v(t[g.key]),1))]),_:2},1032,["item","align"])]),_:2},1032,["row"])]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["columns","rows"])):(o(),b("div",_e,[u(n(ue),{class:"size-8 mx-auto stroke-1 text-ink-gray-4"}),y("div",pe,v(e.__("No submissions")),1),y("div",ge,v(e.__("There are no submissions for this course.")),1)]))])],64)}}};export{ke as default};
//# sourceMappingURL=AssignmentSubmissionCS-BdDErTAn.js.map
