const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FontColor-G8Ij4G1Q.js","assets/index-D2hg7nHX.js","assets/index-DX1vi_3J.css","assets/InsertLink-Bzb3PuCZ.js","assets/table-DhGkjCET.js","assets/table-K9zAnSqU.css","assets/ListView-6JS4BnER.js","assets/InsertImage-C2lZkra9.js","assets/InsertVideo-CgHk5fCv.js"])))=>i.map(i=>d[i]);
var pi=Object.defineProperty,fi=Object.defineProperties;var hi=Object.getOwnPropertyDescriptors;var Wt=Object.getOwnPropertySymbols;var In=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable;var Bn=(e,t,n)=>t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ue=(e,t)=>{for(var n in t||(t={}))In.call(t,n)&&Bn(e,n,t[n]);if(Wt)for(var n of Wt(t))Vn.call(t,n)&&Bn(e,n,t[n]);return e},Ze=(e,t)=>fi(e,hi(t));var Kt=(e,t)=>{var n={};for(var r in e)In.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Wt)for(var r of Wt(e))t.indexOf(r)<0&&Vn.call(e,r)&&(n[r]=e[r]);return n};var et=(e,t,n)=>new Promise((r,i)=>{var s=a=>{try{o(n.next(a))}catch(c){i(c)}},l=a=>{try{o(n.throw(a))}catch(c){i(c)}},o=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,l);o((n=n.apply(e,t)).next())});import{r as N,l as B,S as Me,U as je,ak as ne,al as mi,am as de,V as ae,an as vi,W as gi,X as bi,Y as en,A as qe,C as Oe,a6 as De,a7 as yi,a8 as wi,a9 as xi,Z as Ht,aa as cr,F as be,T as an,ao as _i,a3 as tn,a0 as nn,a2 as ki,ap as Ci,$ as Ai,aq as Oi,i as Mt,ar as Si,a1 as $i,as as Ti,a4 as Ce,R as Ae,at as Hi,z as J,P as An,_ as le,au as Mi,j as ce,o as d,f as P,w as F,h as K,av as Z,aw as Ve,ax as Ue,a as v,s as re,c as g,t as M,O as We,g as V,k as Se,K as ge,Q as it,N as Pn,ay as On,az as ht,aA as pr,e as h,q as nt,aB as hn,aC as fr,aD as hr,aE as mr,aF as Ei,aG as Li,aH as vr,aI as Ri,d as kt,aJ as gr,I as ln,aK as Di,aL as zi,aM as Bi,aN as Ii,aO as Gt,aP as Jt,aQ as Qt,aR as Vi,aS as Pi,aT as Fi,aU as qi,aV as Ni,aW as ji,aX as Ui,aY as Wi,aZ as Ki,a_ as Ji,a$ as Qi,b0 as Xi,b1 as Yi,b2 as Gi,b3 as Zi,b4 as es,b5 as ts,m as pe,n as ns,E as rs,p as br,b as Ie,L as Fn,D as is,b6 as Le,b7 as St,b8 as yr,u as wr,aj as ss,b9 as xr,ac as _r,ba as os,bb as as}from"./index-D2hg7nHX.js";import{_ as rn,v as ls,h as us,F as ds,n as cs,f as ps,s as fs,m as hs}from"./table-DhGkjCET.js";import{g as ms,u as vs,d as gs}from"./ListView-6JS4BnER.js";function kr(e={},t=null,n=[]){for(let[r,i]of Object.entries(e))Ar(n,Cr(t,r),i);return n}function Cr(e,t){return e?e+"["+t+"]":t}function Ar(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())Ar(e,Cr(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):kr(n,t,e)}function Ip(e){var t,n;let r=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(r){for(let i of r.elements)if(i!==e&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}function bs(e,t,n){let r=N(n==null?void 0:n.value),i=B(()=>e.value!==void 0);return[B(()=>i.value?e.value:r.value),function(s){return i.value||(r.value=s),t==null?void 0:t(s)}]}function ys(e,t){return e===t}var ws=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ws||{}),xs=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(xs||{}),_s=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(_s||{});let Or=Symbol("ComboboxContext");function Et(e){let t=Mt(Or,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Et),n}return t}let Sr=Me({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ys},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:r}){let i=N(1),s=N(null),l=N(null),o=N(null),a=N(null),c=N({static:!1,hold:!1}),f=N([]),w=N(null),m=N(1),p=N(!1);function C(E=D=>D){let D=w.value!==null?f.value[w.value]:null,_=Si(E(f.value.slice()),H=>ae(H.dataRef.domRef)),k=D?_.indexOf(D):null;return k===-1&&(k=null),{options:_,activeOptionIndex:k}}let T=B(()=>e.multiple?1:0),A=B(()=>e.nullable),[x,O]=bs(B(()=>e.modelValue),E=>r("update:modelValue",E),B(()=>e.defaultValue)),$=B(()=>x.value===void 0?je(T.value,{1:[],0:void 0}):x.value),u=null,S=null,y={comboboxState:i,value:$,mode:T,compare(E,D){if(typeof e.by=="string"){let _=e.by;return(E==null?void 0:E[_])===(D==null?void 0:D[_])}return e.by(E,D)},defaultValue:B(()=>e.defaultValue),nullable:A,inputRef:l,labelRef:s,buttonRef:o,optionsRef:a,disabled:B(()=>e.disabled),options:f,change(E){O(E)},activeOptionIndex:B(()=>{if(p.value&&w.value===null&&f.value.length>0){let E=f.value.findIndex(D=>!D.dataRef.disabled);E!==-1&&(w.value=E)}return w.value}),activationTrigger:m,optionsPropsRef:c,closeCombobox(){p.value=!1,!e.disabled&&i.value!==1&&(i.value=1,w.value=null)},openCombobox(){if(p.value=!0,e.disabled||i.value===0)return;let E=f.value.findIndex(D=>{let _=ne(D.dataRef.value);return je(T.value,{0:()=>y.compare(ne(y.value.value),ne(_)),1:()=>ne(y.value.value).some(k=>y.compare(ne(k),ne(_)))})});E!==-1&&(w.value=E),i.value=0},goToOption(E,D,_){p.value=!1,u!==null&&cancelAnimationFrame(u),u=requestAnimationFrame(()=>{if(e.disabled||a.value&&!c.value.static&&i.value===1)return;let k=C();if(k.activeOptionIndex===null){let j=k.options.findIndex(G=>!G.dataRef.disabled);j!==-1&&(k.activeOptionIndex=j)}let H=mi(E===de.Specific?{focus:de.Specific,id:D}:{focus:E},{resolveItems:()=>k.options,resolveActiveIndex:()=>k.activeOptionIndex,resolveId:j=>j.id,resolveDisabled:j=>j.dataRef.disabled});w.value=H,m.value=_!=null?_:1,f.value=k.options})},selectOption(E){let D=f.value.find(k=>k.id===E);if(!D)return;let{dataRef:_}=D;O(je(T.value,{0:()=>_.value,1:()=>{let k=ne(y.value.value).slice(),H=ne(_.value),j=k.findIndex(G=>y.compare(H,ne(G)));return j===-1?k.push(H):k.splice(j,1),k}}))},selectActiveOption(){if(y.activeOptionIndex.value===null)return;let{dataRef:E,id:D}=f.value[y.activeOptionIndex.value];O(je(T.value,{0:()=>E.value,1:()=>{let _=ne(y.value.value).slice(),k=ne(E.value),H=_.findIndex(j=>y.compare(k,ne(j)));return H===-1?_.push(k):_.splice(H,1),_}})),y.goToOption(de.Specific,D)},registerOption(E,D){S&&cancelAnimationFrame(S);let _={id:E,dataRef:D},k=C(H=>(H.push(_),H));if(w.value===null){let H=D.value.value;je(T.value,{0:()=>y.compare(ne(y.value.value),ne(H)),1:()=>ne(y.value.value).some(j=>y.compare(ne(j),ne(H)))})&&(k.activeOptionIndex=k.options.indexOf(_))}f.value=k.options,w.value=k.activeOptionIndex,m.value=1,k.options.some(H=>!ae(H.dataRef.domRef))&&(S=requestAnimationFrame(()=>{let H=C();f.value=H.options,w.value=H.activeOptionIndex}))},unregisterOption(E){var D;y.activeOptionIndex.value!==null&&((D=y.options.value[y.activeOptionIndex.value])==null?void 0:D.id)===E&&(p.value=!0);let _=C(k=>{let H=k.findIndex(j=>j.id===E);return H!==-1&&k.splice(H,1),k});f.value=_.options,w.value=_.activeOptionIndex,m.value=1}};vi([l,o,a],()=>y.closeCombobox(),B(()=>i.value===0)),gi(Or,y),bi(B(()=>je(i.value,{0:en.Open,1:en.Closed})));let I=B(()=>y.activeOptionIndex.value===null?null:f.value[y.activeOptionIndex.value].dataRef.value),U=B(()=>{var E;return(E=ae(l))==null?void 0:E.closest("form")});return qe(()=>{Oe([U],()=>{if(!U.value||e.defaultValue===void 0)return;function E(){y.change(e.defaultValue)}return U.value.addEventListener("reset",E),()=>{var D;(D=U.value)==null||D.removeEventListener("reset",E)}},{immediate:!0})}),()=>{let j=e,{name:E,disabled:D,form:_}=j,k=Kt(j,["name","disabled","form"]),H={open:i.value===0,disabled:D,activeIndex:y.activeOptionIndex.value,activeOption:I.value,value:$.value};return De(be,[...E!=null&&$.value!=null?kr({[E]:$.value}).map(([G,ee])=>De(yi,wi({features:xi.Hidden,key:G,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:_,name:G,value:ee}))):[],Ht({theirProps:ue(ue({},n),cr(k,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])),ourProps:{},slot:H,slots:t,attrs:n,name:"Combobox"})])}}}),ks=Me({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${an()}`}},setup(e,{attrs:t,slots:n,expose:r}){let i=Et("ComboboxButton");r({el:i.buttonRef,$el:i.buttonRef});function s(a){i.disabled.value||(i.comboboxState.value===0?i.closeCombobox():(a.preventDefault(),i.openCombobox()),Ae(()=>{var c;return(c=ae(i.inputRef))==null?void 0:c.focus({preventScroll:!0})}))}function l(a){switch(a.key){case Ce.ArrowDown:a.preventDefault(),a.stopPropagation(),i.comboboxState.value===1&&i.openCombobox(),Ae(()=>{var c;return(c=i.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case Ce.ArrowUp:a.preventDefault(),a.stopPropagation(),i.comboboxState.value===1&&(i.openCombobox(),Ae(()=>{i.value.value||i.goToOption(de.Last)})),Ae(()=>{var c;return(c=i.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case Ce.Escape:if(i.comboboxState.value!==0)return;a.preventDefault(),i.optionsRef.value&&!i.optionsPropsRef.value.static&&a.stopPropagation(),i.closeCombobox(),Ae(()=>{var c;return(c=i.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return}}let o=$i(B(()=>({as:e.as,type:t.type})),i.buttonRef);return()=>{var a,c;let f={open:i.comboboxState.value===0,disabled:i.disabled.value,value:i.value.value},C=e,{id:w}=C,m=Kt(C,["id"]),p={ref:i.buttonRef,id:w,type:o.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(a=ae(i.optionsRef))==null?void 0:a.id,"aria-expanded":i.comboboxState.value===0,"aria-labelledby":i.labelRef.value?[(c=ae(i.labelRef))==null?void 0:c.id,w].join(" "):void 0,disabled:i.disabled.value===!0?!0:void 0,onKeydown:l,onClick:s};return Ht({ourProps:p,theirProps:m,slot:f,attrs:t,slots:n,name:"ComboboxButton"})}}}),$r=Me({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${an()}`}},emits:{change:e=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:i}){let s=Et("ComboboxInput"),l=B(()=>_i(ae(s.inputRef))),o={value:!1};i({el:s.inputRef,$el:s.inputRef});function a(){s.change(null);let x=ae(s.optionsRef);x&&(x.scrollTop=0),s.goToOption(de.Nothing)}let c=B(()=>{var x;let O=s.value.value;return ae(s.inputRef)?typeof e.displayValue!="undefined"&&O!==void 0?(x=e.displayValue(O))!=null?x:"":typeof O=="string"?O:"":""});qe(()=>{Oe([c,s.comboboxState,l],([x,O],[$,u])=>{if(o.value)return;let S=ae(s.inputRef);S&&((u===0&&O===1||x!==$)&&(S.value=x),requestAnimationFrame(()=>{var y;if(o.value||!S||((y=l.value)==null?void 0:y.activeElement)!==S)return;let{selectionStart:I,selectionEnd:U}=S;Math.abs((U!=null?U:0)-(I!=null?I:0))===0&&I===0&&S.setSelectionRange(S.value.length,S.value.length)}))},{immediate:!0}),Oe([s.comboboxState],([x],[O])=>{if(x===0&&O===1){if(o.value)return;let $=ae(s.inputRef);if(!$)return;let u=$.value,{selectionStart:S,selectionEnd:y,selectionDirection:I}=$;$.value="",$.value=u,I!==null?$.setSelectionRange(S,y,I):$.setSelectionRange(S,y)}})});let f=N(!1);function w(){f.value=!0}function m(){Ti().nextFrame(()=>{f.value=!1})}function p(x){switch(o.value=!0,x.key){case Ce.Enter:if(o.value=!1,s.comboboxState.value!==0||f.value)return;if(x.preventDefault(),x.stopPropagation(),s.activeOptionIndex.value===null){s.closeCombobox();return}s.selectActiveOption(),s.mode.value===0&&s.closeCombobox();break;case Ce.ArrowDown:return o.value=!1,x.preventDefault(),x.stopPropagation(),je(s.comboboxState.value,{0:()=>s.goToOption(de.Next),1:()=>s.openCombobox()});case Ce.ArrowUp:return o.value=!1,x.preventDefault(),x.stopPropagation(),je(s.comboboxState.value,{0:()=>s.goToOption(de.Previous),1:()=>{s.openCombobox(),Ae(()=>{s.value.value||s.goToOption(de.Last)})}});case Ce.Home:if(x.shiftKey)break;return o.value=!1,x.preventDefault(),x.stopPropagation(),s.goToOption(de.First);case Ce.PageUp:return o.value=!1,x.preventDefault(),x.stopPropagation(),s.goToOption(de.First);case Ce.End:if(x.shiftKey)break;return o.value=!1,x.preventDefault(),x.stopPropagation(),s.goToOption(de.Last);case Ce.PageDown:return o.value=!1,x.preventDefault(),x.stopPropagation(),s.goToOption(de.Last);case Ce.Escape:if(o.value=!1,s.comboboxState.value!==0)return;x.preventDefault(),s.optionsRef.value&&!s.optionsPropsRef.value.static&&x.stopPropagation(),s.nullable.value&&s.mode.value===0&&s.value.value===null&&a(),s.closeCombobox();break;case Ce.Tab:if(o.value=!1,s.comboboxState.value!==0)return;s.mode.value===0&&s.selectActiveOption(),s.closeCombobox();break}}function C(x){t("change",x),s.nullable.value&&s.mode.value===0&&x.target.value===""&&a(),s.openCombobox()}function T(){o.value=!1}let A=B(()=>{var x,O,$,u;return(u=($=(O=e.defaultValue)!=null?O:s.defaultValue.value!==void 0?(x=e.displayValue)==null?void 0:x.call(e,s.defaultValue.value):null)!=null?$:s.defaultValue.value)!=null?u:""});return()=>{var x,O,$,u,S,y;let I={open:s.comboboxState.value===0},H=e,{id:U,displayValue:E,onChange:D}=H,_=Kt(H,["id","displayValue","onChange"]),k={"aria-controls":(x=s.optionsRef.value)==null?void 0:x.id,"aria-expanded":s.comboboxState.value===0,"aria-activedescendant":s.activeOptionIndex.value===null||(O=s.options.value[s.activeOptionIndex.value])==null?void 0:O.id,"aria-labelledby":(S=($=ae(s.labelRef))==null?void 0:$.id)!=null?S:(u=ae(s.buttonRef))==null?void 0:u.id,"aria-autocomplete":"list",id:U,onCompositionstart:w,onCompositionend:m,onKeydown:p,onInput:C,onBlur:T,role:"combobox",type:(y=n.type)!=null?y:"text",tabIndex:0,ref:s.inputRef,defaultValue:A.value,disabled:s.disabled.value===!0?!0:void 0};return Ht({ourProps:k,theirProps:_,slot:I,attrs:n,slots:r,features:tn.RenderStrategy|tn.Static,name:"ComboboxInput"})}}}),Tr=Me({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:t,slots:n,expose:r}){let i=Et("ComboboxOptions"),s=`headlessui-combobox-options-${an()}`;r({el:i.optionsRef,$el:i.optionsRef}),nn(()=>{i.optionsPropsRef.value.static=e.static}),nn(()=>{i.optionsPropsRef.value.hold=e.hold});let l=ki(),o=B(()=>l!==null?(l.value&en.Open)===en.Open:i.comboboxState.value===0);return Ci({container:B(()=>ae(i.optionsRef)),enabled:B(()=>i.comboboxState.value===0),accept(a){return a.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}}),()=>{var a,c,f;let w={open:i.comboboxState.value===0},m={"aria-labelledby":(f=(a=ae(i.labelRef))==null?void 0:a.id)!=null?f:(c=ae(i.buttonRef))==null?void 0:c.id,id:s,ref:i.optionsRef,role:"listbox","aria-multiselectable":i.mode.value===1?!0:void 0},p=cr(e,["hold"]);return Ht({ourProps:m,theirProps:p,slot:w,attrs:t,slots:n,features:tn.RenderStrategy|tn.Static,visible:o.value,name:"ComboboxOptions"})}}}),Hr=Me({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:r}){let i=Et("ComboboxOption"),s=`headlessui-combobox-option-${an()}`,l=N(null);r({el:l,$el:l});let o=B(()=>i.activeOptionIndex.value!==null?i.options.value[i.activeOptionIndex.value].id===s:!1),a=B(()=>je(i.mode.value,{0:()=>i.compare(ne(i.value.value),ne(e.value)),1:()=>ne(i.value.value).some(A=>i.compare(ne(A),ne(e.value)))})),c=B(()=>({disabled:e.disabled,value:e.value,domRef:l}));qe(()=>i.registerOption(s,c)),Ai(()=>i.unregisterOption(s)),nn(()=>{i.comboboxState.value===0&&o.value&&i.activationTrigger.value!==0&&Ae(()=>{var A,x;return(x=(A=ae(l))==null?void 0:A.scrollIntoView)==null?void 0:x.call(A,{block:"nearest"})})});function f(A){if(e.disabled)return A.preventDefault();i.selectOption(s),i.mode.value===0&&i.closeCombobox(),Hi()||requestAnimationFrame(()=>{var x;return(x=ae(i.inputRef))==null?void 0:x.focus()})}function w(){if(e.disabled)return i.goToOption(de.Nothing);i.goToOption(de.Specific,s)}let m=Oi();function p(A){m.update(A)}function C(A){m.wasMoved(A)&&(e.disabled||o.value||i.goToOption(de.Specific,s,0))}function T(A){m.wasMoved(A)&&(e.disabled||o.value&&(i.optionsPropsRef.value.hold||i.goToOption(de.Nothing)))}return()=>{let{disabled:A}=e,x={active:o.value,selected:a.value,disabled:A},O={id:s,ref:l,role:"option",tabIndex:A===!0?void 0:-1,"aria-disabled":A===!0?!0:void 0,"aria-selected":a.value,disabled:void 0,onClick:f,onFocus:w,onPointerenter:p,onMouseenter:p,onPointermove:C,onMousemove:C,onPointerleave:T,onMouseleave:T};return Ht({ourProps:O,theirProps:e,slot:x,attrs:n,slots:t,name:"ComboboxOption"})}}});const Cs={name:"Autocomplete",props:{options:{type:Array,default:()=>[]},modelValue:{type:[String,Object,Array]},placeholder:{type:String},bodyClasses:{type:[String,Array,Object]},multiple:{type:Boolean,default:!1},hideSearch:{type:Boolean,default:!1}},emits:["update:modelValue","update:query","change"],components:{Popover:An,Button:le,FeatherIcon:Mi,Combobox:Sr,ComboboxInput:$r,ComboboxOptions:Tr,ComboboxOption:Hr,ComboboxButton:ks},expose:["togglePopover","rootRef"],data(){return{query:"",showOptions:!1}},computed:{selectedValue:{get(){var e,t;return this.multiple?wt((e=this.modelValue)==null?void 0:e[0])==="value"?(t=this.modelValue)==null?void 0:t.map(n=>this.findOption(n)):this.modelValue:this.findOption(this.modelValue)},set(e){if(this.query="",e&&!this.multiple&&(this.showOptions=!1),!this.multiple){this.$emit("update:modelValue",e);return}this.$emit("update:modelValue",e)}},groups(){var t;return!this.options||this.options.length==0?[]:((t=this.options[0])!=null&&t.group?this.options:[{group:"",items:this.sanitizeOptions(this.options)}]).map((n,r)=>({key:r,group:n.group,hideLabel:n.hideLabel||!1,items:this.filterOptions(this.sanitizeOptions(n.items))})).filter(n=>n.items.length>0)},allOptions(){return this.groups.flatMap(e=>e.items)},areAllOptionsSelected(){var e;return this.multiple?this.allOptions.length===((e=this.selectedValue)==null?void 0:e.length):!1}},watch:{query(e){this.$emit("update:query",e)},showOptions(e){e&&Ae(()=>{var t,n;return(n=(t=this.$refs.searchInput)==null?void 0:t.$el)==null?void 0:n.focus()})}},methods:{rootRef(){return this.$refs.rootRef},togglePopover(e){this.showOptions=e!=null?e:!this.showOptions},findOption(e){if(!e)return e;const t=wt(e)==="value"?e:e.value;return this.allOptions.find(n=>n.value===t)},filterOptions(e){return this.query?e.filter(t=>t.label.toLowerCase().includes(this.query.trim().toLowerCase())||t.value.toLowerCase().includes(this.query.trim().toLowerCase())):e},displayValue(e){return e?this.multiple?Array.isArray(e)?e.map(t=>this.getLabel(this.findOption(t))).join(", "):"":this.getLabel(this.findOption(e)):""},getLabel(e){return wt(e)==="value"?e:(e==null?void 0:e.label)||(e==null?void 0:e.value)||"No label"},sanitizeOptions(e){return e?e.map(t=>wt(t)==="option"?t:{label:t,value:t}):[]},isOptionSelected(e){var n,r;if(!this.selectedValue)return!1;const t=wt(e)==="value"?e:e.value;return this.multiple?(r=this.selectedValue)==null?void 0:r.find(i=>i&&i.value===t):((n=this.selectedValue)==null?void 0:n.value)===t},selectAll(){this.selectedValue=this.allOptions},clearAll(){this.selectedValue=[]}}};function wt(e){return typeof e=="object"?"option":"value"}const As={class:"w-full"},Os=["onClick"],Ss={class:"flex items-center overflow-hidden"},$s={key:0,class:"truncate text-base leading-5"},Ts={key:1,class:"text-base leading-5 text-gray-500"},Hs={key:0,class:"sticky top-0 z-10 flex items-stretch space-x-1.5 bg-white py-1.5"},Ms={class:"relative w-full"},Es={key:0,class:"sticky top-10 truncate bg-white px-2.5 py-1.5 text-sm font-medium text-gray-600"},Ls={class:"flex flex-1 gap-2 overflow-hidden"},Rs={key:0,class:"flex-shrink-0"},Ds={key:1,class:"h-4 w-4"},zs={class:"flex-1 truncate"},Bs={key:0,class:"ml-2 flex-shrink-0"},Is={key:0,class:"text-sm text-gray-600"},Vs={key:1,class:"rounded-md px-2.5 py-1.5 text-base text-gray-600"},Ps={key:0,class:"border-t p-1"},Fs={key:0,class:"flex items-center justify-end"};function qs(e,t,n,r,i,s){const l=ce("FeatherIcon"),o=ce("ComboboxInput"),a=ce("ComboboxOption"),c=ce("ComboboxOptions"),f=ce("Button"),w=ce("Popover"),m=ce("Combobox");return d(),P(m,{modelValue:s.selectedValue,"onUpdate:modelValue":t[3]||(t[3]=p=>s.selectedValue=p),multiple:n.multiple,nullable:""},{default:F(({open:p})=>[K(w,{class:"w-full",show:i.showOptions,"onUpdate:show":t[2]||(t[2]=C=>i.showOptions=C),ref:"rootRef"},{target:F(({open:C,togglePopover:T})=>[Z(e.$slots,"target",Ve(Ue({open:C,togglePopover:T})),()=>[v("div",As,[v("button",{class:re(["flex h-7 w-full items-center justify-between gap-2 rounded bg-gray-100 px-2 py-1 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-400",{"bg-gray-200":p}]),onClick:()=>T()},[v("div",Ss,[Z(e.$slots,"prefix"),s.selectedValue?(d(),g("span",$s,M(s.displayValue(s.selectedValue)),1)):(d(),g("span",Ts,M(n.placeholder||""),1))]),K(l,{name:"chevron-down",class:"h-4 w-4 text-gray-600","aria-hidden":"true"})],10,Os)])])]),body:F(({isOpen:C,togglePopover:T})=>[We(v("div",null,[v("div",{class:re(["relative mt-1 rounded-lg bg-white text-base shadow-2xl",n.bodyClasses])},[K(c,{class:re(["max-h-[15rem] overflow-y-auto px-1.5 pb-1.5",{"pt-1.5":n.hideSearch}]),static:""},{default:F(()=>[n.hideSearch?V("",!0):(d(),g("div",Hs,[v("div",Ms,[K(o,{ref:"searchInput",class:"form-input w-full",type:"text",onChange:t[0]||(t[0]=A=>{i.query=A.target.value}),value:i.query,autocomplete:"off",placeholder:"Search"},null,8,["value"]),v("button",{class:"absolute right-0 inline-flex h-7 w-7 items-center justify-center",onClick:t[1]||(t[1]=A=>s.selectedValue=null)},[K(l,{name:"x",class:"w-4"})])])])),(d(!0),g(be,null,Se(s.groups,A=>We((d(),g("div",{key:A.key},[A.group&&!A.hideLabel?(d(),g("div",Es,M(A.group),1)):V("",!0),(d(!0),g(be,null,Se(A.items.slice(0,50),(x,O)=>(d(),P(a,{as:"template",key:(x==null?void 0:x.value)||O,value:x},{default:F(({active:$,selected:u})=>[v("li",{class:re(["flex cursor-pointer items-center justify-between rounded px-2.5 py-1.5 text-base",{"bg-gray-100":$}])},[v("div",Ls,[e.$slots["item-prefix"]||e.$props.multiple?(d(),g("div",Rs,[Z(e.$slots,"item-prefix",ge({ref_for:!0},{active:$,selected:u,option:x}),()=>[s.isOptionSelected(x)?(d(),P(l,{key:0,name:"check",class:"h-4 w-4 text-gray-700"})):(d(),g("div",Ds))])])):V("",!0),v("span",zs,M(s.getLabel(x)),1)]),e.$slots["item-suffix"]||x!=null&&x.description?(d(),g("div",Bs,[Z(e.$slots,"item-suffix",ge({ref_for:!0},{active:$,selected:u,option:x}),()=>[x!=null&&x.description?(d(),g("div",Is,M(x.description),1)):V("",!0)])])):V("",!0)],2)]),_:2},1032,["value"]))),128))])),[[it,A.items.length>0]])),128)),s.groups.length==0?(d(),g("li",Vs," No results found ")):V("",!0)]),_:3},8,["class"]),e.$slots.footer||n.multiple?(d(),g("div",Ps,[Z(e.$slots,"footer",Ve(Ue({togglePopover:T})),()=>[n.multiple?(d(),g("div",Fs,[s.areAllOptionsSelected?V("",!0):(d(),P(f,{key:0,label:"Select All",onClick:Pn(s.selectAll,["stop"])},null,8,["onClick"])),s.areAllOptionsSelected?(d(),P(f,{key:1,label:"Clear All",onClick:Pn(s.clearAll,["stop"])},null,8,["onClick"])):V("",!0)])):V("",!0)])])):V("",!0)],2)],512),[[it,C]])]),_:2},1032,["show"])]),_:3},8,["modelValue","multiple"])}const Ns=J(Cs,[["render",qs]]),js={class:"relative flex items-center"},Us=["type","placeholder","disabled","id","value"],Ws=Me({__name:"TextInput",props:{type:{default:"text"},size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const r=e,i=n,s=On(),l=ht(),o=N(null);t({el:o});const a=B(()=>r.disabled?"text-gray-600":"text-gray-800"),c=B(()=>{let C={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[r.size],T={sm:["py-1.5",s.prefix?"pl-8":"pl-2",s.suffix?"pr-8":"pr-2"],md:["py-1.5",s.prefix?"pl-9":"pl-2.5",s.suffix?"pr-9":"pr-2.5"],lg:["py-1.5",s.prefix?"pl-10":"pl-3",s.suffix?"pr-10":"pr-3"],xl:["py-1.5",s.prefix?"pl-10":"pl-3",s.suffix?"pr-10":"pr-3"]}[r.size],A=r.disabled?"disabled":r.variant,x={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",r.variant==="outline"?"border-gray-300":"border-transparent"]}[A];return[C,T,x,a.value,"transition-colors w-full"]});let f=B(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[r.size]),w=B(()=>({sm:"pr-2",md:"pr-2.5",lg:"pr-3",xl:"pr-3"})[r.size]),m=C=>{i("update:modelValue",C)};r.debounce&&(m=pr(m,r.debounce));let p=C=>{m(C.target.value)};return(C,T)=>(d(),g("div",js,[C.$slots.prefix?(d(),g("div",{key:0,class:re(["absolute inset-y-0 left-0 flex items-center",a.value,h(f)])},[Z(C.$slots,"prefix")],2)):V("",!0),v("input",ge({ref_key:"inputRef",ref:o,type:C.type,placeholder:C.placeholder,class:c.value,disabled:C.disabled,id:C.id,value:C.modelValue,onInput:T[0]||(T[0]=(...A)=>h(p)&&h(p)(...A)),onChange:T[1]||(T[1]=(...A)=>h(p)&&h(p)(...A))},h(l)),null,16,Us),C.$slots.suffix?(d(),g("div",{key:1,class:re(["absolute inset-y-0 right-0 flex items-center",a.value,h(w)])},[Z(C.$slots,"suffix")],2)):V("",!0)]))}});class Ks{constructor(){this.listeners={},this.failed=!1}on(t,n){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(n)}trigger(t,n){(this.listeners[t]||[]).forEach(i=>{i.call(this,n)})}upload(t,n){return new Promise((r,i)=>{let s=new XMLHttpRequest;s.upload.addEventListener("loadstart",()=>{this.trigger("start")}),s.upload.addEventListener("progress",a=>{a.lengthComputable&&this.trigger("progress",{uploaded:a.loaded,total:a.total})}),s.upload.addEventListener("load",()=>{this.trigger("finish")}),s.addEventListener("error",()=>{this.trigger("error"),i()}),s.onreadystatechange=()=>{if(s.readyState==XMLHttpRequest.DONE){let a;if(s.status===200){let c=null;try{c=JSON.parse(s.responseText)}catch(w){c=s.responseText}let f=c.message||c;r(f)}else if(s.status===403)a=JSON.parse(s.responseText);else{this.failed=!0;try{a=JSON.parse(s.responseText)}catch(c){}}a&&a.exc&&console.error(JSON.parse(a.exc)[0]),i(a)}};const l=n.upload_endpoint||"/api/method/upload_file";s.open("POST",l,!0),s.setRequestHeader("Accept","application/json"),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&s.setRequestHeader("X-Frappe-CSRF-Token",window.csrf_token);let o=new FormData;t&&o.append("file",t,t.name),o.append("is_private",n.private?"1":"0"),o.append("folder",n.folder||"Home"),n.file_url&&o.append("file_url",n.file_url),n.doctype&&o.append("doctype",n.doctype),n.docname&&o.append("docname",n.docname),n.fieldname&&o.append("fieldname",n.fieldname),n.method&&o.append("method",n.method),n.type&&o.append("type",n.type),s.send(o)})}}const Js={name:"FileUploader",props:{fileTypes:{type:[String,Array]},uploadArgs:{type:Object},validateFile:{type:Function,default:null}},data(){return{uploader:null,uploading:!1,uploaded:0,error:null,message:"",total:0,file:null,finishedUploading:!1}},computed:{progress(){let e=Math.floor(this.uploaded/this.total*100);return isNaN(e)?0:e},success(){return this.finishedUploading&&!this.error}},methods:{inputRef(){return this.$refs.input},openFileSelector(){this.$refs.input.click()},onFileAdd(e){return et(this,null,function*(){if(this.error=null,this.file=e.target.files[0],this.file&&this.validateFile)try{let t=yield this.validateFile(this.file);t&&(this.error=t)}catch(t){this.error=t}this.error||this.uploadFile(this.file)})},uploadFile(e){return et(this,null,function*(){this.error=null,this.uploaded=0,this.total=0,this.uploader=new Ks,this.uploader.on("start",()=>{this.uploading=!0}),this.uploader.on("progress",t=>{this.uploaded=t.uploaded,this.total=t.total}),this.uploader.on("error",()=>{this.uploading=!1,this.error="Error Uploading File"}),this.uploader.on("finish",()=>{this.uploading=!1,this.finishedUploading=!0}),this.uploader.upload(e,this.uploadArgs||{}).then(t=>{this.$emit("success",t)}).catch(t=>{this.uploading=!1;let n="Error Uploading File";t!=null&&t._server_messages?n=JSON.parse(JSON.parse(t._server_messages)[0]).message:t!=null&&t.exc&&(n=JSON.parse(t.exc)[0].split(`
`).slice(-2,-1)[0]),this.error=n,this.$emit("failure",t)})})}},expose:["inputRef"]},Qs=["accept"];function Xs(e,t,n,r,i,s){return d(),g("div",null,[v("input",{ref:"input",type:"file",accept:n.fileTypes,class:"hidden",onChange:t[0]||(t[0]=(...l)=>s.onFileAdd&&s.onFileAdd(...l))},null,40,Qs),Z(e.$slots,"default",Ve(Ue({file:i.file,uploading:i.uploading,progress:s.progress,uploaded:i.uploaded,message:i.message,error:i.error,total:i.total,success:s.success,openFileSelector:s.openFileSelector})))])}const Mr=J(Js,[["render",Xs]]),Ys={class:"relative flex items-center"},Gs=["disabled","id","value"],Zs=["value","disabled","selected"],eo=Me({inheritAttrs:!1,__name:"Select",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=t;On();const i=ht();function s(m){r("update:modelValue",m.target.value)}const l=B(()=>{var m;return((m=n.options)==null?void 0:m.map(p=>typeof p=="string"?{label:p,value:p}:p).filter(Boolean))||[]}),o=B(()=>n.disabled?"text-gray-500":"text-gray-800"),a=B(()=>({sm:"text-base",md:"text-base",lg:"text-lg",xl:"text-xl"})[n.size]),c=B(()=>({sm:"px-2",md:"px-2.5",lg:"px-3",xl:"px-3"})[n.size]),f=B(()=>{let m={sm:"rounded h-7",md:"rounded h-8",lg:"rounded-md h-10",xl:"rounded-md h-10"}[n.size],p=n.disabled?"disabled":n.variant,C={subtle:"border border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white hover:border-gray-400 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",ghost:"bg-transparent border-transparent hover:bg-gray-200 focus:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border",n.variant!=="ghost"?"bg-gray-50":"",n.variant==="outline"?"border-gray-300":"border-transparent"]}[p];return[m,a.value,c.value,C,o.value,"transition-colors w-full py-0"]});let w=B(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[n.size]);return(m,p)=>(d(),g("div",Ys,[m.$slots.prefix?(d(),g("div",{key:0,class:re(["absolute inset-y-0 left-0 flex items-center",o.value,h(w)])},[Z(m.$slots,"prefix")],2)):V("",!0),m.placeholder?We((d(),g("div",{key:1,class:re(["pointer-events-none absolute text-gray-500",[a.value,c.value]])},M(m.placeholder),3)),[[it,!m.modelValue]]):V("",!0),v("select",ge({class:f.value,disabled:m.disabled,id:m.id,value:m.modelValue,onChange:s},h(i)),[(d(!0),g(be,null,Se(l.value,C=>(d(),g("option",{key:C.value,value:C.value,disabled:C.disabled||!1,selected:m.modelValue===C.value},M(C.label),9,Zs))),128))],16,Gs)]))}}),to={class:"space-y-1.5"},no=["for"],ro=["placeholder","disabled","id","value","rows"],io=Me({__name:"Textarea",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{},rows:{default:3},label:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const r=e,i=n,s=ht(),l=N(null),o=B(()=>{let w={sm:"text-base rounded",md:"text-base rounded",lg:"text-lg rounded-md",xl:"text-xl rounded-md"}[r.size],m={sm:["py-1.5 px-2"],md:["py-1.5 px-2.5"],lg:["py-1.5 px-3"],xl:["py-1.5 px-3"]}[r.size],p=r.disabled?"disabled":r.variant,C={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",r.variant==="outline"?"border-gray-300":"border-transparent"]}[p];return[w,m,C,r.disabled?"text-gray-600":"text-gray-800","transition-colors w-full block"]}),a=B(()=>[{sm:"text-xs",md:"text-base",lg:"text-lg",xl:"text-xl"}[r.size],"text-gray-600"]);let c=w=>{i("update:modelValue",w)};r.debounce&&(c=pr(c,r.debounce));let f=w=>{c(w.target.value)};return t({el:l}),(w,m)=>(d(),g("div",to,[w.label?(d(),g("label",{key:0,class:re(["block",a.value]),for:w.id},M(w.label),11,no)):V("",!0),v("textarea",ge({ref_key:"textareaRef",ref:l,placeholder:w.placeholder,class:o.value,disabled:w.disabled,id:w.id,value:w.modelValue,rows:w.rows,onInput:m[0]||(m[0]=(...p)=>h(f)&&h(f)(...p)),onChange:m[1]||(m[1]=(...p)=>h(f)&&h(f)(...p))},h(s)),null,16,ro)]))}}),so=["for"],oo={key:0,class:"text-red-500"},ao={inheritAttrs:!1},yn=Me(Ze(ue({},ao),{__name:"FormControl",props:{label:{},description:{},type:{default:"text"},size:{default:"sm"},required:{type:Boolean}},setup(e){const t=vs(),n=e,r=ht(),i=B(()=>{let o={};for(let a in r)a!=="class"&&a!=="style"&&(o[a]=r[a]);return o}),s=B(()=>[{sm:"text-xs",md:"text-base"}[n.size],"text-gray-600"]),l=B(()=>[{sm:"text-xs",md:"text-base"}[n.size],"text-gray-600"]);return(o,a)=>o.type!="checkbox"?(d(),g("div",{key:0,class:re(["space-y-1.5",h(r).class])},[o.label?(d(),g("label",{key:0,class:re(["block",s.value]),for:h(t)},[nt(M(o.label)+" ",1),o.required?(d(),g("span",oo,"*")):V("",!0)],10,so)):V("",!0),o.type==="select"?(d(),P(eo,ge({key:1,id:h(t)},Ze(ue({},i.value),{size:o.size})),hn({_:2},[o.$slots.prefix?{name:"prefix",fn:F(()=>[Z(o.$slots,"prefix")]),key:"0"}:void 0]),1040,["id"])):o.type==="autocomplete"?(d(),P(Ns,Ve(ge({key:2},ue({},i.value))),hn({_:2},[o.$slots.prefix?{name:"prefix",fn:F(()=>[Z(o.$slots,"prefix")]),key:"0"}:void 0,o.$slots["item-prefix"]?{name:"item-prefix",fn:F(c=>[Z(o.$slots,"item-prefix",Ve(Ue(c)))]),key:"1"}:void 0]),1040)):o.type==="textarea"?(d(),P(io,ge({key:3,id:h(t)},Ze(ue({},i.value),{size:o.size})),null,16,["id"])):(d(),P(Ws,ge({key:4,id:h(t)},Ze(ue({},i.value),{type:o.type,size:o.size})),hn({_:2},[o.$slots.prefix?{name:"prefix",fn:F(()=>[Z(o.$slots,"prefix")]),key:"0"}:void 0,o.$slots.suffix?{name:"suffix",fn:F(()=>[Z(o.$slots,"suffix")]),key:"1"}:void 0]),1040,["id"])),Z(o.$slots,"description",{},()=>[o.description?(d(),g("p",{key:0,class:re(l.value)},M(o.description),3)):V("",!0)])],2)):(d(),P(ms,ge({key:1,id:h(t)},Ze(ue({},i.value),{label:o.label,size:o.size,class:h(r).class})),null,16,["id"]))}}));var ye="top",Te="bottom",He="right",we="left",Sn="auto",Lt=[ye,Te,He,we],dt="start",$t="end",lo="clippingParents",Er="viewport",xt="popper",uo="reference",qn=Lt.reduce(function(e,t){return e.concat([t+"-"+dt,t+"-"+$t])},[]),Lr=[].concat(Lt,[Sn]).reduce(function(e,t){return e.concat([t,t+"-"+dt,t+"-"+$t])},[]),co="beforeRead",po="read",fo="afterRead",ho="beforeMain",mo="main",vo="afterMain",go="beforeWrite",bo="write",yo="afterWrite",wo=[co,po,fo,ho,mo,vo,go,bo,yo];function Fe(e){return e?(e.nodeName||"").toLowerCase():null}function xe(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function st(e){var t=xe(e).Element;return e instanceof t||e instanceof Element}function $e(e){var t=xe(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function $n(e){if(typeof ShadowRoot=="undefined")return!1;var t=xe(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function xo(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},s=t.elements[n];!$e(s)||!Fe(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(l){var o=i[l];o===!1?s.removeAttribute(l):s.setAttribute(l,o===!0?"":o)}))})}function _o(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],s=t.attributes[r]||{},l=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),o=l.reduce(function(a,c){return a[c]="",a},{});!$e(i)||!Fe(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(a){i.removeAttribute(a)}))})}}const Rr={name:"applyStyles",enabled:!0,phase:"write",fn:xo,effect:_o,requires:["computeStyles"]};function Pe(e){return e.split("-")[0]}var rt=Math.max,sn=Math.min,ct=Math.round;function wn(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Dr(){return!/^((?!chrome|android).)*safari/i.test(wn())}function pt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&$e(e)&&(i=e.offsetWidth>0&&ct(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&ct(r.height)/e.offsetHeight||1);var l=st(e)?xe(e):window,o=l.visualViewport,a=!Dr()&&n,c=(r.left+(a&&o?o.offsetLeft:0))/i,f=(r.top+(a&&o?o.offsetTop:0))/s,w=r.width/i,m=r.height/s;return{width:w,height:m,top:f,right:c+w,bottom:f+m,left:c,x:c,y:f}}function Tn(e){var t=pt(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function zr(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&$n(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ke(e){return xe(e).getComputedStyle(e)}function ko(e){return["table","td","th"].indexOf(Fe(e))>=0}function Xe(e){return((st(e)?e.ownerDocument:e.document)||window.document).documentElement}function un(e){return Fe(e)==="html"?e:e.assignedSlot||e.parentNode||($n(e)?e.host:null)||Xe(e)}function Nn(e){return!$e(e)||Ke(e).position==="fixed"?null:e.offsetParent}function Co(e){var t=/firefox/i.test(wn()),n=/Trident/i.test(wn());if(n&&$e(e)){var r=Ke(e);if(r.position==="fixed")return null}var i=un(e);for($n(i)&&(i=i.host);$e(i)&&["html","body"].indexOf(Fe(i))<0;){var s=Ke(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Rt(e){for(var t=xe(e),n=Nn(e);n&&ko(n)&&Ke(n).position==="static";)n=Nn(n);return n&&(Fe(n)==="html"||Fe(n)==="body"&&Ke(n).position==="static")?t:n||Co(e)||t}function Hn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ct(e,t,n){return rt(e,sn(t,n))}function Ao(e,t,n){var r=Ct(e,t,n);return r>n?n:r}function Br(){return{top:0,right:0,bottom:0,left:0}}function Ir(e){return Object.assign({},Br(),e)}function Vr(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Oo=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Ir(typeof t!="number"?t:Vr(t,Lt))};function So(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,l=n.modifiersData.popperOffsets,o=Pe(n.placement),a=Hn(o),c=[we,He].indexOf(o)>=0,f=c?"height":"width";if(!(!s||!l)){var w=Oo(i.padding,n),m=Tn(s),p=a==="y"?ye:we,C=a==="y"?Te:He,T=n.rects.reference[f]+n.rects.reference[a]-l[a]-n.rects.popper[f],A=l[a]-n.rects.reference[a],x=Rt(s),O=x?a==="y"?x.clientHeight||0:x.clientWidth||0:0,$=T/2-A/2,u=w[p],S=O-m[f]-w[C],y=O/2-m[f]/2+$,I=Ct(u,y,S),U=a;n.modifiersData[r]=(t={},t[U]=I,t.centerOffset=I-y,t)}}function $o(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||zr(t.elements.popper,i)&&(t.elements.arrow=i))}const To={name:"arrow",enabled:!0,phase:"main",fn:So,effect:$o,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ft(e){return e.split("-")[1]}var Ho={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Mo(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:ct(n*i)/i||0,y:ct(r*i)/i||0}}function jn(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,l=e.offsets,o=e.position,a=e.gpuAcceleration,c=e.adaptive,f=e.roundOffsets,w=e.isFixed,m=l.x,p=m===void 0?0:m,C=l.y,T=C===void 0?0:C,A=typeof f=="function"?f({x:p,y:T}):{x:p,y:T};p=A.x,T=A.y;var x=l.hasOwnProperty("x"),O=l.hasOwnProperty("y"),$=we,u=ye,S=window;if(c){var y=Rt(n),I="clientHeight",U="clientWidth";if(y===xe(n)&&(y=Xe(n),Ke(y).position!=="static"&&o==="absolute"&&(I="scrollHeight",U="scrollWidth")),y=y,i===ye||(i===we||i===He)&&s===$t){u=Te;var E=w&&y===S&&S.visualViewport?S.visualViewport.height:y[I];T-=E-r.height,T*=a?1:-1}if(i===we||(i===ye||i===Te)&&s===$t){$=He;var D=w&&y===S&&S.visualViewport?S.visualViewport.width:y[U];p-=D-r.width,p*=a?1:-1}}var _=Object.assign({position:o},c&&Ho),k=f===!0?Mo({x:p,y:T},xe(n)):{x:p,y:T};if(p=k.x,T=k.y,a){var H;return Object.assign({},_,(H={},H[u]=O?"0":"",H[$]=x?"0":"",H.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+T+"px)":"translate3d("+p+"px, "+T+"px, 0)",H))}return Object.assign({},_,(t={},t[u]=O?T+"px":"",t[$]=x?p+"px":"",t.transform="",t))}function Eo(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,l=s===void 0?!0:s,o=n.roundOffsets,a=o===void 0?!0:o,c={placement:Pe(t.placement),variation:ft(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jn(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:a})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jn(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Lo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Eo,data:{}};var Xt={passive:!0};function Ro(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=i===void 0?!0:i,l=r.resize,o=l===void 0?!0:l,a=xe(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(f){f.addEventListener("scroll",n.update,Xt)}),o&&a.addEventListener("resize",n.update,Xt),function(){s&&c.forEach(function(f){f.removeEventListener("scroll",n.update,Xt)}),o&&a.removeEventListener("resize",n.update,Xt)}}const Do={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ro,data:{}};var zo={left:"right",right:"left",bottom:"top",top:"bottom"};function Zt(e){return e.replace(/left|right|bottom|top/g,function(t){return zo[t]})}var Bo={start:"end",end:"start"};function Un(e){return e.replace(/start|end/g,function(t){return Bo[t]})}function Mn(e){var t=xe(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function En(e){return pt(Xe(e)).left+Mn(e).scrollLeft}function Io(e,t){var n=xe(e),r=Xe(e),i=n.visualViewport,s=r.clientWidth,l=r.clientHeight,o=0,a=0;if(i){s=i.width,l=i.height;var c=Dr();(c||!c&&t==="fixed")&&(o=i.offsetLeft,a=i.offsetTop)}return{width:s,height:l,x:o+En(e),y:a}}function Vo(e){var t,n=Xe(e),r=Mn(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=rt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=rt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+En(e),a=-r.scrollTop;return Ke(i||n).direction==="rtl"&&(o+=rt(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:l,x:o,y:a}}function Ln(e){var t=Ke(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Pr(e){return["html","body","#document"].indexOf(Fe(e))>=0?e.ownerDocument.body:$e(e)&&Ln(e)?e:Pr(un(e))}function At(e,t){var n;t===void 0&&(t=[]);var r=Pr(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=xe(r),l=i?[s].concat(s.visualViewport||[],Ln(r)?r:[]):r,o=t.concat(l);return i?o:o.concat(At(un(l)))}function xn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Po(e,t){var n=pt(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Wn(e,t,n){return t===Er?xn(Io(e,n)):st(t)?Po(t,n):xn(Vo(Xe(e)))}function Fo(e){var t=At(un(e)),n=["absolute","fixed"].indexOf(Ke(e).position)>=0,r=n&&$e(e)?Rt(e):e;return st(r)?t.filter(function(i){return st(i)&&zr(i,r)&&Fe(i)!=="body"}):[]}function qo(e,t,n,r){var i=t==="clippingParents"?Fo(e):[].concat(t),s=[].concat(i,[n]),l=s[0],o=s.reduce(function(a,c){var f=Wn(e,c,r);return a.top=rt(f.top,a.top),a.right=sn(f.right,a.right),a.bottom=sn(f.bottom,a.bottom),a.left=rt(f.left,a.left),a},Wn(e,l,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Fr(e){var t=e.reference,n=e.element,r=e.placement,i=r?Pe(r):null,s=r?ft(r):null,l=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,a;switch(i){case ye:a={x:l,y:t.y-n.height};break;case Te:a={x:l,y:t.y+t.height};break;case He:a={x:t.x+t.width,y:o};break;case we:a={x:t.x-n.width,y:o};break;default:a={x:t.x,y:t.y}}var c=i?Hn(i):null;if(c!=null){var f=c==="y"?"height":"width";switch(s){case dt:a[c]=a[c]-(t[f]/2-n[f]/2);break;case $t:a[c]=a[c]+(t[f]/2-n[f]/2);break}}return a}function Tt(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,s=n.strategy,l=s===void 0?e.strategy:s,o=n.boundary,a=o===void 0?lo:o,c=n.rootBoundary,f=c===void 0?Er:c,w=n.elementContext,m=w===void 0?xt:w,p=n.altBoundary,C=p===void 0?!1:p,T=n.padding,A=T===void 0?0:T,x=Ir(typeof A!="number"?A:Vr(A,Lt)),O=m===xt?uo:xt,$=e.rects.popper,u=e.elements[C?O:m],S=qo(st(u)?u:u.contextElement||Xe(e.elements.popper),a,f,l),y=pt(e.elements.reference),I=Fr({reference:y,element:$,strategy:"absolute",placement:i}),U=xn(Object.assign({},$,I)),E=m===xt?U:y,D={top:S.top-E.top+x.top,bottom:E.bottom-S.bottom+x.bottom,left:S.left-E.left+x.left,right:E.right-S.right+x.right},_=e.modifiersData.offset;if(m===xt&&_){var k=_[i];Object.keys(D).forEach(function(H){var j=[He,Te].indexOf(H)>=0?1:-1,G=[ye,Te].indexOf(H)>=0?"y":"x";D[H]+=k[G]*j})}return D}function No(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,l=n.padding,o=n.flipVariations,a=n.allowedAutoPlacements,c=a===void 0?Lr:a,f=ft(r),w=f?o?qn:qn.filter(function(C){return ft(C)===f}):Lt,m=w.filter(function(C){return c.indexOf(C)>=0});m.length===0&&(m=w);var p=m.reduce(function(C,T){return C[T]=Tt(e,{placement:T,boundary:i,rootBoundary:s,padding:l})[Pe(T)],C},{});return Object.keys(p).sort(function(C,T){return p[C]-p[T]})}function jo(e){if(Pe(e)===Sn)return[];var t=Zt(e);return[Un(e),t,Un(t)]}function Uo(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,l=n.altAxis,o=l===void 0?!0:l,a=n.fallbackPlacements,c=n.padding,f=n.boundary,w=n.rootBoundary,m=n.altBoundary,p=n.flipVariations,C=p===void 0?!0:p,T=n.allowedAutoPlacements,A=t.options.placement,x=Pe(A),O=x===A,$=a||(O||!C?[Zt(A)]:jo(A)),u=[A].concat($).reduce(function(he,me){return he.concat(Pe(me)===Sn?No(t,{placement:me,boundary:f,rootBoundary:w,padding:c,flipVariations:C,allowedAutoPlacements:T}):me)},[]),S=t.rects.reference,y=t.rects.popper,I=new Map,U=!0,E=u[0],D=0;D<u.length;D++){var _=u[D],k=Pe(_),H=ft(_)===dt,j=[ye,Te].indexOf(k)>=0,G=j?"width":"height",ee=Tt(t,{placement:_,boundary:f,rootBoundary:w,altBoundary:m,padding:c}),ie=j?H?He:we:H?Te:ye;S[G]>y[G]&&(ie=Zt(ie));var te=Zt(ie),L=[];if(s&&L.push(ee[k]<=0),o&&L.push(ee[ie]<=0,ee[te]<=0),L.every(function(he){return he})){E=_,U=!1;break}I.set(_,L)}if(U)for(var R=C?3:1,X=function(me){var _e=u.find(function(ze){var Ee=I.get(ze);if(Ee)return Ee.slice(0,me).every(function(se){return se})});if(_e)return E=_e,"break"},W=R;W>0;W--){var oe=X(W);if(oe==="break")break}t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}}const Wo={name:"flip",enabled:!0,phase:"main",fn:Uo,requiresIfExists:["offset"],data:{_skip:!1}};function Kn(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Jn(e){return[ye,He,Te,we].some(function(t){return e[t]>=0})}function Ko(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,l=Tt(t,{elementContext:"reference"}),o=Tt(t,{altBoundary:!0}),a=Kn(l,r),c=Kn(o,i,s),f=Jn(a),w=Jn(c);t.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:f,hasPopperEscaped:w},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":w})}const Jo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ko};function Qo(e,t,n){var r=Pe(e),i=[we,ye].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,l=s[0],o=s[1];return l=l||0,o=(o||0)*i,[we,He].indexOf(r)>=0?{x:o,y:l}:{x:l,y:o}}function Xo(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=i===void 0?[0,0]:i,l=Lr.reduce(function(f,w){return f[w]=Qo(w,t.rects,s),f},{}),o=l[t.placement],a=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=a,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=l}const Yo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Xo};function Go(e){var t=e.state,n=e.name;t.modifiersData[n]=Fr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Zo={name:"popperOffsets",enabled:!0,phase:"read",fn:Go,data:{}};function ea(e){return e==="x"?"y":"x"}function ta(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=i===void 0?!0:i,l=n.altAxis,o=l===void 0?!1:l,a=n.boundary,c=n.rootBoundary,f=n.altBoundary,w=n.padding,m=n.tether,p=m===void 0?!0:m,C=n.tetherOffset,T=C===void 0?0:C,A=Tt(t,{boundary:a,rootBoundary:c,padding:w,altBoundary:f}),x=Pe(t.placement),O=ft(t.placement),$=!O,u=Hn(x),S=ea(u),y=t.modifiersData.popperOffsets,I=t.rects.reference,U=t.rects.popper,E=typeof T=="function"?T(Object.assign({},t.rects,{placement:t.placement})):T,D=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),_=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,k={x:0,y:0};if(y){if(s){var H,j=u==="y"?ye:we,G=u==="y"?Te:He,ee=u==="y"?"height":"width",ie=y[u],te=ie+A[j],L=ie-A[G],R=p?-U[ee]/2:0,X=O===dt?I[ee]:U[ee],W=O===dt?-U[ee]:-I[ee],oe=t.elements.arrow,he=p&&oe?Tn(oe):{width:0,height:0},me=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Br(),_e=me[j],ze=me[G],Ee=Ct(0,I[ee],he[ee]),se=$?I[ee]/2-R-Ee-_e-D.mainAxis:X-Ee-_e-D.mainAxis,ve=$?-I[ee]/2+R+Ee+ze+D.mainAxis:W+Ee+ze+D.mainAxis,Je=t.elements.arrow&&Rt(t.elements.arrow),Dt=Je?u==="y"?Je.clientTop||0:Je.clientLeft||0:0,mt=(H=_==null?void 0:_[u])!=null?H:0,zt=ie+se-mt-Dt,Bt=ie+ve-mt,vt=Ct(p?sn(te,zt):te,ie,p?rt(L,Bt):L);y[u]=vt,k[u]=vt-ie}if(o){var gt,It=u==="x"?ye:we,Vt=u==="x"?Te:He,Ne=y[S],Qe=S==="y"?"height":"width",bt=Ne+A[It],Ye=Ne-A[Vt],yt=[ye,we].indexOf(x)!==-1,Pt=(gt=_==null?void 0:_[S])!=null?gt:0,Ft=yt?bt:Ne-I[Qe]-U[Qe]-Pt+D.altAxis,qt=yt?Ne+I[Qe]+U[Qe]-Pt-D.altAxis:Ye,Nt=p&&yt?Ao(Ft,Ne,qt):Ct(p?Ft:bt,Ne,p?qt:Ye);y[S]=Nt,k[S]=Nt-Ne}t.modifiersData[r]=k}}const na={name:"preventOverflow",enabled:!0,phase:"main",fn:ta,requiresIfExists:["offset"]};function ra(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ia(e){return e===xe(e)||!$e(e)?Mn(e):ra(e)}function sa(e){var t=e.getBoundingClientRect(),n=ct(t.width)/e.offsetWidth||1,r=ct(t.height)/e.offsetHeight||1;return n!==1||r!==1}function oa(e,t,n){n===void 0&&(n=!1);var r=$e(t),i=$e(t)&&sa(t),s=Xe(t),l=pt(e,i,n),o={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((Fe(t)!=="body"||Ln(s))&&(o=ia(t)),$e(t)?(a=pt(t,!0),a.x+=t.clientLeft,a.y+=t.clientTop):s&&(a.x=En(s))),{x:l.left+o.scrollLeft-a.x,y:l.top+o.scrollTop-a.y,width:l.width,height:l.height}}function aa(e){var t=new Map,n=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function i(s){n.add(s.name);var l=[].concat(s.requires||[],s.requiresIfExists||[]);l.forEach(function(o){if(!n.has(o)){var a=t.get(o);a&&i(a)}}),r.push(s)}return e.forEach(function(s){n.has(s.name)||i(s)}),r}function la(e){var t=aa(e);return wo.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function ua(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function da(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Qn={placement:"bottom",modifiers:[],strategy:"absolute"};function Xn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ca(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,s=i===void 0?Qn:i;return function(o,a,c){c===void 0&&(c=s);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qn,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},w=[],m=!1,p={state:f,setOptions:function(x){var O=typeof x=="function"?x(f.options):x;T(),f.options=Object.assign({},s,f.options,O),f.scrollParents={reference:st(o)?At(o):o.contextElement?At(o.contextElement):[],popper:At(a)};var $=la(da([].concat(r,f.options.modifiers)));return f.orderedModifiers=$.filter(function(u){return u.enabled}),C(),p.update()},forceUpdate:function(){if(!m){var x=f.elements,O=x.reference,$=x.popper;if(Xn(O,$)){f.rects={reference:oa(O,Rt($),f.options.strategy==="fixed"),popper:Tn($)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(D){return f.modifiersData[D.name]=Object.assign({},D.data)});for(var u=0;u<f.orderedModifiers.length;u++){if(f.reset===!0){f.reset=!1,u=-1;continue}var S=f.orderedModifiers[u],y=S.fn,I=S.options,U=I===void 0?{}:I,E=S.name;typeof y=="function"&&(f=y({state:f,options:U,name:E,instance:p})||f)}}}},update:ua(function(){return new Promise(function(A){p.forceUpdate(),A(f)})}),destroy:function(){T(),m=!0}};if(!Xn(o,a))return p;p.setOptions(c).then(function(A){!m&&c.onFirstUpdate&&c.onFirstUpdate(A)});function C(){f.orderedModifiers.forEach(function(A){var x=A.name,O=A.options,$=O===void 0?{}:O,u=A.effect;if(typeof u=="function"){var S=u({state:f,name:x,instance:p,options:$}),y=function(){};w.push(S||y)}})}function T(){w.forEach(function(A){return A()}),w=[]}return p}}var pa=[Do,Zo,Lo,Rr,Yo,Wo,na,To,Jo],fa=ca({defaultModifiers:pa}),ha="tippy-box",qr="tippy-content",ma="tippy-backdrop",Nr="tippy-arrow",jr="tippy-svg-arrow",tt={passive:!0,capture:!0},Ur=function(){return document.body};function mn(e,t,n){if(Array.isArray(e)){var r=e[t];return r==null?Array.isArray(n)?n[t]:n:r}return e}function Rn(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function Wr(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Yn(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function va(e){return e.split(/\s+/).filter(Boolean)}function ut(e){return[].concat(e)}function Gn(e,t){e.indexOf(t)===-1&&e.push(t)}function ga(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function ba(e){return e.split("-")[0]}function on(e){return[].slice.call(e)}function Zn(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function Ot(){return document.createElement("div")}function dn(e){return["Element","Fragment"].some(function(t){return Rn(e,t)})}function ya(e){return Rn(e,"NodeList")}function wa(e){return Rn(e,"MouseEvent")}function xa(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function _a(e){return dn(e)?[e]:ya(e)?on(e):Array.isArray(e)?e:on(document.querySelectorAll(e))}function vn(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function er(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function ka(e){var t,n=ut(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function Ca(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var s=i.popperRect,l=i.popperState,o=i.props,a=o.interactiveBorder,c=ba(l.placement),f=l.modifiersData.offset;if(!f)return!0;var w=c==="bottom"?f.top.y:0,m=c==="top"?f.bottom.y:0,p=c==="right"?f.left.x:0,C=c==="left"?f.right.x:0,T=s.top-r+w>a,A=r-s.bottom-m>a,x=s.left-n+p>a,O=n-s.right-C>a;return T||A||x||O})}function gn(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function tr(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Be={isTouch:!1},nr=0;function Aa(){Be.isTouch||(Be.isTouch=!0,window.performance&&document.addEventListener("mousemove",Kr))}function Kr(){var e=performance.now();e-nr<20&&(Be.isTouch=!1,document.removeEventListener("mousemove",Kr)),nr=e}function Oa(){var e=document.activeElement;if(xa(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Sa(){document.addEventListener("touchstart",Aa,tt),window.addEventListener("blur",Oa)}var $a=typeof window!="undefined"&&typeof document!="undefined",Ta=$a?!!window.msCrypto:!1,Ha={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ma={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Re=Object.assign({appendTo:Ur,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ha,Ma),Ea=Object.keys(Re),La=function(t){var n=Object.keys(t);n.forEach(function(r){Re[r]=t[r]})};function Jr(e){var t=e.plugins||[],n=t.reduce(function(r,i){var s=i.name,l=i.defaultValue;if(s){var o;r[s]=e[s]!==void 0?e[s]:(o=Re[s])!=null?o:l}return r},{});return Object.assign({},e,n)}function Ra(e,t){var n=t?Object.keys(Jr(Object.assign({},Re,{plugins:t}))):Ea,r=n.reduce(function(i,s){var l=(e.getAttribute("data-tippy-"+s)||"").trim();if(!l)return i;if(s==="content")i[s]=l;else try{i[s]=JSON.parse(l)}catch(o){i[s]=l}return i},{});return r}function rr(e,t){var n=Object.assign({},t,{content:Wr(t.content,[e])},t.ignoreAttributes?{}:Ra(e,t.plugins));return n.aria=Object.assign({},Re.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var Da=function(){return"innerHTML"};function _n(e,t){e[Da()]=t}function ir(e){var t=Ot();return e===!0?t.className=Nr:(t.className=jr,dn(e)?t.appendChild(e):_n(t,e)),t}function sr(e,t){dn(t.content)?(_n(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?_n(e,t.content):e.textContent=t.content)}function kn(e){var t=e.firstElementChild,n=on(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(qr)}),arrow:n.find(function(r){return r.classList.contains(Nr)||r.classList.contains(jr)}),backdrop:n.find(function(r){return r.classList.contains(ma)})}}function Qr(e){var t=Ot(),n=Ot();n.className=ha,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Ot();r.className=qr,r.setAttribute("data-state","hidden"),sr(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(s,l){var o=kn(t),a=o.box,c=o.content,f=o.arrow;l.theme?a.setAttribute("data-theme",l.theme):a.removeAttribute("data-theme"),typeof l.animation=="string"?a.setAttribute("data-animation",l.animation):a.removeAttribute("data-animation"),l.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?a.setAttribute("role",l.role):a.removeAttribute("role"),(s.content!==l.content||s.allowHTML!==l.allowHTML)&&sr(c,e.props),l.arrow?f?s.arrow!==l.arrow&&(a.removeChild(f),a.appendChild(ir(l.arrow))):a.appendChild(ir(l.arrow)):f&&a.removeChild(f)}return{popper:t,onUpdate:i}}Qr.$$tippy=!0;var za=1,Yt=[],bn=[];function Ba(e,t){var n=rr(e,Object.assign({},Re,Jr(Zn(t)))),r,i,s,l=!1,o=!1,a=!1,c=!1,f,w,m,p=[],C=Yn(zt,n.interactiveDebounce),T,A=za++,x=null,O=ga(n.plugins),$={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},u={id:A,reference:e,popper:Ot(),popperInstance:x,props:n,state:$,plugins:O,clearDelayTimeouts:Ft,setProps:qt,setContent:Nt,show:oi,hide:ai,hideWithInteractivity:li,enable:yt,disable:Pt,unmount:ui,destroy:di};if(!n.render)return u;var S=n.render(u),y=S.popper,I=S.onUpdate;y.setAttribute("data-tippy-root",""),y.id="tippy-"+u.id,u.popper=y,e._tippy=u,y._tippy=u;var U=O.map(function(b){return b.fn(u)}),E=e.hasAttribute("aria-expanded");return Je(),R(),ie(),te("onCreate",[u]),n.showOnCreate&&bt(),y.addEventListener("mouseenter",function(){u.props.interactive&&u.state.isVisible&&u.clearDelayTimeouts()}),y.addEventListener("mouseleave",function(){u.props.interactive&&u.props.trigger.indexOf("mouseenter")>=0&&j().addEventListener("mousemove",C)}),u;function D(){var b=u.props.touch;return Array.isArray(b)?b:[b,0]}function _(){return D()[0]==="hold"}function k(){var b;return!!((b=u.props.render)!=null&&b.$$tippy)}function H(){return T||e}function j(){var b=H().parentNode;return b?ka(b):document}function G(){return kn(y)}function ee(b){return u.state.isMounted&&!u.state.isVisible||Be.isTouch||f&&f.type==="focus"?0:mn(u.props.delay,b?0:1,Re.delay)}function ie(b){b===void 0&&(b=!1),y.style.pointerEvents=u.props.interactive&&!b?"":"none",y.style.zIndex=""+u.props.zIndex}function te(b,z,q){if(q===void 0&&(q=!0),U.forEach(function(Q){Q[b]&&Q[b].apply(Q,z)}),q){var Y;(Y=u.props)[b].apply(Y,z)}}function L(){var b=u.props.aria;if(b.content){var z="aria-"+b.content,q=y.id,Y=ut(u.props.triggerTarget||e);Y.forEach(function(Q){var fe=Q.getAttribute(z);if(u.state.isVisible)Q.setAttribute(z,fe?fe+" "+q:q);else{var ke=fe&&fe.replace(q,"").trim();ke?Q.setAttribute(z,ke):Q.removeAttribute(z)}})}}function R(){if(!(E||!u.props.aria.expanded)){var b=ut(u.props.triggerTarget||e);b.forEach(function(z){u.props.interactive?z.setAttribute("aria-expanded",u.state.isVisible&&z===H()?"true":"false"):z.removeAttribute("aria-expanded")})}}function X(){j().removeEventListener("mousemove",C),Yt=Yt.filter(function(b){return b!==C})}function W(b){if(!(Be.isTouch&&(a||b.type==="mousedown"))){var z=b.composedPath&&b.composedPath()[0]||b.target;if(!(u.props.interactive&&tr(y,z))){if(ut(u.props.triggerTarget||e).some(function(q){return tr(q,z)})){if(Be.isTouch||u.state.isVisible&&u.props.trigger.indexOf("click")>=0)return}else te("onClickOutside",[u,b]);u.props.hideOnClick===!0&&(u.clearDelayTimeouts(),u.hide(),o=!0,setTimeout(function(){o=!1}),u.state.isMounted||_e())}}}function oe(){a=!0}function he(){a=!1}function me(){var b=j();b.addEventListener("mousedown",W,!0),b.addEventListener("touchend",W,tt),b.addEventListener("touchstart",he,tt),b.addEventListener("touchmove",oe,tt)}function _e(){var b=j();b.removeEventListener("mousedown",W,!0),b.removeEventListener("touchend",W,tt),b.removeEventListener("touchstart",he,tt),b.removeEventListener("touchmove",oe,tt)}function ze(b,z){se(b,function(){!u.state.isVisible&&y.parentNode&&y.parentNode.contains(y)&&z()})}function Ee(b,z){se(b,z)}function se(b,z){var q=G().box;function Y(Q){Q.target===q&&(gn(q,"remove",Y),z())}if(b===0)return z();gn(q,"remove",w),gn(q,"add",Y),w=Y}function ve(b,z,q){q===void 0&&(q=!1);var Y=ut(u.props.triggerTarget||e);Y.forEach(function(Q){Q.addEventListener(b,z,q),p.push({node:Q,eventType:b,handler:z,options:q})})}function Je(){_()&&(ve("touchstart",mt,{passive:!0}),ve("touchend",Bt,{passive:!0})),va(u.props.trigger).forEach(function(b){if(b!=="manual")switch(ve(b,mt),b){case"mouseenter":ve("mouseleave",Bt);break;case"focus":ve(Ta?"focusout":"blur",vt);break;case"focusin":ve("focusout",vt);break}})}function Dt(){p.forEach(function(b){var z=b.node,q=b.eventType,Y=b.handler,Q=b.options;z.removeEventListener(q,Y,Q)}),p=[]}function mt(b){var z,q=!1;if(!(!u.state.isEnabled||gt(b)||o)){var Y=((z=f)==null?void 0:z.type)==="focus";f=b,T=b.currentTarget,R(),!u.state.isVisible&&wa(b)&&Yt.forEach(function(Q){return Q(b)}),b.type==="click"&&(u.props.trigger.indexOf("mouseenter")<0||l)&&u.props.hideOnClick!==!1&&u.state.isVisible?q=!0:bt(b),b.type==="click"&&(l=!q),q&&!Y&&Ye(b)}}function zt(b){var z=b.target,q=H().contains(z)||y.contains(z);if(!(b.type==="mousemove"&&q)){var Y=Qe().concat(y).map(function(Q){var fe,ke=Q._tippy,at=(fe=ke.popperInstance)==null?void 0:fe.state;return at?{popperRect:Q.getBoundingClientRect(),popperState:at,props:n}:null}).filter(Boolean);Ca(Y,b)&&(X(),Ye(b))}}function Bt(b){var z=gt(b)||u.props.trigger.indexOf("click")>=0&&l;if(!z){if(u.props.interactive){u.hideWithInteractivity(b);return}Ye(b)}}function vt(b){u.props.trigger.indexOf("focusin")<0&&b.target!==H()||u.props.interactive&&b.relatedTarget&&y.contains(b.relatedTarget)||Ye(b)}function gt(b){return Be.isTouch?_()!==b.type.indexOf("touch")>=0:!1}function It(){Vt();var b=u.props,z=b.popperOptions,q=b.placement,Y=b.offset,Q=b.getReferenceClientRect,fe=b.moveTransition,ke=k()?kn(y).arrow:null,at=Q?{getBoundingClientRect:Q,contextElement:Q.contextElement||H()}:e,zn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(jt){var lt=jt.state;if(k()){var ci=G(),fn=ci.box;["placement","reference-hidden","escaped"].forEach(function(Ut){Ut==="placement"?fn.setAttribute("data-placement",lt.placement):lt.attributes.popper["data-popper-"+Ut]?fn.setAttribute("data-"+Ut,""):fn.removeAttribute("data-"+Ut)}),lt.attributes.popper={}}}},Ge=[{name:"offset",options:{offset:Y}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!fe}},zn];k()&&ke&&Ge.push({name:"arrow",options:{element:ke,padding:3}}),Ge.push.apply(Ge,(z==null?void 0:z.modifiers)||[]),u.popperInstance=fa(at,y,Object.assign({},z,{placement:q,onFirstUpdate:m,modifiers:Ge}))}function Vt(){u.popperInstance&&(u.popperInstance.destroy(),u.popperInstance=null)}function Ne(){var b=u.props.appendTo,z,q=H();u.props.interactive&&b===Ur||b==="parent"?z=q.parentNode:z=Wr(b,[q]),z.contains(y)||z.appendChild(y),u.state.isMounted=!0,It()}function Qe(){return on(y.querySelectorAll("[data-tippy-root]"))}function bt(b){u.clearDelayTimeouts(),b&&te("onTrigger",[u,b]),me();var z=ee(!0),q=D(),Y=q[0],Q=q[1];Be.isTouch&&Y==="hold"&&Q&&(z=Q),z?r=setTimeout(function(){u.show()},z):u.show()}function Ye(b){if(u.clearDelayTimeouts(),te("onUntrigger",[u,b]),!u.state.isVisible){_e();return}if(!(u.props.trigger.indexOf("mouseenter")>=0&&u.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(b.type)>=0&&l)){var z=ee(!1);z?i=setTimeout(function(){u.state.isVisible&&u.hide()},z):s=requestAnimationFrame(function(){u.hide()})}}function yt(){u.state.isEnabled=!0}function Pt(){u.hide(),u.state.isEnabled=!1}function Ft(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function qt(b){if(!u.state.isDestroyed){te("onBeforeUpdate",[u,b]),Dt();var z=u.props,q=rr(e,Object.assign({},z,Zn(b),{ignoreAttributes:!0}));u.props=q,Je(),z.interactiveDebounce!==q.interactiveDebounce&&(X(),C=Yn(zt,q.interactiveDebounce)),z.triggerTarget&&!q.triggerTarget?ut(z.triggerTarget).forEach(function(Y){Y.removeAttribute("aria-expanded")}):q.triggerTarget&&e.removeAttribute("aria-expanded"),R(),ie(),I&&I(z,q),u.popperInstance&&(It(),Qe().forEach(function(Y){requestAnimationFrame(Y._tippy.popperInstance.forceUpdate)})),te("onAfterUpdate",[u,b])}}function Nt(b){u.setProps({content:b})}function oi(){var b=u.state.isVisible,z=u.state.isDestroyed,q=!u.state.isEnabled,Y=Be.isTouch&&!u.props.touch,Q=mn(u.props.duration,0,Re.duration);if(!(b||z||q||Y)&&!H().hasAttribute("disabled")&&(te("onShow",[u],!1),u.props.onShow(u)!==!1)){if(u.state.isVisible=!0,k()&&(y.style.visibility="visible"),ie(),me(),u.state.isMounted||(y.style.transition="none"),k()){var fe=G(),ke=fe.box,at=fe.content;vn([ke,at],0)}m=function(){var Ge;if(!(!u.state.isVisible||c)){if(c=!0,y.offsetHeight,y.style.transition=u.props.moveTransition,k()&&u.props.animation){var pn=G(),jt=pn.box,lt=pn.content;vn([jt,lt],Q),er([jt,lt],"visible")}L(),R(),Gn(bn,u),(Ge=u.popperInstance)==null||Ge.forceUpdate(),te("onMount",[u]),u.props.animation&&k()&&Ee(Q,function(){u.state.isShown=!0,te("onShown",[u])})}},Ne()}}function ai(){var b=!u.state.isVisible,z=u.state.isDestroyed,q=!u.state.isEnabled,Y=mn(u.props.duration,1,Re.duration);if(!(b||z||q)&&(te("onHide",[u],!1),u.props.onHide(u)!==!1)){if(u.state.isVisible=!1,u.state.isShown=!1,c=!1,l=!1,k()&&(y.style.visibility="hidden"),X(),_e(),ie(!0),k()){var Q=G(),fe=Q.box,ke=Q.content;u.props.animation&&(vn([fe,ke],Y),er([fe,ke],"hidden"))}L(),R(),u.props.animation?k()&&ze(Y,u.unmount):u.unmount()}}function li(b){j().addEventListener("mousemove",C),Gn(Yt,C),C(b)}function ui(){u.state.isVisible&&u.hide(),u.state.isMounted&&(Vt(),Qe().forEach(function(b){b._tippy.unmount()}),y.parentNode&&y.parentNode.removeChild(y),bn=bn.filter(function(b){return b!==u}),u.state.isMounted=!1,te("onHidden",[u]))}function di(){u.state.isDestroyed||(u.clearDelayTimeouts(),u.unmount(),Dt(),delete e._tippy,u.state.isDestroyed=!0,te("onDestroy",[u]))}}function ot(e,t){t===void 0&&(t={});var n=Re.plugins.concat(t.plugins||[]);Sa();var r=Object.assign({},t,{plugins:n}),i=_a(e),s=i.reduce(function(l,o){var a=o&&Ba(o,r);return a&&l.push(a),l},[]);return dn(e)?s[0]:s}ot.defaultProps=Re;ot.setDefaultProps=La;ot.currentInput=Be;Object.assign({},Rr,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});ot.setDefaultProps({render:Qr});class Ia{constructor({editor:t,element:n,view:r,tippyOptions:i={},updateDelay:s=250,shouldShow:l}){this.preventHide=!1,this.shouldShow=({view:o,state:a,from:c,to:f})=>{const{doc:w,selection:m}=a,{empty:p}=m,C=!w.textBetween(c,f).length&&Ei(a.selection),T=this.element.contains(document.activeElement);return!(!(o.hasFocus()||T)||p||C||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var a;if(this.preventHide){this.preventHide=!1;return}o!=null&&o.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(o.relatedTarget))||this.hide()},this.tippyBlurHandler=o=>{this.blurHandler({event:o})},this.handleDebouncedUpdate=(o,a)=>{const c=!(a!=null&&a.selection.eq(o.state.selection)),f=!(a!=null&&a.doc.eq(o.state.doc));!c&&!f||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(o,c,f,a)},this.updateDelay))},this.updateHandler=(o,a,c,f)=>{var w,m,p;const{state:C,composing:T}=o,{selection:A}=C;if(T||!a&&!c)return;this.createTooltip();const{ranges:O}=A,$=Math.min(...O.map(y=>y.$from.pos)),u=Math.max(...O.map(y=>y.$to.pos));if(!((w=this.shouldShow)===null||w===void 0?void 0:w.call(this,{editor:this.editor,view:o,state:C,oldState:f,from:$,to:u}))){this.hide();return}(m=this.tippy)===null||m===void 0||m.setProps({getReferenceClientRect:((p=this.tippyOptions)===null||p===void 0?void 0:p.getReferenceClientRect)||(()=>{if(Li(C.selection)){let y=o.nodeDOM($);const I=y.dataset.nodeViewWrapper?y:y.querySelector("[data-node-view-wrapper]");if(I&&(y=I.firstChild),y)return y.getBoundingClientRect()}return vr(o,$,u)})}),this.show()},this.editor=t,this.element=n,this.view=r,this.updateDelay=s,l&&(this.shouldShow=l),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=ot(t,ue({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,n){const{state:r}=t,i=r.selection.$from.pos!==r.selection.$to.pos;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(t,n);return}const s=!(n!=null&&n.selection.eq(t.state.selection)),l=!(n!=null&&n.doc.eq(t.state.doc));this.updateHandler(t,s,l,n)}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,n;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Xr=e=>new fr({key:typeof e.pluginKey=="string"?new hr(e.pluginKey):e.pluginKey,view:t=>new Ia(ue({view:t},e))});mr.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Xr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class Va{constructor({editor:t,element:n,view:r,tippyOptions:i={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:l,state:o})=>{const{selection:a}=o,{$anchor:c,empty:f}=a,w=c.depth===1,m=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent;return!(!l.hasFocus()||!f||!w||!m||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var o;if(this.preventHide){this.preventHide=!1;return}l!=null&&l.relatedTarget&&(!((o=this.element.parentNode)===null||o===void 0)&&o.contains(l.relatedTarget))||this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.editor=t,this.element=n,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=ot(t,ue({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,n){var r,i,s;const{state:l}=t,{doc:o,selection:a}=l,{from:c,to:f}=a;if(n&&n.doc.eq(o)&&n.selection.eq(a))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:t,state:l,oldState:n}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>vr(t,c,f))}),this.show()}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,n;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Yr=e=>new fr({key:typeof e.pluginKey=="string"?new hr(e.pluginKey):e.pluginKey,view:t=>new Va(ue({view:t},e))});mr.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Yr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const Pa=Me({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=N(null);return qe(()=>{const{updateDelay:r,editor:i,pluginKey:s,shouldShow:l,tippyOptions:o}=e;i.registerPlugin(Xr({updateDelay:r,editor:i,element:n.value,pluginKey:s,shouldShow:l,tippyOptions:o}))}),ln(()=>{const{pluginKey:r,editor:i}=e;i.unregisterPlugin(r)}),()=>{var r;return De("div",{ref:n},(r=t.default)===null||r===void 0?void 0:r.call(t))}}});function or(e){return zi((t,n)=>({get(){return t(),e},set(r){e=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Fa extends Ri{constructor(t={}){return super(t),this.vueRenderers=kt(new Map),this.contentComponent=null,this.reactiveState=or(this.view.state),this.reactiveExtensionStorage=or(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),gr(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,n){super.registerPlugin(t,n),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const qa=Me({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=N(),n=Bi();return nn(()=>{const r=e.editor;r&&r.options.element&&t.value&&Ae(()=>{if(!t.value||!r.options.element.firstChild)return;const i=h(t.value);t.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),ln(()=>{const r=e.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:t}},render(){const e=[];return this.editor&&this.editor.vueRenderers.forEach(t=>{const n=De(Di,{to:t.teleportElement,key:t.id},De(t.component,ue({ref:t.id},t.props)));e.push(n)}),De("div",{ref:t=>{this.rootEl=t}},...e)}}),Na=Me({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=N(null);return qe(()=>{const{pluginKey:r,editor:i,tippyOptions:s,shouldShow:l}=e;i.registerPlugin(Yr({pluginKey:r,editor:i,element:n.value,tippyOptions:s,shouldShow:l}))}),ln(()=>{const{pluginKey:r,editor:i}=e;i.unregisterPlugin(r)}),()=>{var r;return De("div",{ref:n},(r=t.default)===null||r===void 0?void 0:r.call(t))}}});class ja{constructor(t,{props:n={},editor:r}){if(this.id=Math.floor(Math.random()*4294967295).toString(),this.editor=r,this.component=gr(t),this.teleportElement=document.createElement("div"),this.element=this.teleportElement,this.props=kt(n),this.editor.vueRenderers.set(this.id,this),this.editor.contentComponent){if(this.editor.contentComponent.update(),this.teleportElement.children.length!==1)throw Error("VueRenderer doesnt support multiple child elements.");this.element=this.teleportElement.firstElementChild}}get ref(){var t;return(t=this.editor.contentComponent)===null||t===void 0?void 0:t.refs[this.id]}updateProps(t={}){Object.entries(t).forEach(([n,r])=>{this.props[n]=r})}destroy(){this.editor.vueRenderers.delete(this.id)}}const Ua={props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0}},methods:{onKeyDown({event:e}){return e.key==="ArrowUp"?(this.upHandler(),!0):e.key==="ArrowDown"?(this.downHandler(),!0):e.key==="Enter"?(this.enterHandler(),!0):!1},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(){this.selectItem(this.selectedIndex)},selectItem(e){const t=this.items[e];t&&this.command({id:t.value,label:t.label})}}},Wa={key:0,class:"min-w-40 rounded-lg border bg-white p-1 text-base shadow-lg"},Ka=["onClick","onMouseover"];function Ja(e,t,n,r,i,s){return d(),g("div",null,[n.items.length?(d(),g("div",Wa,[(d(!0),g(be,null,Se(n.items,(l,o)=>(d(),g("button",{class:re([o===i.selectedIndex?"bg-gray-100":"text-gray-900","flex w-full items-center whitespace-nowrap rounded-md px-2 py-2 text-sm"]),key:o,onClick:a=>s.selectItem(o),onMouseover:a=>i.selectedIndex=o},M(l.label),43,Ka))),128))])):V("",!0)])}const Qa=J(Ua,[["render",Ja]]);function Xa(e){return Ii.configure({HTMLAttributes:{class:"mention"},suggestion:Ya(e)})}function Ya(e){return{items:({query:t})=>e.filter(n=>n.label.toLowerCase().startsWith(t.toLowerCase())).slice(0,10),render:()=>{let t,n;return{onStart:r=>{t=new ja(Qa,{props:r,editor:r.editor}),r.clientRect&&(n=ot("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(r){t.updateProps(r),r.clientRect&&n[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var i;return r.event.key==="Escape"?(n[0].hide(),!0):(i=t.ref)==null?void 0:i.onKeyDown(r)},onExit(){n[0].destroy(),t.destroy()}}}}}const Ga={name:"TipTapMenu",props:["buttons"],inject:["editor"],components:{Popover:An},methods:{onButtonClick(e){e.action(this.editor)}}},Za={class:"inline-flex bg-white px-1 py-1"},el={class:"inline-flex items-center gap-1"},tl={key:0,class:"h-4 w-[2px] border-l"},nl={key:1,class:"shrink-0"},rl=["onClick","set"],il={key:1},sl={class:"rounded border bg-white p-1 shadow-md"},ol={class:"w-full"},al=["onClick"],ll=["onClick","title"],ul={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function dl(e,t,n,r,i,s){const l=ce("Popover");return d(),g("div",Za,[v("div",el,[(d(!0),g(be,null,Se(n.buttons,o=>(d(),g(be,{key:o.label},[o.type==="separator"?(d(),g("div",tl)):o.map?(d(),g("div",nl,[K(l,null,{target:F(({togglePopover:a})=>[v("button",{class:"rounded px-2 py-1 text-base font-medium text-gray-800 transition-colors hover:bg-gray-100",onClick:a,set:e.activeBtn=o.find(c=>c.isActive(s.editor))||o[0]},[e.activeBtn.icon?(d(),P(Gt(e.activeBtn.icon),{key:0,class:"h-4 w-4"})):(d(),g("span",il,M(e.activeBtn.label),1))],8,rl)]),body:F(({close:a})=>[v("ul",sl,[(d(!0),g(be,null,Se(o,c=>We((d(),g("li",ol,[v("button",{class:"w-full rounded px-2 py-1 text-left text-base hover:bg-gray-50",onClick:()=>{s.onButtonClick(c),a()}},M(c.label),9,al)],512)),[[it,c.isDisabled?!c.isDisabled(s.editor):!0]])),256))])]),_:2},1024)])):(d(),P(Gt(o.component||"div"),ge({key:2,ref_for:!0},{editor:s.editor}),{default:F(a=>[v("button",{class:re(["flex rounded p-1 text-gray-800 transition-colors",o.isActive(s.editor)||a!=null&&a.isActive?"bg-gray-100":"hover:bg-gray-100"]),onClick:c=>a!=null&&a.onClick?a.onClick(o):s.onButtonClick(o),title:o.label},[o.icon?(d(),P(Gt(o.icon),{key:0,class:"h-4 w-4"})):(d(),g("span",ul,M(o.text),1))],10,ll)]),_:2},1040))],64))),128))])])}const Gr=J(Ga,[["render",dl]]),cl={},pl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function fl(e,t){return d(),g("svg",pl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),v("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z",fill:"currentColor"},null,-1)]))}const hl=J(cl,[["render",fl]]),ml={},vl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function gl(e,t){return d(),g("svg",vl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),v("path",{d:"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z",fill:"currentColor"},null,-1)]))}const bl=J(ml,[["render",gl]]),yl={},wl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function xl(e,t){return d(),g("svg",wl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),v("path",{d:"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)]))}const _l=J(yl,[["render",xl]]),kl={},Cl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Al(e,t){return d(),g("svg",Cl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),v("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm9-12v8h1.5v2H22v2h-2v-2h-5.5v-1.34l5-8.66H22zm-2 3.133L17.19 16H20v-4.867z",fill:"currentColor"},null,-1)]))}const Ol=J(kl,[["render",Al]]),Sl={},$l={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Tl(e,t){return d(),g("svg",$l,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),v("path",{d:"M22 8v2h-4.323l-.464 2.636c.33-.089.678-.136 1.037-.136 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.827 0-3.367-1.224-3.846-2.897l1.923-.551c.24.836 1.01 1.448 1.923 1.448 1.105 0 2-.895 2-2s-.895-2-2-2c-.63 0-1.193.292-1.56.748l-1.81-.904L16 8h6zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)]))}const Hl=J(Sl,[["render",Tl]]),Ml={},El={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Ll(e,t){return d(),g("svg",El,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),v("path",{d:"M21.097 8l-2.598 4.5c2.21 0 4.001 1.79 4.001 4s-1.79 4-4 4-4-1.79-4-4c0-.736.199-1.426.546-2.019L18.788 8h2.309zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 10.5c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2z",fill:"currentColor"},null,-1)]))}const Rl=J(Ml,[["render",Ll]]),Dl={},zl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Bl(e,t){return d(),g("svg",zl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M13 6v15h-2V6H5V4h14v2z",fill:"currentColor"},null,-1)]))}const Il=J(Dl,[["render",Bl]]),Vl={},Pl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Fl(e,t){return d(),g("svg",Pl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z",fill:"currentColor"},null,-1)]))}const ql=J(Vl,[["render",Fl]]),Nl={},jl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Ul(e,t){return d(),g("svg",jl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z",fill:"currentColor"},null,-1)]))}const Wl=J(Nl,[["render",Ul]]),Kl={},Jl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Ql(e,t){return d(),g("svg",Jl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z",fill:"currentColor"},null,-1)]))}const Xl=J(Kl,[["render",Ql]]),Yl={},Gl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Zl(e,t){return d(),g("svg",Gl,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z",fill:"currentColor"},null,-1)]))}const eu=J(Yl,[["render",Zl]]),tu={},nu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function ru(e,t){return d(),g("svg",nu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z",fill:"currentColor"},null,-1)]))}const iu=J(tu,[["render",ru]]),su={},ou={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function au(e,t){return d(),g("svg",ou,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z",fill:"currentColor"},null,-1)]))}const lu=J(su,[["render",au]]),uu={},du={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function cu(e,t){return d(),g("svg",du,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M15.246 14H8.754l-1.6 4H5l6-15h2l6 15h-2.154l-1.6-4zm-.8-2L12 5.885 9.554 12h4.892zM3 20h18v2H3v-2z",fill:"currentColor"},null,-1)]))}const pu=J(uu,[["render",cu]]),fu={},hu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function mu(e,t){return d(),g("svg",hu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)]))}const vu=J(fu,[["render",mu]]),gu={},bu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function yu(e,t){return d(),g("svg",bu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)]))}const wu=J(gu,[["render",yu]]),xu={},_u={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function ku(e,t){return d(),g("svg",_u,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M19.417 6.679C20.447 7.773 21 9 21 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311-1.804-.167-3.226-1.648-3.226-3.489a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179zm-10 0C10.447 7.773 11 9 11 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311C4.591 12.322 3.17 10.841 3.17 9a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179z",fill:"currentColor"},null,-1)]))}const Cu=J(xu,[["render",ku]]),Au={},Ou={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Su(e,t){return d(),g("svg",Ou,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M16.95 8.464l1.414-1.414 4.95 4.95-4.95 4.95-1.414-1.414L20.485 12 16.95 8.464zm-9.9 0L3.515 12l3.535 3.536-1.414 1.414L.686 12l4.95-4.95L7.05 8.464z",fill:"currentColor"},null,-1)]))}const $u=J(Au,[["render",Su]]),Tu={},Hu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Mu(e,t){return d(),g("svg",Hu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z",fill:"currentColor"},null,-1)]))}const Eu=J(Tu,[["render",Mu]]),Lu={},Ru={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Du(e,t){return d(),g("svg",Ru,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993V13h-2V5H4v13.999L14 9l3 3v2.829l-3-3L6.827 19H14v2H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z",fill:"currentColor"},null,-1)]))}const zu=J(Lu,[["render",Du]]),Bu={},Iu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Vu(e,t){return d(),g("svg",Iu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),v("path",{d:"M16 4c.552 0 1 .448 1 1v4.2l5.213-3.65c.226-.158.538-.103.697.124.058.084.09.184.09.286v12.08c0 .276-.224.5-.5.5-.103 0-.203-.032-.287-.09L17 14.8V19c0 .552-.448 1-1 1H2c-.552 0-1-.448-1-1V5c0-.552.448-1 1-1h14zm-1 2H3v12h12V6zM8 8h2v3h3v2H9.999L10 16H8l-.001-3H5v-2h3V8zm13 .841l-4 2.8v.718l4 2.8V8.84z",fill:"currentColor"},null,-1)]))}const Pu=J(Bu,[["render",Vu]]),Fu={},qu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Nu(e,t){return d(),g("svg",qu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M5.828 7l2.536 2.536L6.95 10.95 2 6l4.95-4.95 1.414 1.414L5.828 5H13a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H5.828z",fill:"currentColor"},null,-1)]))}const ju=J(Fu,[["render",Nu]]),Uu={},Wu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Ku(e,t){return d(),g("svg",Wu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M18.172 7H11a6 6 0 1 0 0 12h9v2h-9a8 8 0 1 1 0-16h7.172l-2.536-2.536L17.05 1.05 22 6l-4.95 4.95-1.414-1.414L18.172 7z",fill:"currentColor"},null,-1)]))}const Ju=J(Uu,[["render",Ku]]),Qu={},Xu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Yu(e,t){return d(),g("svg",Xu,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M2 11h2v2H2v-2zm4 0h12v2H6v-2zm14 0h2v2h-2v-2z",fill:"currentColor"},null,-1)]))}const Gu=J(Qu,[["render",Yu]]),Zu={},ed={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function td(e,t){return d(),g("svg",ed,t[0]||(t[0]=[v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),v("path",{d:"M13 10v4h6v-4h-6zm-2 0H5v4h6v-4zm2 9h6v-3h-6v3zm-2 0v-3H5v3h6zm2-14v3h6V5h-6zm-2 0H5v3h6V5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z",fill:"currentColor"},null,-1)]))}const nd=J(Zu,[["render",td]]),rd={Paragraph:{label:"Paragraph",icon:Il,action:e=>e.chain().focus().setParagraph().run(),isActive:e=>e.isActive("paragraph")},"Heading 1":{label:"Heading 1",text:"H1",icon:hl,action:e=>e.chain().focus().toggleHeading({level:1}).run(),isActive:e=>e.isActive("heading",{level:1})},"Heading 2":{label:"Heading 2",text:"H2",icon:bl,action:e=>e.chain().focus().toggleHeading({level:2}).run(),isActive:e=>e.isActive("heading",{level:2})},"Heading 3":{label:"Heading 3",text:"H3",icon:_l,action:e=>e.chain().focus().toggleHeading({level:3}).run(),isActive:e=>e.isActive("heading",{level:3})},"Heading 4":{label:"Heading 4",text:"H4",icon:Ol,action:e=>e.chain().focus().toggleHeading({level:4}).run(),isActive:e=>e.isActive("heading",{level:4})},"Heading 5":{label:"Heading 5",text:"H5",icon:Hl,action:e=>e.chain().focus().toggleHeading({level:5}).run(),isActive:e=>e.isActive("heading",{level:5})},"Heading 6":{label:"Heading 6",text:"H6",icon:Rl,action:e=>e.chain().focus().toggleHeading({level:6}).run(),isActive:e=>e.isActive("heading",{level:6})},Bold:{label:"Bold",icon:ql,action:e=>e.chain().focus().toggleBold().run(),isActive:e=>e.isActive("bold")},Italic:{label:"Italic",icon:Wl,action:e=>e.chain().focus().toggleItalic().run(),isActive:e=>e.isActive("italic")},Underline:{label:"Underline",icon:Xl,action:e=>e.chain().focus().toggleUnderline().run(),isActive:e=>e.isActive("underline")},"Bullet List":{label:"Bullet List",icon:wu,action:e=>e.chain().focus().toggleBulletList().run(),isActive:e=>e.isActive("bulletList")},"Numbered List":{label:"Numbered List",icon:vu,action:e=>e.chain().focus().toggleOrderedList().run(),isActive:e=>e.isActive("orderedList")},"Align Center":{label:"Align Center",icon:eu,action:e=>e.chain().focus().setTextAlign("center").run(),isActive:e=>e.isActive({textAlign:"center"})},"Align Left":{label:"Align Left",icon:iu,action:e=>e.chain().focus().setTextAlign("left").run(),isActive:e=>e.isActive({textAlign:"left"})},"Align Right":{label:"Align Right",icon:lu,action:e=>e.chain().focus().setTextAlign("right").run(),isActive:e=>e.isActive({textAlign:"right"})},FontColor:{label:"Font Color",icon:pu,isActive:e=>e.isActive("textStyle")||e.isActive("highlight"),component:Jt(()=>Qt(()=>import("./FontColor-G8Ij4G1Q.js"),__vite__mapDeps([0,1,2])))},Blockquote:{label:"Blockquote",icon:Cu,action:e=>e.chain().focus().toggleBlockquote().run(),isActive:e=>e.isActive("blockquote")},Code:{label:"Code",icon:$u,action:e=>e.chain().focus().toggleCodeBlock().run(),isActive:e=>e.isActive("codeBlock")},"Horizontal Rule":{label:"Horizontal Rule",icon:Gu,action:e=>e.chain().focus().setHorizontalRule().run(),isActive:e=>!1},Link:{label:"Link",icon:Eu,isActive:e=>e.isActive("link"),component:Jt(()=>Qt(()=>import("./InsertLink-Bzb3PuCZ.js"),__vite__mapDeps([3,1,2,4,5,6])))},Image:{label:"Image",icon:zu,isActive:e=>!1,component:Jt(()=>Qt(()=>import("./InsertImage-C2lZkra9.js"),__vite__mapDeps([7,1,2])))},Video:{label:"Video",icon:Pu,isActive:e=>!1,component:Jt(()=>Qt(()=>import("./InsertVideo-CgHk5fCv.js"),__vite__mapDeps([8,1,2,4,5,6])))},Undo:{label:"Undo",icon:ju,action:e=>e.chain().focus().undo().run(),isActive:e=>!1},Redo:{label:"Redo",icon:Ju,action:e=>e.chain().focus().redo().run(),isActive:e=>!1},InsertTable:{label:"Insert Table",icon:nd,action:e=>e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),isActive:e=>!1},AddColumnBefore:{label:"Add Column Before",action:e=>e.chain().focus().addColumnBefore().run(),isActive:e=>!1,isDisabled:e=>!e.can().addColumnBefore()},AddColumnAfter:{label:"Add Column After",action:e=>e.chain().focus().addColumnAfter().run(),isActive:e=>!1,isDisabled:e=>!e.can().addColumnAfter()},DeleteColumn:{label:"Delete Column",action:e=>e.chain().focus().deleteColumn().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteColumn()},AddRowBefore:{label:"Add Row Before",action:e=>e.chain().focus().addRowBefore().run(),isActive:e=>!1,isDisabled:e=>!e.can().addRowBefore()},AddRowAfter:{label:"Add Row After",action:e=>e.chain().focus().addRowAfter().run(),isActive:e=>!1,isDisabled:e=>!e.can().addRowAfter()},DeleteRow:{label:"Delete Row",action:e=>e.chain().focus().deleteRow().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteRow()},DeleteTable:{label:"Delete Table",action:e=>e.chain().focus().deleteTable().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteTable()},MergeCells:{label:"Merge Cells",action:e=>e.chain().focus().mergeCells().run(),isActive:e=>!1,isDisabled:e=>!e.can().mergeCells()},SplitCell:{label:"Split Cell",action:e=>e.chain().focus().splitCell().run(),isActive:e=>!1,isDisabled:e=>!e.can().splitCell()},ToggleHeaderColumn:{label:"Toggle Header Column",action:e=>e.chain().focus().toggleHeaderColumn().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderColumn()},ToggleHeaderRow:{label:"Toggle Header Row",action:e=>e.chain().focus().toggleHeaderRow().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderRow()},ToggleHeaderCell:{label:"Toggle Header Cell",action:e=>e.chain().focus().toggleHeaderCell().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderCell()},Separator:{type:"separator"}};function cn(e){return e instanceof Array?e.map(cn):typeof e=="object"?e:rd[e]}const id={name:"TextEditorFixedMenu",props:["buttons"],components:{Menu:Gr},inject:["editor"],computed:{fixedMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=[["Heading 1","Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Paragraph","Separator","Bold","Italic","Separator","Bullet List","Numbered List","Separator","Align Left","Align Center","Align Right","FontColor","Separator","Image","Video","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"],e.map(cn)}}};function sd(e,t,n,r,i,s){const l=ce("Menu");return s.fixedMenuButtons?(d(),P(l,{key:0,buttons:s.fixedMenuButtons},null,8,["buttons"])):V("",!0)}const od=J(id,[["render",sd]]),ad={name:"TextEditorBubbleMenu",props:["buttons","options"],components:{BubbleMenu:Pa,Menu:Gr},inject:["editor"],computed:{bubbleMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=["Paragraph","Heading 2","Heading 3","Separator","Bold","Italic","Link","Separator","Bullet List","Numbered List","Separator","Image","Video","Blockquote","Code",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"]],e.map(cn)}}};function ld(e,t,n,r,i,s){const l=ce("Menu"),o=ce("BubbleMenu");return s.bubbleMenuButtons?(d(),P(o,ge({key:0,class:"bubble-menu rounded-md shadow-sm","tippy-options":{duration:100},editor:s.editor},n.options),{default:F(()=>[K(l,{class:"rounded-md border border-gray-100 shadow-lg",buttons:s.bubbleMenuButtons},null,8,["buttons"])]),_:1},16,["editor"])):V("",!0)}const ud=J(ad,[["render",ld]]),dd={name:"TextEditorFloatingMenu",props:["buttons"],components:{FloatingMenu:Na},inject:["editor"],computed:{floatingMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=["Paragraph","Heading 2","Heading 3","Bullet List","Numbered List","Blockquote","Code","Horizontal Rule"],e.map(cn)}}},cd=["onClick","title"],pd={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function fd(e,t,n,r,i,s){const l=ce("FloatingMenu");return s.floatingMenuButtons?(d(),P(l,{key:0,"tippy-options":{duration:100},editor:s.editor,class:"flex"},{default:F(()=>[(d(!0),g(be,null,Se(s.floatingMenuButtons,o=>(d(),g("button",{key:o.label,class:re(["flex rounded p-1 text-gray-800 transition-colors",o.isActive(s.editor)?"bg-gray-100":"hover:bg-gray-100"]),onClick:()=>o.action(s.editor),title:o.label},[o.icon?(d(),P(Gt(o.icon),{key:0,class:"h-4 w-4"})):(d(),g("span",pd,M(o.text),1))],10,cd))),128))]),_:1},8,["editor"])):V("",!0)}const hd=J(dd,[["render",fd]]);function md(e){return new Vi.Converter().makeHtml(e)}function vd(e){return e.split(`
`).filter(r=>r.startsWith("![")||r.startsWith("#")||r.startsWith("> ")||r.startsWith("*")||r.startsWith("- ")||r.startsWith("1. ")||r.startsWith("```")||r.startsWith("`")||r.startsWith("[")||r.startsWith("---")).length>0}const gd={name:"TextEditor",inheritAttrs:!1,components:{EditorContent:qa,TextEditorFixedMenu:od,TextEditorBubbleMenu:ud,TextEditorFloatingMenu:hd},props:{content:{type:String,default:null},placeholder:{type:[String,Function],default:""},editorClass:{type:[String,Array,Object],default:""},editable:{type:Boolean,default:!0},bubbleMenu:{type:[Boolean,Array],default:!1},bubbleMenuOptions:{type:Object,default:()=>({})},fixedMenu:{type:[Boolean,Array],default:!1},floatingMenu:{type:[Boolean,Array],default:!1},extensions:{type:Array,default:()=>[]},starterkitOptions:{type:Object,default:()=>({})},mentions:{type:Array,default:()=>[]}},emits:["change","focus","blur"],expose:["editor"],provide(){return{editor:Pi(()=>this.editor)}},data(){return{editor:null}},watch:{content(e){this.editor.getHTML()!==e&&this.editor.commands.setContent(e)},editable(e){this.editor.setEditable(e)},editorProps:{deep:!0,handler(e){this.editor&&this.editor.setOptions({editorProps:e})}}},mounted(){this.editor=new Fa({content:this.content||null,editorProps:this.editorProps,editable:this.editable,extensions:[Fi.configure(ue({},this.starterkitOptions)),qi.configure({resizable:!0}),Ni,ji,Ui,Wi,Ki.configure({types:["heading","paragraph"]}),Ji,Qi,Xi.configure({multicolor:!0}),Yi,Gi,Zi.configure({openOnClick:!1}),es.configure({showOnlyWhenEditable:!1,placeholder:typeof this.placeholder=="function"?this.placeholder:()=>this.placeholder}),Xa(this.mentions),...this.extensions||[]],onUpdate:({editor:e})=>{this.$emit("change",e.getHTML())},onFocus:({editor:e,event:t})=>{this.$emit("focus",t)},onBlur:({editor:e,event:t})=>{this.$emit("blur",t)}})},beforeUnmount(){this.editor.destroy(),this.editor=null},computed:{editorProps(){return{attributes:{class:re(["prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-gray-300 prose-th:border-gray-300 prose-td:relative prose-th:relative prose-th:bg-gray-100",this.editorClass])},clipboardTextParser:(e,t)=>{if(!vd(e)||!confirm("Do you want to convert markdown content to HTML before pasting?"))return;let n=document.createElement("div");return n.innerHTML=md(e),(this.editor.view.someProp("clipboardParser")||this.editor.view.someProp("domParser")||ts.fromSchema(this.editor.schema)).parseSlice(n,{preserveWhitespace:!0,context:t})}}}}};function bd(e,t,n,r,i,s){const l=ce("TextEditorBubbleMenu"),o=ce("TextEditorFixedMenu"),a=ce("TextEditorFloatingMenu"),c=ce("editor-content");return i.editor?(d(),g("div",{key:0,class:re(["relative w-full",e.$attrs.class])},[K(l,{buttons:n.bubbleMenu,options:n.bubbleMenuOptions},null,8,["buttons","options"]),K(o,{class:"w-full overflow-x-auto rounded-t-lg border border-gray-200",buttons:n.fixedMenu},null,8,["buttons"]),K(a,{buttons:n.floatingMenu},null,8,["buttons"]),Z(e.$slots,"top"),Z(e.$slots,"editor",{editor:i.editor},()=>[K(c,{editor:i.editor},null,8,["editor"])]),Z(e.$slots,"bottom")],2)):V("",!0)}const Cn=J(gd,[["render",bd]]);function Zr(r,i){return et(this,arguments,function*(e,t,n={}){t||(t={});let s=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},n.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(s["X-Frappe-CSRF-Token"]=window.csrf_token);let l=e.startsWith("/")?e:`/api/method/${e}`;const o=yield fetch(l,{method:"POST",headers:s,body:JSON.stringify(t)});if(o.ok){const a=yield o.json();if(a.docs||e==="login")return a;if(a.exc)try{console.groupCollapsed(e),console.log(`method: ${e}`),console.log("params:",t);let c=JSON.parse(a.exc);for(let f of c)console.log(f);console.groupEnd()}catch(c){console.warn("Error printing debug messages",c)}return a.message}else{let a=yield o.text(),c,f;try{c=JSON.parse(a)}catch(p){}let w=[[e,c.exc_type,c._error_message].filter(Boolean).join(" ")];if(c.exc){f=c.exc;try{f=JSON.parse(f)[0],console.log(f)}catch(p){}}let m=new Error(w.join(`
`));throw m.exc_type=c.exc_type,m.exc=f,m.status=o.status,m.messages=c._server_messages?JSON.parse(c._server_messages):[],m.messages=m.messages.concat(c.message),m.messages=m.messages.map(p=>{try{return JSON.parse(p).message}catch(C){return p}}),m.messages=m.messages.filter(Boolean),m.messages.length||(m.messages=c._error_message?[c._error_message]:["Internal Server Error"]),n.onError&&n.onError({response:o,status:o.status,error:m}),m}})}/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=pe("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=pe("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=pe("CircleHelpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=pe("CircleMinusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=pe("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=pe("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=pe("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=pe("MaximizeIcon",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=pe("PauseIcon",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=pe("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=pe("PlayIcon",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=pe("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=pe("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=pe("Volume2Icon",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=pe("VolumeXIcon",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=pe("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sd={class:"w-full bg-surface-gray-3 rounded-full h-1"},$d={__name:"ProgressBar",props:{progress:{type:Number,default:0},size:{type:String,default:"sm"}},setup(e){const t=e,n=B(()=>`${Math.min(Math.ceil(t.progress),100)}%`),r=B(()=>{if(t.size==="sm")return"h-1";if(t.size==="md")return"h-2";if(t.size==="lg")return"h-3"});return(i,s)=>(d(),P(h(rs),{text:`${t.progress}%`},{default:F(()=>[v("div",Sd,[v("div",{class:re(["bg-surface-gray-7 rounded-full",r.value]),style:ns({width:n.value})},null,6)])]),_:1},8,["text"]))}},Td={key:0},Hd={class:"bg-surface-blue-2 space-y-1 py-2 px-2 mb-4 rounded-md text-sm text-ink-blue-800"},Md={class:"leading-5"},Ed={key:0,class:"leading-5"},Ld={key:1,class:"leading-5"},Rd={key:2,class:"leading-relaxed"},Dd={key:3,class:"leading-relaxed"},zd={key:0,class:"flex flex-col space-x-1 my-4"},Bd={class:"mb-2"},Id={class:"font-semibold"},Vd={key:1},Pd={class:"border text-center p-20 rounded-md"},Fd={class:"font-semibold text-lg"},qd={key:1},Nd={key:2},jd={key:0,class:"border rounded-md p-5"},Ud={class:"flex justify-between"},Wd={class:"text-sm text-ink-gray-5"},Kd={class:"mr-2"},Jd={class:"text-ink-gray-9 text-sm font-semibold item-left"},Qd=["innerHTML"],Xd={key:0,class:"flex items-center bg-surface-gray-3 rounded-md p-3 mt-4 w-full cursor-pointer focus:border-blue-600"},Yd=["name","onChange"],Gd=["name","onChange"],Zd={key:0},ec=["innerHTML"],tc={key:1},nc={key:0},rc={key:2},ic={class:"flex items-center justify-between mt-4"},sc={class:"text-sm text-ink-gray-5"},oc={key:3,class:"border rounded-md p-20 text-center space-y-4"},ac={class:"text-ink-gray-9"},lc={key:4,class:"mt-10"},uc={__name:"Quiz",props:{quizName:{type:String,required:!0}},setup(e){const t=Mt("$user"),n=N(0),r=N(""),i=kt([0,0,0,0]),s=kt([]);let l=kt([]);const o=N(null),a=N(0);let c=null;const f=br(),w=e,m=Ie({url:"frappe.client.get",makeParams(L){return{doctype:"Quiz",name:w.quizName}},cache:["quiz",w.quizName],auto:!0,transform(L){L.duration=parseInt(L.duration)},onSuccess(L){p(),C()}}),p=()=>{let L=m.data;L.shuffle_questions?(l=O(L.questions),L.limit_questions_to&&(l=l.slice(0,L.limit_questions_to))):l=L.questions},C=()=>{m.data.duration&&(a.value=m.data.duration*60)},T=()=>{c=setInterval(()=>{a.value--,a.value==0&&(clearInterval(c),H())},1e3)},A=L=>{const R=Math.floor(L/3600).toString().padStart(2,"0"),X=Math.floor(L%3600/60).toString().padStart(2,"0"),W=(L%60).toString().padStart(2,"0");return R!="00"?`${R}:${X}:${W}`:`${X}:${W}`},x=B(()=>a.value/(m.data.duration*60)*100),O=L=>{for(let R=L.length-1;R>0;R--){const X=Math.floor(Math.random()*(R+1));[L[R],L[X]]=[L[X],L[R]]}return L},$=Ie({url:"frappe.client.get_list",makeParams(L){var R,X;return{doctype:"Quiz Submission",filters:{member:(R=t.data)==null?void 0:R.name,quiz:(X=m.data)==null?void 0:X.name},fields:["name","creation","score","score_out_of","percentage","passing_percentage"],order_by:"creation desc"}},transform(L){L.forEach((R,X)=>{R.creation=Mp(R.creation),R.idx=X+1})}});Oe(()=>m.data,()=>{m.data&&p(),m.data&&m.data.max_attempts&&($.reload(),G())});const u=Ie({url:"seminary.seminary.doctype.quiz.quiz.quiz_summary",makeParams(L){return{quiz:m.data.name,results:localStorage.getItem(m.data.title)}}}),S=Ie({url:"seminary.seminary.utils.get_question_details",makeParams(L){return{question:r.value}}});Oe(n,L=>{L>0&&(r.value=m.data.questions[L-1].question,S.reload())}),Oe(()=>w.quizName,L=>{L&&m.reload()});const y=()=>{n.value=1,localStorage.removeItem(m.data.title),m.data.duration&&T()},I=L=>{S.data.multiple||i.splice(0,i.length,0,0,0,0),i[L-1]=i[L-1]?0:1},U=()=>{let L=[];return S.data.type=="Choices"?i.forEach((X,W)=>{i[W]&&L.push(S.data[`option_${W+1}`])}):L.push(o.value),L},E=()=>{let L=U();if(!L.length){si({title:"Please select an option",icon:"alert-circle",iconClasses:"text-yellow-600 bg-yellow-100 rounded-full",position:"top-center"});return}Ie({url:"seminary.seminary.doctype.quiz.quiz.check_answer",params:{question:r.value,type:S.data.type,answers:JSON.stringify(L)},auto:!0,onSuccess(R){S.data.type=="Choices"?i.forEach((W,oe)=>{W?s[oe]=W&&R[oe]:R[oe]==2?s[oe]=2:s[oe]=void 0}):s.push(R),D(),m.data.show_answers||k()}})},D=()=>{let L=JSON.parse(localStorage.getItem(m.data.title)),R={question_name:r.value,answer:U().join(),is_correct:s.filter(X=>X!=null)};L?L.push(R):L=[R],localStorage.setItem(m.data.title,JSON.stringify(L))},_=()=>{m.data.show_answers?(D(),k()):E()},k=()=>{n.value!=m.data.questions.length&&(n.value=n.value+1,i.splice(0,i.length,0,0,0,0),s.length=0,o.value=null)},H=()=>{if(!m.data.show_answers){E(),setTimeout(()=>{j()},500);return}j()},j=()=>{u.submit({},{onSuccess(L){ie(),m.data&&m.data.max_attempts&&$.reload(),m.data.duration&&clearInterval(c)},onError(L){var X;if(((L==null?void 0:L.message)||"").includes("MaximumAttemptsExceededError")){const W=((X=L.messages)==null?void 0:X[0])||L;_t("Error",W,"x"),setTimeout(()=>{window.location.reload()},3e3)}}})},G=()=>{n.value=0,i.splice(0,i.length,0,0,0,0),s.length=0,u.reset(),p(),C()},ee=L=>L.type=="Choices"?L.multiple?"Choose all answers that apply":"Choose one answer":"Type your answer",ie=()=>{console.log(f),f.currentRoute.value.name=="Lesson"&&Zr("seminary.seminary.api.mark_lesson_progress",{course:f.currentRoute.value.params.courseName,chapter_number:f.currentRoute.value.params.chapterNumber,lesson_number:f.currentRoute.value.params.lessonNumber})},te=()=>[{label:"No.",key:"idx"},{label:"Date",key:"creation"},{label:"Score",key:"score",align:"center"},{label:"Score out of",key:"score_out_of",align:"center"},{label:"Percentage",key:"percentage",align:"center"}];return(L,R)=>{var X,W,oe,he,me,_e;return h(m).data?(d(),g("div",Td,[v("div",Hd,[v("div",Md,M("This quiz consists of {0} questions.".format(h(l).length)),1),(X=h(m).data)!=null&&X.duration?(d(),g("div",Ed,M("Please ensure that you complete all the questions in {0} minutes.".format(h(m).data.duration)),1)):V("",!0),(W=h(m).data)!=null&&W.duration?(d(),g("div",Ld,M("If you fail to do so, the quiz will be automatically submitted when the timer ends."))):V("",!0),h(m).data.passing_percentage?(d(),g("div",Rd,M("You will have to get {0}% correct answers in order to pass the quiz.".format(h(m).data.passing_percentage)),1)):V("",!0),h(m).data.max_attempts?(d(),g("div",Dd,M("You can attempt this quiz {0}.".format(h(m).data.max_attempts==1?"1 time":`${h(m).data.max_attempts} times`)),1)):V("",!0)]),h(m).data.duration?(d(),g("div",zd,[v("div",Bd,[R[6]||(R[6]=v("span",{class:""},M("Time")+": ",-1)),v("span",Id,M(A(a.value)),1)]),K($d,{progress:x.value},null,8,["progress"])])):V("",!0),n.value==0?(d(),g("div",Vd,[v("div",Pd,[v("div",Fd,M(h(m).data.title),1),!h(m).data.max_attempts||((oe=h($).data)==null?void 0:oe.length)<h(m).data.max_attempts?(d(),P(h(le),{key:0,onClick:y,class:"mt-2"},{default:F(()=>R[7]||(R[7]=[v("span",null,M("Start"),-1)])),_:1})):(d(),g("div",qd,M("You have already exceeded the maximum number of attempts allowed for this quiz.")))])])):h(u).data?(d(),g("div",oc,[R[12]||(R[12]=v("div",{class:"text-lg font-semibold"},M("Quiz Summary"),-1)),v("div",ac,M("You got {0}% correct answers with a score of {1} out of {2}".format(Math.ceil(h(u).data.percentage),h(u).data.score,h(u).data.score_out_of)),1),!h(m).data.max_attempts||((he=h($))==null?void 0:he.data.length)<h(m).data.max_attempts?(d(),P(h(le),{key:0,onClick:R[5]||(R[5]=ze=>G()),class:"mt-2"},{default:F(()=>R[11]||(R[11]=[v("span",null,M("Try Again"),-1)])),_:1})):V("",!0)])):(d(),g("div",Nd,[(d(!0),g(be,null,Se(h(l),(ze,Ee)=>(d(),g("div",null,[Ee==n.value-1&&h(S).data?(d(),g("div",jd,[v("div",Ud,[v("div",Wd,[v("span",Kd,M("Question {0}".format(n.value))+": ",1),v("span",null,M(ee(h(S).data)),1)]),v("div",Jd,M(ze.points)+" "+M(ze.points==1?"Point":"Points"),1)]),v("div",{class:"text-ink-gray-9 font-semibold mt-2 leading-5",innerHTML:h(S).data.question},null,8,Qd),h(S).data.type=="Choices"?(d(),g(be,{key:0},Se(4,se=>v("div",null,[h(S).data[`option_${se}`]?(d(),g("label",Xd,[!s.length&&!h(S).data.multiple?(d(),g("input",{key:0,type:"radio",name:encodeURIComponent(h(S).data.question),class:"w-3.5 h-3.5 text-ink-gray-9 focus:ring-outline-gray-modals",onChange:ve=>I(se)},null,40,Yd)):!s.length&&h(S).data.multiple?(d(),g("input",{key:1,type:"checkbox",name:encodeURIComponent(h(S).data.question),class:"w-3.5 h-3.5 text-ink-gray-9 rounded-sm focus:ring-outline-gray-modals",onChange:ve=>I(se)},null,40,Gd)):h(m).data.show_answers?(d(!0),g(be,{key:2},Se(s,(ve,Je)=>(d(),g("div",null,[se-1==Je?(d(),g("div",Zd,[ve==1?(d(),P(h(ar),{key:0,class:"w-4 h-4 text-ink-green-2"})):ve==2?(d(),P(h(lr),{key:1,class:"w-4 h-4 text-ink-green-2"})):ve==0?(d(),P(h(ur),{key:2,class:"w-4 h-4 text-ink-red-3"})):(d(),P(h(lr),{key:3,class:"w-4 h-4"}))])):V("",!0)]))),256)):V("",!0),v("span",{class:"ml-2",innerHTML:h(S).data[`option_${se}`]},null,8,ec)])):V("",!0),h(S).data[`explanation_${se}`]?We((d(),g("div",{key:1,class:"mt-2 text-xs"},M(h(S).data[`explanation_${se}`]),513)),[[it,s.length]]):V("",!0)])),64)):h(S).data.type=="User Input"?(d(),g("div",tc,[K(h(yn),{modelValue:o.value,"onUpdate:modelValue":R[0]||(R[0]=se=>o.value=se),type:"textarea",disabled:!!s.length,class:"my-2"},null,8,["modelValue","disabled"]),s.length?(d(),g("div",nc,[s[0]?(d(),P(h(rn),{key:0,label:"Correct",theme:"green"},{prefix:F(()=>[K(h(ar),{class:"w-4 h-4 text-ink-green-2 mr-1"})]),_:1})):(d(),P(h(rn),{key:1,theme:"red",label:"Incorrect"},{prefix:F(()=>[K(h(ur),{class:"w-4 h-4 text-ink-red-3 mr-1"})]),_:1}))])):V("",!0)])):(d(),g("div",rc,[K(h(Cn),{class:"mt-4",content:o.value,onChange:R[1]||(R[1]=se=>o.value=se),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]"},null,8,["content"])])),v("div",ic,[v("div",sc,M("Question {0} of {1}".format(n.value,h(l).length)),1),h(m).data.show_answers&&!s.length?(d(),P(h(le),{key:0,onClick:R[2]||(R[2]=se=>E())},{default:F(()=>R[8]||(R[8]=[v("span",null,M("Check"),-1)])),_:1})):n.value!=h(l).length?(d(),P(h(le),{key:1,onClick:R[3]||(R[3]=se=>_())},{default:F(()=>R[9]||(R[9]=[v("span",null,M("Next"),-1)])),_:1})):(d(),P(h(le),{key:2,onClick:R[4]||(R[4]=se=>H())},{default:F(()=>R[10]||(R[10]=[v("span",null,M("Submit"),-1)])),_:1}))])])):V("",!0)]))),256))])),h(m).data.show_submission_history&&((me=h($))!=null&&me.data)&&h($).data.length>0?(d(),g("div",lc,[K(h(gs),{columns:te(),rows:(_e=h($))==null?void 0:_e.data,"row-key":"name",options:{selectable:!1,showTooltip:!1,emptyState:{title:"No Quiz submissions found"}}},null,8,["columns","rows"])])):V("",!0)])):V("",!0)}}},dc={key:1,class:"border rounded-md text-center py-20"},cc={__name:"QuizBlock",props:{quiz:{type:String,required:!0}},setup(e){const t=Mt("$user"),n=()=>{window.location.href="/login"};return(r,i)=>h(t).data?(d(),P(uc,{key:0,quizName:e.quiz},null,8,["quizName"])):(d(),g("div",dc,[v("div",null,M(r.__("Please login to access the quiz.")),1),K(h(le),{onClick:i[0]||(i[0]=s=>n()),class:"mt-2"},{default:F(()=>[v("span",null,M(r.__("Login")),1)]),_:1})]))}},pc={class:"w-full"},fc=["onClick"],hc={class:"flex items-center"},mc={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},vc={key:1,class:"text-base leading-5 text-ink-gray-4"},gc={class:"mt-1 rounded-lg bg-surface-white py-1 text-base shadow-2xl"},bc={class:"relative px-1.5 pt-0.5"},yc={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-ink-gray-4"},wc={class:"flex flex-col space-y-1"},xc=["innerHTML"],_c={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-ink-gray-5"},kc={key:0,class:"border-t p-1.5 pb-0.5"},Cc={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(e,{expose:t,emit:n}){const r=e,i=n,s=N(""),l=N(!1),o=N(null),a=ht(),c=On(),f=B(()=>"value"in a),w=B({get(){return f.value?a.value:r.modelValue},set(O){s.value="",O&&(l.value=!1),i(f.value?"change":"update:modelValue",O)}});function m(){l.value=!1}const p=B(()=>{var $;return!r.options||r.options.length==0?[]:(($=r.options[0])!=null&&$.group?r.options:[{group:"",items:r.options}]).map((u,S)=>({key:S,group:u.group,hideLabel:u.hideLabel||!1,items:r.filterable?C(u.items):u.items})).filter(u=>u.items.length>0)});function C(O){return s.value?O.filter($=>[$.label,$.value].some(S=>(S||"").toString().toLowerCase().includes(s.value.toLowerCase()))):O}function T(O){if(typeof O=="string"){let u=p.value.flatMap(S=>S.items).find(S=>S.value===O);return(u==null?void 0:u.label)||O}return O==null?void 0:O.label}Oe(s,O=>{i("update:query",O)}),Oe(l,O=>{O&&Ae(()=>{o.value.el.focus()})});const A=B(()=>r.disabled?"text-ink-gray-5":"text-ink-gray-8"),x=B(()=>{let O={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[r.size],$={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[r.size],u=r.disabled?"disabled":r.variant,S={subtle:"border border-gray-100 bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white placeholder-ink-gray-4 hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border bg-surface-menu-bar placeholder-ink-gray-3",r.variant==="outline"?"border-outline-gray-2":"border-transparent"]}[u];return[O,$,S,A.value,"transition-colors w-full"]});return t({query:s}),(O,$)=>(d(),P(h(Sr),{modelValue:w.value,"onUpdate:modelValue":$[3]||($[3]=u=>w.value=u),nullable:""},{default:F(({open:u})=>[K(h(An),{class:"w-full",show:l.value,"onUpdate:show":$[2]||($[2]=S=>l.value=S)},{target:F(({open:S,togglePopover:y})=>[Z(O.$slots,"target",Ve(Ue({open:S,togglePopover:y})),()=>[v("div",pc,[v("button",{class:re(["flex w-full items-center justify-between focus:outline-none",x.value]),onClick:()=>y()},[v("div",hc,[Z(O.$slots,"prefix"),w.value?(d(),g("span",mc,M(T(w.value)),1)):(d(),g("span",vc,M(e.placeholder||""),1))]),K(h(yd),{class:"h-4 w-4 stroke-1.5"})],10,fc)])])]),body:F(({isOpen:S})=>{var y;return[We(v("div",null,[v("div",gc,[v("div",bc,[K(h($r),{ref_key:"search",ref:o,class:"form-input w-full",type:"text",onChange:$[0]||($[0]=I=>{s.value=I.target.value}),value:s.value,autocomplete:"off",placeholder:"Search"},null,8,["value"]),v("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:$[1]||($[1]=I=>w.value=null)},[K(h(Dn),{class:"h-4 w-4 stroke-1.5"})])]),K(h(Tr),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:F(()=>[(d(!0),g(be,null,Se(p.value,I=>We((d(),g("div",{class:"mt-1.5",key:I.key},[I.group&&!I.hideLabel?(d(),g("div",yc,M(I.group),1)):V("",!0),(d(!0),g(be,null,Se(I.items,U=>(d(),P(h(Hr),{as:"template",key:U.value,value:U},{default:F(({active:E,selected:D})=>[v("li",{class:re(["flex items-center rounded px-2.5 py-2 text-base",{"bg-surface-gray-2":E}])},[Z(O.$slots,"item-prefix",ge({ref_for:!0},{active:E,selected:D,option:U})),Z(O.$slots,"item-label",ge({ref_for:!0},{active:E,selected:D,option:U}),()=>[v("div",wc,[v("div",null,M(U.label),1),U.description?(d(),g("div",{key:0,class:"text-xs text-ink-gray-7",innerHTML:U.description},null,8,xc)):V("",!0)])])],2)]),_:2},1032,["value"]))),128))])),[[it,I.items.length>0]])),128)),p.value.length==0?(d(),g("li",_c," No results found ")):V("",!0)]),_:3}),h(c).footer?(d(),g("div",kc,[Z(O.$slots,"footer",Ve(Ue({value:(y=o.value)==null?void 0:y.el._value,close:m})))])):V("",!0)])],512),[[it,S]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}},Ac={class:"space-y-1.5"},Oc={key:0,class:"text-ink-red-3"},Sc={key:0},$c={key:1,class:"text-sm text-ink-gray-5"},dr={__name:"Link",props:{doctype:{type:String,required:!0},filters:{type:Object,default:()=>({})},modelValue:{type:String,default:""},description:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,r=t,i=ht(),s=B(()=>"value"in i),l=B({get:()=>s.value?i.value:n.modelValue,set:p=>(p==null?void 0:p.value)&&r(s.value?"change":"update:modelValue",p==null?void 0:p.value)}),o=N(null),a=N("");Fn(()=>{var p;return(p=o.value)==null?void 0:p.query},p=>{p=p||"",a.value!==p&&(a.value=p,f(p))},{debounce:300,immediate:!0}),Fn(()=>n.doctype,()=>f(""),{debounce:300,immediate:!0});const c=Ie({url:"frappe.desk.search.search_link",cache:[n.doctype,a.value],method:"POST",auto:!0,params:{txt:a.value,doctype:n.doctype,filters:n.filters},transform:p=>p.map(C=>({label:C.label||C.value,value:C.value,description:C.description}))}),f=p=>{c.update({params:{txt:p,doctype:n.doctype,filters:n.filters}}),c.reload()},w=p=>{r(s.value?"change":"update:modelValue",""),p()},m=B(()=>[{sm:"text-xs",md:"text-base"}[i.size||"sm"],"text-ink-gray-5"]);return(p,C)=>(d(),g("div",Ac,[h(i).label?(d(),g("label",{key:0,class:re(["block",m.value])},[nt(M(h(i).label)+" ",1),h(i).required?(d(),g("span",Oc,"*")):V("",!0)],2)):V("",!0),K(Cc,{ref_key:"autocomplete",ref:o,options:h(c).data,modelValue:l.value,"onUpdate:modelValue":C[0]||(C[0]=T=>l.value=T),size:h(i).size||"sm",variant:h(i).variant,placeholder:h(i).placeholder,filterable:!1},{target:F(({open:T,togglePopover:A})=>[Z(p.$slots,"target",Ve(Ue({open:T,togglePopover:A})))]),prefix:F(()=>[Z(p.$slots,"prefix")]),"item-prefix":F(({active:T,selected:A,option:x})=>[Z(p.$slots,"item-prefix",Ve(Ue({active:T,selected:A,option:x})))]),"item-label":F(({active:T,selected:A,option:x})=>[Z(p.$slots,"item-label",Ve(Ue({active:T,selected:A,option:x})))]),footer:F(({value:T,close:A})=>[h(i).onCreate?(d(),g("div",Sc,[K(h(le),{variant:"ghost",class:"w-full !justify-start",label:"Create New",onClick:x=>h(i).onCreate(T,A)},{prefix:F(()=>[K(h(Ad),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["onClick"])])):V("",!0),v("div",null,[K(h(le),{variant:"ghost",class:"w-full !justify-start",label:p.__("Clear"),onClick:()=>w(A)},{prefix:F(()=>[K(h(Dn),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["label","onClick"])])]),_:3},8,["options","modelValue","size","variant","placeholder"]),e.description?(d(),g("p",$c,M(e.description),1)):V("",!0)]))}},Tc={class:"p-5 space-y-4"},Hc={key:0,class:"text-lg font-semibold"},Mc={key:1,class:"text-lg font-semibold"},Ec={class:"flex justify-end space-x-2"},ii={__name:"AssessmentPlugin",props:{type:{type:String,required:!0},onAddition:{type:Function,required:!0}},setup(e){const t=N(!1),n=N(null),r=N(null),i=e;qe(()=>et(this,null,function*(){yield Ae(),t.value=!0}));const s=()=>{i.onAddition(i.type=="quiz"?n.value:r.value),t.value=!1},l=()=>{i.type=="quiz"?window.open("/seminary/quizzes/new","_blank"):window.open("/seminary/assignments/new","_blank")};return(o,a)=>(d(),P(h(is),{modelValue:t.value,"onUpdate:modelValue":a[3]||(a[3]=c=>t.value=c),options:{size:"xl"}},{body:F(()=>[v("div",Tc,[e.type=="quiz"?(d(),g("div",Hc,M(o.__("Add a quiz to your lesson")),1)):(d(),g("div",Mc,M(o.__("Add an assignment to your lesson")),1)),v("div",null,[e.type=="quiz"?(d(),P(dr,{key:0,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=c=>n.value=c),doctype:"Quiz",label:o.__("Select a quiz"),onCreate:(c,f)=>l()},null,8,["modelValue","label","onCreate"])):(d(),P(dr,{key:1,modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=c=>r.value=c),doctype:"LMS Assignment",label:o.__("Select an assignment"),onCreate:(c,f)=>l()},null,8,["modelValue","label","onCreate"]))]),v("div",Ec,[K(h(le),{variant:"solid",onClick:a[2]||(a[2]=c=>s())},{default:F(()=>[nt(M(o.__("Save")),1)]),_:1})])])]),_:1},8,["modelValue"]))}};class Lc{constructor({data:t,api:n,readOnly:r}){this.data=t,this.readOnly=r}static get toolbox(){const t=Le({render:()=>De(wd,{size:18,strokeWidth:1.5,color:"black"})}),n=document.createElement("div");return t.mount(n),{title:__("Quiz"),icon:n.innerHTML}}static get isReadOnlySupported(){return!0}render(){return this.wrapper=document.createElement("div"),Object.keys(this.data).length?this.renderQuiz(this.data.quiz):this.renderQuizModal(),this.wrapper}renderQuiz(t){if(this.readOnly){const n=Le(cc,{quiz:t});n.use(St),n.use(yr);const{userResource:r}=wr();n.provide("$user",r),n.mount(this.wrapper);return}this.wrapper.innerHTML=`<div class='border rounded-md p-10 text-center bg-surface-menu-bar mb-2'>
            <span class="font-medium">
                Quiz: ${t}
            </span>
        </div>`}renderQuizModal(){if(this.readOnly)return;const t=Le(ii,{type:"quiz",onAddition:n=>{this.data.quiz=n,this.renderQuiz(n)}});t.use(St),t.mount(this.wrapper)}save(t){return{quiz:this.data.quiz}}}const Rc={class:"border-r p-5 overflow-y-auto h-[calc(100vh-3.2rem)]"},Dc={key:0,class:"text-lg font-semibold mb-5 text-ink-gray-9"},zc={key:0},Bc={key:1},Ic={class:"text-sm text-ink-gray-7 font-medium mb-2"},Vc=["innerHTML"],Pc={class:"flex flex-col"},Fc={class:"p-5"},qc={class:"flex items-center justify-between mb-4"},Nc={class:"font-semibold text-ink-gray-9"},jc={class:"flex items-center space-x-2"},Uc={key:0,class:"bg-surface-blue-2 p-3 rounded-md leading-5 text-sm mb-4"},Wc={key:1},Kc={class:"text-xs text-ink-gray-5 mt-1 mb-2"},Jc={key:1},Qc={class:"flex text-ink-gray-7"},Xc={class:"border self-start rounded-md p-2 mr-2"},Yc=["href"],Gc={class:"text-sm leading-5"},Zc={class:"text-sm text-ink-gray-5 mt-1"},ep={key:2},tp={class:"text-xs text-ink-gray-5 mb-1"},np={key:3},rp={class:"text-sm mb-4"},ip={key:4,class:"mt-8 p-3 bg-surface-blue-2 rounded-md"},sp={class:"text-sm text-ink-gray-5 font-medium mb-2"},op={class:"leading-5"},ap={key:5,class:"mt-8 space-y-4"},lp={class:"font-semibold mb-2 text-ink-gray-9"},up={class:"text-sm text-ink-gray-5 mb-1"},dp={__name:"Assignment",props:{assignmentID:{type:String,required:!0},submissionName:{type:String,default:"new"}},setup(e){var D;const t=N(null),n=N(null),r=N(null),i=br(),s=Mt("$user"),l=i.currentRoute.value.name=="AssignmentSubmission",o=N(!1),a=e;qe(()=>{window.addEventListener("keydown",c)});const c=_=>{_.key==="s"&&(_.ctrlKey||_.metaKey)&&(C(),_.preventDefault())};ln(()=>{window.removeEventListener("keydown",c)});const f=Ie({url:"frappe.client.get",params:{doctype:"Assignment Activity",name:a.assignmentID},auto:!0,onSuccess(_){a.submissionName!="new"&&p.reload()}}),w=Ie({url:"frappe.client.insert",makeParams(_){var H;let k={doctype:"Assignment Submission",assignment:a.assignmentID,member:(H=s.data)==null?void 0:H.name};return E()?k.assignment_attachment=t.value.file_url:k.answer=n.value,{doc:k}}}),m=Ie({url:"seminary.seminary.api.get_file_info",makeParams(_){return{file_url:_.image}},auto:!1,onSuccess(_){t.value=_}}),p=ss({doctype:"Assignment Submission",name:a.submissionName,onError(_){var k;_t(__("Error"),__(((k=_.messages)==null?void 0:k[0])||_),"x")},auto:!1,cache:[(D=s.data)==null?void 0:D.name,a.assignmentID]});Oe(p,()=>{p.doc&&(p.doc.assignment_attachment&&m.reload({image:p.doc.assignment_attachment}),p.doc.answer&&(n.value=p.doc.answer),p.doc.comments&&(r.value=p.doc.comments),p.isDirty||E()&&!t.value||!E()&&!n.value?o.value=!0:o.value=!1)}),Oe(t,()=>{a.submissionName=="new"&&t.value&&(o.value=!0)});const C=()=>{var _,k,H;if(a.submissionName!="new"){let j=p.doc&&p.doc.owner!=((_=s.data)==null?void 0:_.name)?(k=s.data)==null?void 0:k.name:null;p.setValue.submit(Ze(ue({},p.doc),{assignment_attachment:(H=t.value)==null?void 0:H.file_url,evaluator:j,comments:r.value,answer:n.value}),{onSuccess(G){_t(__("Success"),__("Changes saved successfully"),"check")}})}else T()},T=()=>{w.submit({},{onSuccess(_){_t("Success","Assignment submitted successfully.","check"),i.currentRoute.value.name=="AssignmentSubmission"?i.push({name:"AssignmentSubmission",params:{assignmentID:a.assignmentID,submissionName:_.name}}):(x(),i.go()),p.name=_.name,p.reload()},onError(_){var k;_t("Error",((k=_.messages)==null?void 0:k[0])||_,"x")}})},A=_=>{o.value=!0,t.value=_},x=()=>{if(i.currentRoute.value.name=="Lesson"){let _=i.currentRoute.value.params.courseName,k=i.currentRoute.value.params.chapterNumber,H=i.currentRoute.value.params.lessonNumber;Zr("seminary.seminary.api.mark_lesson_progress",{course:_,chapter_number:k,lesson_number:H})}},O=()=>{var k;const _=(k=f.data)==null?void 0:k.type;if(_=="Image")return["image/*"];if(_=="Document")return[".doc",".docx",".xml","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];if(_=="PDF")return[".pdf"]},$=_=>{var j;let k=(j=f.data)==null?void 0:j.type,H=_.name.split(".").pop().toLowerCase();if(k=="Image"&&!["jpg","jpeg","png"].includes(H))return"Only image file is allowed.";if(k=="Document"&&!["doc","docx","xml"].includes(H))return"Only document file is allowed.";if(k=="PDF"&&!["pdf"].includes(H))return"Only PDF file is allowed."},u=()=>{o.value=!0,t.value=null},S=B(()=>{var _,k,H;return(((_=s.data)==null?void 0:_.is_moderator)||((k=s.data)==null?void 0:k.is_evaluator)||((H=s.data)==null?void 0:H.is_instructor))&&a.submissionName!="new"&&i.currentRoute.value.name=="AssignmentSubmission"}),y=B(()=>{var _,k,H;return!p.doc||((_=p.doc)==null?void 0:_.owner)==((k=s.data)==null?void 0:k.name)&&((H=p.doc)==null?void 0:H.status)=="Not Graded"}),I=B(()=>[{label:"Not Graded",value:"Not Graded"},{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"}]),U=B(()=>p.doc?p.doc.status=="Pass"?"green":p.doc.status=="Not Graded"?"blue":"red":"orange"),E=()=>{var _;return["PDF","Image","Document"].includes((_=f.data)==null?void 0:_.type)};return(_,k)=>{var H,j,G,ee,ie,te,L,R,X;return h(f).data?(d(),g("div",{key:0,class:re(["grid grid-cols-[65%,35%] h-full",{"border rounded-lg":!l}])},[v("div",Rc,[l?(d(),g("div",Dc,[e.submissionName==="new"?(d(),g("div",zc,M(_.__("Submission by"))+" "+M((H=h(s).data)==null?void 0:H.full_name),1)):(d(),g("div",Bc,M(_.__("Submission by"))+" "+M((j=h(p).doc)==null?void 0:j.member_name),1))])):V("",!0),v("div",Ic,M(_.__("Question"))+": ",1),v("div",{innerHTML:h(f).data.question,class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal"},null,8,Vc)]),v("div",Pc,[v("div",Fc,[v("div",qc,[v("div",Nc,M(_.__("Submission")),1),v("div",jc,[o.value?(d(),P(h(rn),{key:0,theme:"orange"},{default:F(()=>[nt(M(_.__("Not Saved")),1)]),_:1})):(G=h(p).doc)!=null&&G.status?(d(),P(h(rn),{key:1,theme:U.value,size:"lg"},{default:F(()=>{var W;return[nt(M((W=h(p).doc)==null?void 0:W.status),1)]}),_:1},8,["theme"])):V("",!0),K(h(le),{variant:"solid",onClick:k[0]||(k[0]=W=>C())},{default:F(()=>[nt(M(_.__("Save")),1)]),_:1})])]),e.submissionName!="new"&&!["Pass","Fail"].includes((ee=h(p).doc)==null?void 0:ee.status)&&((ie=h(p).doc)==null?void 0:ie.owner)==((te=h(s).data)==null?void 0:te.name)?(d(),g("div",Uc,M(_.__("You've successfully submitted the assignment."))+" "+M(_.__("Once the moderator grades your submission, you'll find the details here."))+" "+M(_.__("Feel free to make edits to your submission if needed.")),1)):V("",!0),E()?(d(),g("div",Wc,[v("div",Kc,M(_.__("Add your assignment as {0}").format(h(f).data.type)),1),t.value?(d(),g("div",Jc,[v("div",Qc,[v("div",Xc,[K(h(_d),{class:"h-5 w-5 stroke-1.5"})]),v("a",{href:t.value.file_url,target:"_blank",class:"flex flex-col cursor-pointer !no-underline"},[v("span",Gc,M(t.value.file_name),1),v("span",Zc,M(h(Ep)(t.value.file_size)),1)],8,Yc),y.value?(d(),P(h(Dn),{key:0,onClick:k[2]||(k[2]=W=>u()),class:"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})):V("",!0)])])):(d(),P(h(Mr),{key:0,fileTypes:O(),validateFile:$,onSuccess:k[1]||(k[1]=W=>A(W))},{default:F(({uploading:W,progress:oe,openFileSelector:he})=>[K(h(le),{onClick:he,loading:W},{default:F(()=>[nt(M(W?_.__("Uploading {0}%").format(oe):_.__("Upload File")),1)]),_:2},1032,["onClick","loading"])]),_:1},8,["fileTypes"]))])):h(f).data.type=="URL"?(d(),g("div",ep,[v("div",tp,M(_.__("Enter a URL")),1),K(h(yn),{modelValue:n.value,"onUpdate:modelValue":k[3]||(k[3]=W=>n.value=W),type:"text",readonly:!y.value},null,8,["modelValue","readonly"])])):(d(),g("div",np,[v("div",rp,M(_.__("Write your answer here")),1),K(h(Cn),{content:n.value,onChange:k[4]||(k[4]=W=>n.value=W),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]"},null,8,["content"])])),((L=h(s).data)==null?void 0:L.name)==((R=h(p).doc)==null?void 0:R.owner)&&((X=h(p).doc)!=null&&X.comments)?(d(),g("div",ip,[v("div",sp,M(_.__("Comments by Evaluator"))+": ",1),v("div",op,M(h(p).doc.comments),1)])):V("",!0),S.value?(d(),g("div",ap,[v("div",lp,M(_.__("Grading")),1),h(p).doc?(d(),P(h(yn),{key:0,modelValue:h(p).doc.status,"onUpdate:modelValue":k[5]||(k[5]=W=>h(p).doc.status=W),label:_.__("Grade"),type:"select",options:I.value},null,8,["modelValue","label","options"])):V("",!0),v("div",null,[v("div",up,M(_.__("Comments")),1),K(h(Cn),{content:r.value,onChange:k[6]||(k[6]=W=>{r.value=W,o.value=!0}),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]"},null,8,["content"])])])):V("",!0)])])],2)):V("",!0)}}},cp={key:1,class:"border rounded-md text-center py-20"},pp={__name:"AssignmentBlock",props:{assignmentID:{type:String,required:!0}},setup(e){const t=Mt("$user"),n=e,r=Ie({url:"frappe.client.get_value",makeParams(i){var s;return{doctype:"Assignment Submission",fieldname:"name",filters:{assignment:n.assignmentID,member:(s=t.data)==null?void 0:s.name}}},auto:!0});return(i,s)=>{var l;return h(t).data&&h(r).data?(d(),P(dp,{key:0,assignmentID:e.assignmentID,submissionName:((l=h(r).data)==null?void 0:l.name)||"new"},null,8,["assignmentID","submissionName"])):(d(),g("div",cp,[v("div",null,M(i.__("Please login to access the assignment.")),1),K(h(le),{onClick:s[0]||(s[0]=o=>i.redirectToLogin()),class:"mt-2"},{default:F(()=>[v("span",null,M(i.__("Login")),1)]),_:1})]))}}};class fp{constructor({data:t,api:n,readOnly:r}){this.data=t,this.readOnly=r}static get toolbox(){const t=Le({render:()=>De(Cd,{size:18,strokeWidth:1.5,color:"black"})}),n=document.createElement("div");return t.mount(n),{title:__("Assignment"),icon:n.innerHTML}}static get isReadOnlySupported(){return!0}render(){return this.wrapper=document.createElement("div"),Object.keys(this.data).length?this.renderAssignment(this.data.assignment):this.renderAssignmentModal(),this.wrapper}renderAssignment(t){if(this.readOnly){const n=Le(pp,{assignmentID:t});n.use(St),n.use(yr);const{userResource:r}=wr();n.provide("$user",r),n.mount(this.wrapper);return}this.wrapper.innerHTML=`<div class='border rounded-md p-10 text-center bg-surface-menu-bar mb-2'>
            <span class="font-medium">
                Assignment: ${t}
            </span>
        </div>`}renderAssignmentModal(){if(this.readOnly)return;const t=Le(ii,{type:"assignment",onAddition:n=>{this.data.assignment=n,this.renderAssignment(n)}});t.use(St),t.mount(this.wrapper)}save(t){return{assignment:this.data.assignment}}}const hp=["src"],mp={class:"flex items-center space-x-2 shadow rounded-lg p-1 w-1/2"},vp=["max"],gp={class:"text-xs text-ink-gray-9 font-medium"},bp={__name:"AudioBlock",props:{file:{type:String,required:!0}},setup(e){const t=N(!1),n=N(null);let r=N(!1),i=N(0),s=N(0);qe(()=>{setTimeout(()=>{n.value=document.querySelector("audio"),n.value.onloadedmetadata=()=>{s.value=n.value.duration},n.value.ontimeupdate=()=>{i.value=n.value.currentTime}},0)});const l=()=>{n.value.paused?(n.value.play(),t.value=!0):(n.value.pause(),t.value=!1)},o=()=>{n.value.muted=!n.value.muted,r.value=n.value.muted},a=()=>{n.value.currentTime=i.value},c=()=>{t.value=!1},f=w=>{const m=Math.floor(w/60),p=Math.floor(w%60);return`${m}:${p<10?"0":""}${p}`};return Oe(t,w=>{w?n.value.play():n.value.pause()}),(w,m)=>(d(),g("div",null,[v("audio",{onEnded:c,controlsList:"nodownload",class:"mb-4"},[v("source",{src:encodeURI(e.file),type:"audio/mp3"},null,8,hp)],32),v("div",mp,[K(h(le),{variant:"ghost",onClick:l},{icon:F(()=>[t.value?(d(),P(h(ei),{key:1,class:"w-4 h-4 text-ink-gray-9"})):(d(),P(h(ti),{key:0,class:"w-4 h-4 text-ink-gray-9"}))]),_:1}),We(v("input",{type:"range",min:"0",max:h(s),step:"0.1","onUpdate:modelValue":m[0]||(m[0]=p=>_r(i)?i.value=p:i=p),onInput:a,class:"duration-slider w-full h-1"},null,40,vp),[[xr,h(i)]]),v("span",gp,M(f(h(i)))+" / "+M(f(h(s))),1),K(h(le),{variant:"ghost",onClick:o},{icon:F(()=>[h(r)?(d(),P(h(ri),{key:1,class:"w-4 h-4 text-ink-gray-9"})):(d(),P(h(ni),{key:0,class:"w-4 h-4 text-ink-gray-9"}))]),_:1})])]))}},yp=["src","type"],wp={class:"flex items-center space-x-2 bg-surface-gray-3 rounded-md p-0.5 absolute bottom-3 w-[98%] left-0 right-0 mx-auto invisible group-hover:visible"},xp=["max"],_p={class:"text-xs font-medium"},kp={__name:"VideoBlock",props:{file:{type:String,required:!0},type:{type:String,default:"video/mp4"}},setup(e){const t=N(null),n=N(null);let r=N(!1),i=N(0),s=N(0),l=N(!1);const o=e;qe(()=>{setTimeout(()=>{t.value.onloadedmetadata=()=>{s.value=t.value.duration},t.value.ontimeupdate=()=>{i.value=t.value.currentTime}},0)});const a=B(()=>{if(c){let O=o.file;return O.includes("watch?v=")&&(O=O.replace("watch?v=","embed/")),`${O}?autoplay=0&controls=0&disablekb=1&playsinline=1&cc_load_policy=1&cc_lang_pref=auto`}return o.file}),c=B(()=>o.type=="video/youtube"),f=()=>{t.value.play(),r.value=!0},w=()=>{t.value.pause(),r.value=!1},m=()=>{r.value?w():f()},p=()=>{r.value=!1},C=()=>{t.value.muted=!t.value.muted,l.value=t.value.muted},T=()=>{t.value.currentTime=i.value},A=O=>{const $=Math.floor(O/60),u=Math.floor(O%60);return`${$}:${u<10?"0":""}${u}`},x=()=>{document.fullscreenElement?document.exitFullscreen():n.value.requestFullscreen()};return(O,$)=>(d(),g("div",{ref_key:"videoContainer",ref:n,class:"video-block group relative"},[v("video",{onTimeupdate:$[0]||($[0]=(...u)=>O.updateTime&&O.updateTime(...u)),onEnded:p,onClick:m,oncontextmenu:"return false",class:"rounded-lg border border-gray-100 group cursor-pointer",ref_key:"videoRef",ref:t},[v("source",{src:a.value,type:e.type},null,8,yp)],544),v("div",wp,[K(h(le),{variant:"ghost"},{icon:F(()=>[h(r)?(d(),P(h(ei),{key:1,onClick:w,class:"w-4 h-4 text-ink-gray-9"})):(d(),P(h(ti),{key:0,onClick:f,class:"w-4 h-4 text-ink-gray-9"}))]),_:1}),K(h(le),{variant:"ghost",onClick:C},{icon:F(()=>[h(l)?(d(),P(h(ri),{key:1,class:"w-4 h-4 text-ink-gray-9"})):(d(),P(h(ni),{key:0,class:"w-4 h-4 text-ink-gray-9"}))]),_:1}),We(v("input",{type:"range",min:"0",max:h(s),step:"0.1","onUpdate:modelValue":$[1]||($[1]=u=>_r(i)?i.value=u:i=u),onInput:T,class:"duration-slider w-full h-1"},null,40,xp),[[xr,h(i)]]),v("span",_p,M(A(h(i)))+" / "+M(A(h(s))),1),K(h(le),{variant:"ghost",onClick:x},{icon:F(()=>[K(h(kd),{class:"w-4 h-4 text-ink-gray-9"})]),_:1})])],512))}},Cp=J(kp,[["__scopeId","data-v-edd7c5f4"]]),Ap={__name:"UploadPlugin",props:{onFileUploaded:{type:Function,required:!0}},emits:["fileUploaded"],setup(e,{emit:t}){const n=N(null),r=e;qe(()=>et(this,null,function*(){yield Ae();const l=n.value.$el.querySelector('input[type="file"]');l&&l.click()}));const i=l=>{r.onFileUploaded({file_url:l.file_url,file_type:l.file_type})},s=l=>{let o=l.name.split(".").pop().toLowerCase();if(!["jpg","jpeg","png","mp4","mov","mp3","pdf"].includes(o))return"Only image and video files are allowed."};return(l,o)=>(d(),P(h(Mr),{fileTypes:["image/*","video/*","audio/*",".pdf"],validateFile:s,onSuccess:o[0]||(o[0]=a=>i(a)),ref_key:"fileUploader",ref:n,class:"hide"},null,512))}};class Op{constructor({data:t,api:n,readOnly:r}){this.data=t,this.readOnly=r}static get toolbox(){const t=Le({render:()=>De(Od,{size:18,strokeWidth:1.5,color:"black"})}),n=document.createElement("div");return t.mount(n),{title:"Upload",icon:n.innerHTML}}static get isReadOnlySupported(){return!0}render(){return this.wrapper=document.createElement("div"),this.data&&this.data.file_url?this.renderFile(this.data):this.renderFileUploader(),this.wrapper}renderFile(t){if(this.isVideo(t.file_type)){Le(Cp,{file:t.file_url}).mount(this.wrapper);return}else if(this.isAudio(t.file_type)){Le(bp,{file:t.file_url}).mount(this.wrapper);return}else if(t.file_type=="PDF"){this.wrapper.innerHTML=`<iframe src="https://docs.google.com/viewer?url=${window.location.origin}${encodeURI(t.file_url)}&embedded=true" width='100%' height='700px' class="mb-4" type="application/pdf"></iframe>`;return}else{this.wrapper.innerHTML=`<img class="mb-4" src=${encodeURI(t.file_url)} width='100%'>`;return}}renderFileUploader(){const t=Le(Ap,{onFileUploaded:n=>{this.data.file_url=n.file_url,this.data.file_type=n.file_type,this.renderFile(n)}});t.use(St),t.mount(this.wrapper)}validate(t){return!(!t.file_url||!t.file_type)}save(t){return{file_url:this.data.file_url,file_type:this.data.file_type}}isVideo(t){return["mov","mp4","avi","mkv","webm"].includes(t.toLowerCase())}isAudio(t){return["mp3","wav","ogg"].includes(t.toLowerCase())}}class Sp{constructor({data:t,api:n,readOnly:r,config:i}){this.api=n,this.data=t||{},this.config=i||{},this.text=t.text||"",this.readOnly=r}static get isReadOnlySupported(){return!0}static get conversionConfig(){return{export:"text",import:"text"}}onPaste(t){const n={text:t.detail.data.innerHTML};this.data=n,window.requestAnimationFrame(()=>{this.wrapper&&(this.wrapper.innerHTML=this.data.text||"")})}static get pasteConfig(){return{tags:["P"]}}render(){return this.wrapper=document.createElement("div"),this.wrapper.classList.add("cdx-block"),this.wrapper.classList.add("ce-paragraph"),this.wrapper.innerHTML=this.text,this.readOnly||(this.wrapper.contentEditable=!0,this.wrapper.innerHTML=this.text,this.wrapper.addEventListener("keydown",t=>{let n=t.target.textContent;t.keyCode===32&&n.startsWith("#")?this.convertToHeader(t,n):t.keyCode==189?this.convertBlock("list",{style:"unordered"}):/^[a-zA-Z]/.test(t.key)?this.convertBlock("paragraph",{text:n}):(t.keyCode===13||t.keyCode===190)&&this.parseContent(t)})),this.wrapper}convertToHeader(t,n){if(t.preventDefault(),["#","##","###","####","#####","######"].includes(n)){let r=n.length;t.target.textContent="",this.convertBlock("header",{level:r})}}parseContent(t){t.preventDefault();let n=this.wrapper.textContent;if(t.keyCode===190&&(n=n+"."),n&&this.hasImage(n))this.wrapper.textContent="",this.convertBlock("image");else if(n&&this.hasLink(n)){const{text:r,url:i}=this.extractLink(n),s=`<a href="${i}" target="_blank">${r}</a>`;this.convertBlock("paragraph",{text:n.replace(/\[.+?\]\(.+?\)/,s)})}else n&&n.startsWith("- ")?this.convertBlock("list",{style:"unordered",items:[{content:n.replace("- ","")}]}):n&&n.startsWith("1.")?this.convertBlock("list",{style:"ordered",items:[{content:n.replace("1.","")}]}):n&&this.canBeEmbed(n)?(this.wrapper.textContent="",this.convertBlock("embed",{source:n})):this.convertBlock("paragraph",{text:n})}convertBlock(t,n,r=null){return et(this,null,function*(){const i=this.api.blocks.getCurrentBlockIndex(),s=this.api.blocks.getBlockByIndex(i);yield this.api.blocks.convert(s.id,t,n),this.api.caret.focus(!0)})}save(t){return{text:t.innerHTML}}hasImage(t){return/!\[.+?\]\(.+?\)/.test(t)}extractImage(t){const n=t.match(/!\[(.+?)\]\((.+?)\)/);return n?{alt:n[1],url:n[2]}:{alt:"",url:""}}hasLink(t){return/\[.+?\]\(.+?\)/.test(t)}extractLink(t){const n=t.match(/\[(.+?)\]\((.+?)\)/);return n?{text:n[1],url:n[2]}:{text:"",url:""}}canBeEmbed(t){return/^https?:\/\/.+/.test(t)}}const $p=["light","dark"],Tp={none:"Auto-detect",apache:"Apache",bash:"Bash",cs:"C#",cpp:"C++",css:"CSS",coffeescript:"CoffeeScript",diff:"Diff",go:"Go",html:"HTML, XML",http:"HTTP",json:"JSON",java:"Java",javascript:"JavaScript",kotlin:"Kotlin",less:"Less",lua:"Lua",makefile:"Makefile",markdown:"Markdown",nginx:"Nginx",objectivec:"Objective-C",php:"PHP",perl:"Perl",properties:"Properties",python:"Python",ruby:"Ruby",rust:"Rust",scss:"SCSS",sql:"SQL",shell:"Shell Session",swift:"Swift",toml:"TOML, also INI",typescript:"TypeScript",yaml:"YAML",plaintext:"Plaintext"};class Hp{constructor({data:t,api:n,config:r,readOnly:i}){this.api=n,this.readOnly=i,this.config={themeName:r.themeName&&typeof r.themeName=="string"?r.themeName:"",themeURL:r.themeURL&&typeof r.themeURL=="string"?r.themeURL:"",useDefaultTheme:r.useDefaultTheme&&typeof r.useDefaultTheme=="string"&&$p.includes(r.useDefaultTheme.toLowerCase())?r.useDefaultTheme:"dark"},this.data={code:t.code&&typeof t.code=="string"?t.code:"",language:t.language&&typeof t.language=="string"?t.language:"Auto-detect",theme:t.theme&&typeof t.theme=="string"?t.theme:this._getThemeURLFromConfig()},this.highlightScriptID="highlightJSScriptElement",this.highlightCSSID="highlightJSCSSElement",this.codeArea=document.createElement("div"),this.selectInput=document.createElement("input"),this.selectDropIcon=document.createElement("i"),this._injectHighlightJSScriptElement(),this._injectHighlightJSCSSElement(),this.api.listeners.on(window,"click",this._closeAllLanguageSelects,!0)}static get isReadOnlySupported(){return!0}static get sanitize(){return{code:!0,language:!1,theme:!1}}static get toolbox(){const t=Le({render:()=>De(xd,{size:18,strokeWidth:1.5,color:"black"})}),n=document.createElement("div");return t.mount(n),{title:"CodeBox",icon:n.innerHTML}}static get displayInToolbox(){return!0}static get enableLineBreaks(){return!0}render(){const t=document.createElement("pre"),n=this._createLanguageSelectElement();return t.setAttribute("class","codeBoxHolder"),this.codeArea.setAttribute("class",`codeBoxTextArea ${this.config.useDefaultTheme} ${this.data.language}`),this.codeArea.setAttribute("contenteditable","true"),this.codeArea.innerHTML=this.data.code,this.api.listeners.on(this.codeArea,"blur",r=>this._highlightCodeArea(r),!1),this.api.listeners.on(this.codeArea,"paste",r=>this._handleCodeAreaPaste(r),!1),t.appendChild(this.codeArea),!this.readOnly&&t.appendChild(n),t}save(t){return Object.assign(this.data,{code:this.codeArea.innerHTML,theme:this._getThemeURLFromConfig()})}validate(t){return!!t.code.trim()}destroy(){this.api.listeners.off(window,"click",this._closeAllLanguageSelects,!0),this.api.listeners.off(this.codeArea,"blur",t=>this._highlightCodeArea(t),!1),this.api.listeners.off(this.codeArea,"paste",t=>this._handleCodeAreaPaste(t),!1),this.api.listeners.off(this.selectInput,"click",t=>this._handleSelectInputClick(t),!1)}_createLanguageSelectElement(){const t=document.createElement("div"),n=document.createElement("div"),r=Object.entries(Tp);return t.setAttribute("class","codeBoxSelectDiv"),this.selectDropIcon.setAttribute("class",`codeBoxSelectDropIcon ${this.config.useDefaultTheme}`),this.selectDropIcon.innerHTML="&#8595;",this.selectInput.setAttribute("class",`codeBoxSelectInput ${this.config.useDefaultTheme}`),this.selectInput.setAttribute("type","text"),this.selectInput.setAttribute("readonly","true"),this.selectInput.value=this.data.language,this.api.listeners.on(this.selectInput,"click",i=>this._handleSelectInputClick(i),!1),n.setAttribute("class","codeBoxSelectPreview"),r.forEach(i=>{const s=document.createElement("p");s.setAttribute("class",`codeBoxSelectItem ${this.config.useDefaultTheme}`),s.setAttribute("data-key",i[0]),s.textContent=i[1],this.api.listeners.on(s,"click",l=>this._handleSelectItemClick(l,i),!1),n.appendChild(s)}),t.appendChild(this.selectDropIcon),t.appendChild(this.selectInput),t.appendChild(n),t}_highlightCodeArea(t){window.hljs.highlightBlock(this.codeArea)}_handleCodeAreaPaste(t){t.stopPropagation()}_handleSelectInputClick(t){t.target.nextSibling.classList.toggle("codeBoxShow")}_handleSelectItemClick(t,n){t.target.parentNode.parentNode.querySelector(".codeBoxSelectInput").value=n[1],t.target.parentNode.classList.remove("codeBoxShow"),this.codeArea.removeAttribute("class"),this.data.language=n[0],this.codeArea.setAttribute("class",`codeBoxTextArea ${this.config.useDefaultTheme} ${this.data.language}`),window.hljs.highlightBlock(this.codeArea)}_closeAllLanguageSelects(){const t=document.querySelectorAll(".codeBoxSelectPreview");for(let n=0,r=t.length;n<r;n++)t[n].classList.remove("codeBoxShow")}_injectHighlightJSScriptElement(){const t=document.querySelector(`#${this.highlightScriptID}`),n="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js";if(t)t.setAttribute("src",n);else{const r=document.createElement("script"),i=document.querySelector("head");r.setAttribute("src",n),r.setAttribute("id",this.highlightScriptID),i&&i.appendChild(r)}}_injectHighlightJSCSSElement(){const t=document.querySelector(`#${this.highlightCSSID}`);let n=this._getThemeURLFromConfig();if(t)t.setAttribute("href",n);else{const r=document.createElement("link"),i=document.querySelector("head");r.setAttribute("rel","stylesheet"),r.setAttribute("href",n),r.setAttribute("id",this.highlightCSSID),i&&i.appendChild(r)}}_getThemeURLFromConfig(){let t=`https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/atom-one-${this.config.useDefaultTheme}.min.css`;return this.config.themeName&&(t=`https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/${this.config.themeName}.min.css`),this.config.themeURL&&(t=this.config.themeURL),t}}function si(e){os(ue({position:"bottom-right"},e))}function Mp(e){return as(e).value}function Vp(e){return e>999?(e/1e3).toFixed(1)+"k":e}function Ep(e){let t=parseInt(e);return t>1048576?(t/1048576).toFixed(2)+"M":t>1024?(t/1024).toFixed(2)+"K":t}function _t(e,t,n,r=null){r||(n=="check"?r="bg-surface-green-3 text-ink-white rounded-md p-px":n=="alert-circle"?r="bg-yellow-600 text-ink-white rounded-md p-px":r="bg-surface-red-5 text-ink-white rounded-md p-px"),si({title:e,text:Lp(t),icon:n,iconClasses:r,position:n=="check"?"bottom-right":"top-center",timeout:5})}function Pp(e){Oe(()=>e,t=>{if(t.value.title){if(t.value.title&&t.value.subtitle){document.title=`${t.value.title} | ${t.value.subtitle}`;return}if(t.value.title){document.title=`${t.value.title}`;return}}},{immediate:!0,deep:!0})}function Lp(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}function Fp(){return{header:{class:ls,config:{placeholder:"Header"}},quiz:Lc,assignment:fp,upload:Op,markdown:Sp,image:us,table:{class:ds,inlineToolbar:!0},paragraph:{class:cs,inlineToolbar:!0,config:{preserveBlank:!0}},codeBox:{class:Hp,config:{themeURL:"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/atom-one-dark.min.css",themeName:"atom-one-dark",useDefaultTheme:"dark"}},list:{class:ps,inlineToolbar:!0,config:{defaultStyle:"ordered"}},inlineCode:{class:fs,shortcut:"CMD+SHIFT+M"},embed:{class:hs,inlineToolbar:!1,config:{services:{youtube:{regex:/(?:https?:\/\/)?(?:www\.)?(?:(?:youtu\.be\/)|(?:youtube\.com)\/(?:v\/|u\/\w\/|embed\/|watch))(?:(?:\?v=)?([^#&?=]*))?((?:[?&]\w*=\w*)*)/,embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width:100%; height: 30rem;" frameborder="0" allowfullscreen></iframe>',height:320,width:580,id:([e,t])=>{if(!t&&e)return e;const n={start:"start",end:"end",t:"start",time_continue:"start",list:"list"};let r=t.slice(1).split("&").map(i=>{const[s,l]=i.split("=");return!e&&s==="v"?(e=l,null):!n[s]||l==="LL"||l.startsWith("RDMM")||l.startsWith("FL")?null:`${n[s]}=${l}`}).filter(i=>!!i);return e+"?"+r.join("&")}},vimeo:!0,codepen:!0,aparat:{regex:/(?:http[s]?:\/\/)?(?:www.)?aparat\.com\/v\/([^\/\?\&]+)\/?/,embedUrl:"https://www.aparat.com/video/video/embed/videohash/<%= remote_id %>/vt/frame",html:'<iframe style="margin: 0 auto; width: 100%; height: 25rem;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600},github:!0,slides:{regex:/https:\/\/docs\.google\.com\/presentation\/d\/([A-Za-z0-9_-]+)\/pub/,embedUrl:"https://docs.google.com/presentation/d/<%= remote_id %>/embed",html:"<iframe style='width: 100%; height: 30rem; border: 1px solid #D3D3D3; border-radius: 12px; margin: 1rem 0' frameborder='0' allowfullscreen='true'></iframe>"},drive:{regex:/https:\/\/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)\/view(\?.+)?/,embedUrl:"https://drive.google.com/file/d/<%= remote_id %>/preview",html:"<iframe style='width: 100%; height: 25rem; border: 1px solid #D3D3D3; border-radius: 12px;' frameborder='0' allowfullscreen='true'></iframe>"},docsPublic:{regex:/https:\/\/docs\.google\.com\/document\/d\/([A-Za-z0-9_-]+)\/edit(\?.+)?/,embedUrl:"https://docs.google.com/document/d/<%= remote_id %>/preview",html:"<iframe style='width: 100%; height: 40rem; border: 1px solid #D3D3D3; border-radius: 12px;' frameborder='0' allowfullscreen='true'></iframe>"},sheetsPublic:{regex:/https:\/\/docs\.google\.com\/spreadsheets\/d\/([A-Za-z0-9_-]+)\/edit(\?.+)?/,embedUrl:"https://docs.google.com/spreadsheets/d/<%= remote_id %>/preview",html:"<iframe style='width: 100%; height: 40rem; border: 1px solid #D3D3D3; border-radius: 12px;' frameborder='0' allowfullscreen='true'></iframe>"},slidesPublic:{regex:/https:\/\/docs\.google\.com\/presentation\/d\/([A-Za-z0-9_-]+)\/edit(\?.+)?/,embedUrl:"https://docs.google.com/presentation/d/<%= remote_id %>/embed",html:"<iframe style='width: 100%; height: 30rem; border: 1px solid #D3D3D3; border-radius: 12px; margin: 1rem 0;' frameborder='0' allowfullscreen='true'></iframe>"},codesandbox:{regex:/^https:\/\/codesandbox\.io\/(?:embed\/)?([A-Za-z0-9_-]+)(?:\?[^\/]*)?$/,embedUrl:"https://codesandbox.io/embed/<%= remote_id %>?view=editor+%2B+preview&module=%2Findex.html",html:"<iframe style='width: 100%; height: 500px; border: 0; border-radius: 4px; overflow: hidden;' sandbox='allow-mods allow-forms allow-popups allow-scripts allow-same-origin' frameborder='0' allowfullscreen='true'></iframe>"}}}}}}export{wd as C,Mr as F,Sr as J,Ad as P,$r as Q,Cn as T,Dn as X,Hr as Y,yn as _,dr as a,cc as b,$d as c,Tr as d,bs as e,Vp as f,Fp as g,_d as h,Ep as i,si as j,uc as k,Ip as p,_t as s,Pp as u};
