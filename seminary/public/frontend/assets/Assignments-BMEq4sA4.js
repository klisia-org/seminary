var q=Object.defineProperty,L=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var V=(l,s,o)=>s in l?q(l,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[s]=o,A=(l,s)=>{for(var o in s||(s={}))I.call(s,o)&&V(l,o,s[o]);if(x)for(var o of x(s))S.call(s,o)&&V(l,o,s[o]);return l},C=(l,s)=>L(l,U(s));import{i as F,r as h,x as z,m as M,n as E,ac as Y,l as p,b as G,d as w,o as y,f as _,j as r,e as a,w as v,_ as N,A as R,t as g,g as H,h as J,F as K}from"./index-Bp-UPm00.js";import{_ as O}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-BKdvViSe.js";import{a as k}from"./FormControl.vue_vue_type_script_setup_true_lang-D9NZV9wG.js";import{d as Q}from"./ListView-By0bEH-x.js";import{P as W}from"./plus-CEpg6gV_.js";import{P as X}from"./pencil-IevyI9q7.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-67bzkd8U.js";const Z={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ee={class:"md:w-3/4 md:mx-auto py-5 mx-5"},te={class:"grid grid-cols-3 gap-5 mb-5"},se={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},ae={class:"text-xl font-medium"},oe={class:"leading-5"},le={key:2,class:"flex justify-center my-5"},_e={__name:"Assignments",setup(l){const s=F("$user"),o=F("$dayjs"),u=h(""),m=h(""),d=h(""),c=z();M(()=>{var t,e;!((t=s.data)!=null&&t.is_moderator)&&!((e=s.data)!=null&&e.is_instructor)&&c.push({name:"Courses"}),u.value=c.currentRoute.value.query.title,d.value=c.currentRoute.value.query.course,m.value=c.currentRoute.value.query.type}),E([u,d,m],()=>{c.push({query:{title:u.value,course:d.value,type:m.value}}),T()});const T=()=>{n.update({filters:$.value}),n.reload()},$=p(()=>{var e,f;let t={};return u.value&&(t.title=["like",`%${u.value}%`]),d.value&&(t.course=d.value),m.value&&(t.type=m.value),(e=s.data)!=null&&e.is_moderator||(t.owner=(f=s.data)==null?void 0:f.email),t}),n=Y({doctype:"Assignment Activity",fields:["name","title","course","type","creation"],orderBy:"modified desc",cache:["assignments"],transform(t){return t.map(e=>C(A({},e),{creation:o(e.creation).fromNow()}))}}),j=p(()=>[{label:__("Title"),key:"title",width:2},{label:__("Course"),key:"course",width:1,align:"left"},{label:__("Type"),key:"type",width:1,align:"left"},{label:__("Created"),key:"creation",width:1,align:"center"}]),P=p(()=>["","Document","Image","PDF","URL","Text"].map(e=>({label:__(e),value:e}))),B=p(()=>n.data?Array.from(new Set(n.data.map(e=>e.course))).map(e=>({label:e,value:e})):[]),D=p(()=>[{label:"Assignments",route:{name:"Assignments"}}]);return(t,e)=>{var b;const f=G("router-link");return y(),w(K,null,[_("header",Z,[r(a(O),{items:D.value},null,8,["items"]),r(f,{to:{name:"AssignmentForm",params:{assignmentID:"new"}}},{default:v(()=>[r(a(N),{variant:"solid"},{prefix:v(()=>[r(a(W),{class:"w-4 h-4"})]),default:v(()=>[R(" "+g(t.__("New")),1)]),_:1})]),_:1})]),_("div",ee,[_("div",te,[r(a(k),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=i=>u.value=i),placeholder:t.__("Search by title")},null,8,["modelValue","placeholder"]),r(a(k),{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=i=>d.value=i),type:"select",options:B.value,placeholder:t.__("Course")},null,8,["modelValue","options","placeholder"]),r(a(k),{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=i=>m.value=i),type:"select",options:P.value,placeholder:t.__("Type")},null,8,["modelValue","options","placeholder"])]),(b=a(n).data)!=null&&b.length?(y(),H(a(Q),{key:0,columns:j.value,rows:a(n).data,"row-key":"name",options:{showTooltip:!1,selectable:!1,getRowRoute:i=>({name:"AssignmentForm",params:{assignmentID:i.name}})}},null,8,["columns","rows","options"])):(y(),w("div",se,[r(a(X),{class:"size-10 mx-auto stroke-1 text-ink-gray-4"}),_("div",ae,g(t.__("No assignments found")),1),_("div",oe,g(t.__('You have not created any assignments yet. To create a new assignment, click on the "New" button above.')),1)])),a(n).data&&a(n).hasNextPage?(y(),w("div",le,[r(a(N),{onClick:e[3]||(e[3]=i=>a(n).next())},{default:v(()=>[R(g(t.__("Load More")),1)]),_:1})])):J("",!0)])],64)}}};export{_e as default};
//# sourceMappingURL=Assignments-BMEq4sA4.js.map
