import{c as S,j as $,k as C,l as D,m as T,o as B}from"./frappe-ui-BC6vlBMo.js";import{bk as G,r as m,am as O,c as b,t as a,u as o,b as s,g as i,H as f,O as p,e as _,D as N,w as y,a as w}from"./vendor-CA0oFrry.js";import{_ as A}from"./MissingData-D9d09LT2.js";import{u as x}from"./index-aYBfEZmz.js";const E={key:0},R={key:0,class:"px-5 py-4"},V={class:"text-lg font-bold text-gray-700"},z={key:1},F={key:1,class:"flex flex-col items-center justify-center"},q={__name:"Grades",setup(H){x();const k=G("$user");m(0),x();let v=k.data.is_student,h=k.data.student;m([]),m(""),m({columns:[{label:"Course",key:"course"},{label:"Academic Term",key:"academic_term"}],rows:[]}),S({url:"seminary.seminary.api.get_student_programs",makeParams(){return{student:h}},onSuccess:l=>{u.rows=l.sort((e,t)=>e.academic_term<t.academic_term?-1:e.academic_term>t.academic_term?1:e.course_name<t.course_name?-1:e.course_name>t.course_name?1:0)},auto:!0});const u=O({rows:[],columns:[{label:"Course",key:"course_name",width:1},{label:"Academic Term",key:"academic_term",width:1},{label:"Credits",key:"credits",width:1},{label:"Grade Code",key:"pec_finalgradecode",width:1},{label:"Grade",key:"pec_finalgradenum",width:1},{label:"Status",key:"status",width:1}]}),g=b(()=>u.rows.reduce((e,t)=>{const r=t.program;return e[r]||(e[r]=[]),e[r].push(t),e},{})),j=b(()=>{const l=Object.entries(g.value).sort(([e,t],[r,n])=>{const c=t[0].pgmenrol_active,d=n[0].pgmenrol_active;return c>d?-1:c<d?1:e<r?-1:e>r?1:0});return Object.fromEntries(l)});return(l,e)=>o(v)?(s(),a("div",E,[e[2]||(e[2]=i("h2",{class:"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"}," My Transcripts ",-1)),Object.keys(g.value).length>0?(s(),a("div",R,[(s(!0),a(f,null,p(j.value,(t,r)=>(s(),a("div",{key:r},[i("h2",V,N(r),1),e[0]||(e[0]=i("br",null,null,-1)),_(o(B),{columns:u.columns,rows:t,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},{default:y(()=>[_(o($),null,{default:y(()=>[(s(!0),a(f,null,p(u.columns,n=>(s(),w(o(C),{key:n.key,item:n},null,8,["item"]))),128))]),_:1}),(s(!0),a(f,null,p(t,n=>(s(),w(o(D),{key:n.id,row:n},{default:y(({column:c,item:d})=>[_(o(T),{item:d,align:c.align},null,8,["item","align"])]),_:1},8,["row"]))),128))]),_:2},1032,["columns","rows"]),e[1]||(e[1]=i("br",null,null,-1))]))),128))])):(s(),a("div",z,[_(A,{message:"No grades found"})]))])):(s(),a("div",F,[...e[3]||(e[3]=[i("p",{class:"text-lg font-bold text-gray-500"},"Individual Student Transcripts are only displayed for Students",-1)])]))}};export{q as default};
//# sourceMappingURL=Grades-BYRXT7OI.js.map
