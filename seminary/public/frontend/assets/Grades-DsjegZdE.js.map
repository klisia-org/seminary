{"version":3,"file":"Grades-DsjegZdE.js","sources":["../../../../frontend/src/pages/Grades.vue"],"sourcesContent":["<template>\n  <div v-if=\"isStudent\">\n\n    <h2\n      class=\"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5\">\n      {{ __('My Transcripts') }}\n    </h2>\n    <div v-if=\"Object.keys(groupedData).length > 0\" class=\"px-5 py-4\">\n      <div v-for=\"(group, program) in sortedGroupedData\" :key=\"program\">\n        <h2 class=\"text-lg font-bold text-gray-700\">{{ program }}</h2>\n        <br>\n\n        <ListView :columns=\"tableData.columns\" :rows=\"group\" :options=\"{\n          selectable: false,\n          showTooltip: false,\n          onRowClick: () => { },\n        }\" row-key=\"id\">\n          <ListHeader>\n            <ListHeaderItem v-for=\"column in tableData.columns\" :key=\"column.key\" :item=\"column\" />\n          </ListHeader>\n          <ListRow v-for=\"row in group\" :key=\"row.id\" :row=\"row\" v-slot=\"{ column, item }\">\n            <ListRowItem :item=\"item\" :align=\"column.align\">\n            </ListRowItem>\n          </ListRow>\n        </ListView>\n        <br>\n      </div>\n    </div>\n    <div v-else>\n      <MissingData message=\"No grades found\" />\n    </div>\n  </div>\n  <div v-else class=\"flex flex-col items-center justify-center\">\n    <p class=\"text-lg font-bold text-gray-500\">{{ __('Individual Student Transcripts are only displayed for Students')\n      }}</p>\n  </div>\n</template>\n\n<script setup>\nimport { Dropdown, FeatherIcon, ListView, createResource, createListResource, ListHeader, ListHeaderItem, ListRow, ListRowItem, Button } from 'frappe-ui';\nimport { reactive, ref, computed, inject } from 'vue';\nimport MissingData from '@/components/MissingData.vue';\nimport { usersStore } from '../stores/user'\n\n\nlet studentInfo = usersStore()\n\n\nconst user = inject('$user')\n\nconst start = ref(0)\n\nlet userResource = usersStore()\n\nlet isStudent = user.data.is_student\n\nlet student = user.data.student\n\nconst allPrograms = ref([]);\nconst selectedProgram = ref(\"\");\n\nconst initialTableData = ref({\n  columns: [\n    {\n      label: __('Course'),\n      key: 'course',\n    },\n    {\n      label: __('Academic Term'),\n      key: 'academic_term',\n    }\n  ],\n  rows: [],\n});\n\nconst student_programs = createResource({\n  url: \"seminary.seminary.api.get_student_programs\",\n  makeParams() {\n    return {\n      student: student\n    }\n  },\n  onSuccess: (response) => {\n\n    tableData.rows = response.sort((a, b) => {\n      if (a.academic_term < b.academic_term) return -1;\n      if (a.academic_term > b.academic_term) return 1;\n      if (a.course_name < b.course_name) return -1;\n      if (a.course_name > b.course_name) return 1;\n      return 0;\n    });\n  },\n  auto: true\n});\n\nconst tableData = reactive({\n  rows: [],\n  columns: [\n\n    {\n      label: __('Course'),\n      key: 'course_name',\n      width: 1,\n    },\n    {\n      label: __('Academic Term'),\n      key: 'academic_term',\n      width: 1,\n    },\n    {\n      label: __('Credits'),\n      key: 'credits',\n      width: 1,\n    },\n    {\n      label: __('Grade Code'),\n      key: 'pec_finalgradecode',\n      width: 1,\n    },\n    {\n      label: __('Grade'),\n      key: 'pec_finalgradenum',\n      width: 1,\n    },\n    {\n      label: __('Status'),\n      key: 'status',\n      width: 1,\n    },\n  ],\n});\n\nconst groupedData = computed(() => {\n  const grouped = tableData.rows.reduce((acc, row) => {\n    const program = row.program;\n    if (!acc[program]) {\n      acc[program] = [];\n    }\n    acc[program].push(row);\n    return acc;\n  }, {});\n\n  return grouped;\n});\nconst sortedGroupedData = computed(() => {\n  const sorted = Object.entries(groupedData.value).sort(([programA, groupA], [programB, groupB]) => {\n    const activeA = groupA[0].pgmenrol_active;\n    const activeB = groupB[0].pgmenrol_active;\n    if (activeA > activeB) return -1;\n    if (activeA < activeB) return 1;\n    if (programA < programB) return -1;\n    if (programA > programB) return 1;\n    return 0;\n  });\n  return Object.fromEntries(sorted);\n});\n</script>"],"names":["usersStore","user","inject","ref","isStudent","student","createResource","response","tableData","a","b","reactive","groupedData","computed","acc","row","program","sortedGroupedData","sorted","programA","groupA","programB","groupB","activeA","activeB","_unref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","__","_openBlock","_hoisted_3","_Fragment","_renderList","group","_hoisted_4","_createVNode","ListView","ListHeader","column","_createBlock","ListHeaderItem","ListRow","item","ListRowItem","_hoisted_5","MissingData","_hoisted_6","_hoisted_7"],"mappings":"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"}