{"version":3,"file":"ExamSubmission-DR_2oyCf.js","sources":["../../../../frontend/src/components/ExamQuestionEditor.vue","../../../../frontend/src/pages/ExamSubmission.vue"],"sourcesContent":["<template>\n  <TextEditor\n    :content=\"internalContent\"\n    :key=\"questionId\"\n    :editable=\"editable\"\n    :fixedMenu=\"true\"\n    :label=\"`Comment for Question ${questionId}`\"\n    :editorClass=\"'ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none'\"\n    @change=\"updateContent\"\n  />\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { TextEditor } from 'frappe-ui'\n\n\nconst props = defineProps({\n  questionId: {\n    type: String,\n    required: true,\n  },\n\n  content: {\n    type: String,\n    default: '',\n  },\n  editable: {\n    type: Boolean,\n    default: true,\n  }\n})\n\nconst emit = defineEmits(['change'])\nconsole.log('Props:', props)\n// Hold the editor content as a reactive string. This will be used by the TextEditor.\nconst internalContent = ref(props.content)\n\n// Watch for changes to the content prop and update internalContent accordingly.\nwatch(() => props.content, (newContent, oldContent) => {\n  if (newContent !== oldContent) {\n    internalContent.value = newContent\n  }\n})\n\nconst updateContent = (val) => {\n  internalContent.value = val\n  emit('change', val)\n}\n</script>","<template>\n  <header class=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\">\n    <Breadcrumbs v-if=\"submisisonDetails.doc\" :items=\"breadcrumbs\" />\n    <div class=\"space-x-2\">\n      <Badge v-if=\"submisisonDetails.isDirty\" :label=\"__('Not Saved')\" variant=\"subtle\" theme=\"orange\" />\n      <Button variant=\"solid\" @click=\"validateSubmission()\">\n        {{ __('Save') }}\n      </Button>\n    </div>\n  </header>\n  <div class=\"flex items-center justify-between mb-5\">\n    <!-- Previous Button -->\n    <Button variant=\"subtle\" :disabled=\"currentIndex === 0\" @click=\"navigateToSubmission(currentIndex - 1)\">\n      {{ __('Previous') }}\n    </Button>\n\n    <!-- Dropdown for All Submissions -->\n    <div class=\"w-1/3\">\n      <label for=\"submissionDropdown\" class=\"block text-sm font-medium text-gray-700\">\n        {{ __('Select Submission') }}\n      </label>\n      <select id=\"submissionDropdown\" v-model=\"currentSubmission\"\n        @change=\"navigateToSubmissionByName(currentSubmission)\"\n        class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\">\n        <option v-for=\"submission in submissionlist.data\" :key=\"submission.name\" :value=\"submission.name\">\n          {{ submission.member_name }}\n        </option>\n      </select>\n    </div>\n\n    <!-- Next Button -->\n    <Button variant=\"subtle\" :disabled=\"!submissionlist.data || currentIndex === submissionlist.data.length - 1\"\n      @click=\"navigateToSubmission(currentIndex + 1)\">\n      {{ __('Next') }}\n    </Button>\n  </div>\n  <div v-if=\"submisisonDetails.doc\" class=\"w-2/3 mx-auto py-5 space-y-5\">\n    <div class=\"grid grid-cols-3 gap-5\">\n      <!-- Left Section (2/3 width) -->\n      <div class=\"col-span-2 space-y-4\">\n        <div class=\"text-xl font-semibold text-ink-gray-9\">\n          {{ submisisonDetails.doc.member_name }}\n        </div>\n        <div class=\"space-y-4 border p-5 rounded-md\">\n          <div class=\"flex items-center justify-between py-4\">\n            <!-- Exam Percentage -->\n            <div class=\"text-center ml-5\">\n              <div class=\"text-3xl font-bold text-ink-gray-9\">\n                {{ submisisonDetails.doc.percentage || 0 }}%\n              </div>\n              <div class=\"text-sm text-ink-gray-5\">\n                Score\n              </div>\n            </div>\n\n            <!-- Score and Time Taken -->\n            <div class=\"text-center\">\n              <div class=\"text-3xl font-semibold text-ink-gray-9\">\n                {{ submisisonDetails.doc.score }}\n              </div>\n              <div class=\"text-sm text-ink-gray-5\">\n                {{ __('Out of') }} {{ submisisonDetails.doc.score_out_of }} {{ __('Points') }}\n              </div>\n            </div>\n            <div class=\"text-center mr-5\">\n              <div class=\"text-3xl font-semibold text-ink-gray-9 mt-2\">\n                {{ formatTime(submisisonDetails.doc.time_taken) }}\n              </div>\n              <div class=\"text-sm text-ink-gray-5\">\n                {{ __('Time taken') }}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Questions Section -->\n        <div v-for=\"(row, index) in submisisonDetails.doc.result\" :key=\"index\" class=\"border p-5 rounded-md space-y-4\">\n          {{ console.log(row) }}\n          <!-- Question Title -->\n          <!-- Question Title -->\n          <div class=\"space-y-1\">\n            <div class=\"font-semibold text-ink-gray-9\">\n              {{ __('Question') }} {{ index + 1 }}:\n            </div>\n            <div class=\"leading-5 text-ink-gray-9\" v-html=\"row.question_name\"></div>\n          </div>\n          <!-- Answer -->\n          <div class=\"leading-5 text-ink-gray-7 space-x-1\">\n            <span> {{ __('Your Answer') }}: </span>\n            <span v-html=\"row.answer\"></span>\n          </div>\n          <!-- Points and Buttons -->\n          <div class=\"flex items-center justify-end space-x-5\">\n            <!-- Buttons for Auto-Grading -->\n            <div class=\"flex items-center space-x-2\">\n              <Button variant=\"solid\" theme=\"green\" size=\"sm\" @click=\"setPoints(row, row.points_out_of)\">\n                <Check class=\"w-4 h-4\" />\n              </Button>\n              <Button variant=\"solid\" theme=\"red\" size=\"sm\" @click=\"setPoints(row, 0)\">\n                <X class=\"w-4 h-4\" />\n              </Button>\n            </div>\n\n            <!-- Points Input -->\n            <div class=\"flex items-center space-x-2\">\n              <FormControl v-model=\"row.points\" type=\"number\" class=\"w-20 text-right\"\n                @change=\"(val) => onPointsChange(row, val)\" />\n              <span class=\"text-sm text-ink-gray-7\">\n                / {{ parseInt(row.points_out_of, 10) }} {{ __('Points') }}\n              </span>\n            </div>\n          </div>\n          <!-- <TextEditor\n\t\t\t\t\t\t\t:content=\"row.comments\"\n\t\t\t\t\t\t\t:label=\"__('Comment')\"\n\t\t\t\t\t\t\t:placeholder=\"__('Add a comment')\"\n              :key=\"row.name\"\n\t\t\t\t\t\t\t:fixedMenu=\"true\"\n              :editable=\"true\"\n\t\t\t\t\t\t\t:editorClass=\"'ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none'\"\n\t\t\t\t\t\t\t@change=\"(val) => onCommentChange(row, val)\"\n\t\t\t\t\t\t</TextEditor> -->\n\n          <ExamQuestionEditor :questionId=\"row.name\" :content=\"row.comments\" :editable=\"true\"\n            @change=\"(val) => onCommentChange(row, val)\" <!-- Pass the updated value -->\n          </ExamQuestionEditor>\n\n\n        </div>\n      </div>\n\n\n      <!-- Right Section (1/3 width) -->\n      <div class=\"col-span-1 space-y-4\">\n        <div class=\"space-y-4 border p-5 rounded-md\">\n          <FormControl v-model=\"submisisonDetails.doc.fudge_points\" :label=\"__('Fudge Points')\" :disabled=\"false\" />\n          <FormControl v-model=\"submisisonDetails.doc.status\" :label=\"__('Status')\" type=\"select\" :options=\"[\n            {\n              label: __('Not Graded'),\n              value: 'Not Graded',\n            },\n            {\n              label: __('Graded'),\n              value: 'Graded',\n            },\n          ]\" :disabled=\"false\" />\n        </div>\n        <div class=\"space-y-4 border p-5 rounded-md\">\n          <Discussions :title=\"__('Exam Comments')\" :doctype=\"'Exam Submission'\" :docname=\"submisisonDetails.doc.name\"\n            :key=\"submisisonDetails.doc.name\" type=\"single\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport {\n  createDocumentResource,\n  createResource,\n  Breadcrumbs,\n  FormControl,\n  Button,\n  Badge,\n  TextEditor,\n  toast\n} from 'frappe-ui'\nimport { computed, onBeforeUnmount, onMounted, inject, watch, watchEffect, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport Discussions from '@/components/Discussions.vue'\nimport ExamQuestionEditor from '@/components/ExamQuestionEditor.vue'\nimport { Check, X } from 'lucide-vue-next'\n\nconst router = useRouter()\nconst user = inject('$user')\n\nonMounted(() => {\n  if (!user.data?.is_instructor && !user.data?.is_moderator)\n    router.push({ name: 'Courses' })\n\n  window.addEventListener('keydown', keyboardShortcut)\n  console.log('Keyboard shortcut listener added')\n})\n\nonBeforeUnmount(() => {\n  window.removeEventListener('keydown', keyboardShortcut)\n  console.log('Keyboard shortcut listener removed')\n  // Clean up any other resources or listeners if needed\n})\n\nconst keyboardShortcut = (e) => {\n  if (\n    e.key === 's' &&\n    (e.ctrlKey || e.metaKey) &&\n    !e.target.classList.contains('ProseMirror')\n  ) {\n    saveSubmission()\n    e.preventDefault()\n  }\n}\n\nconst props = defineProps({\n  submission: {\n    type: String,\n    required: true,\n  },\n  courseName: {\n    type: String,\n    required: true,\n  },\n  examID: {\n    type: String,\n    required: true,\n  },\n})\n\nconst submissionlist = createResource({\n  url: 'frappe.client.get_list',\n  params: {\n    doctype: 'Exam Submission',\n    filters: [\n      ['exam', '=', props.examID],\n      ['course', '=', props.courseName],\n    ],\n    fields: ['name', 'member_name'], // Fetch only necessary fields\n    order_by: 'member_name asc', // Order by member name\n  },\n  auto: true,\n});\nconsole.log('Submission List:', submissionlist)\n\nconst submisisonDetails = createDocumentResource({\n  doctype: 'Exam Submission',\n  name: props.submission,\n  auto: true, // Automatically fetch the document\n  save: {\n    async submit() {\n      try {\n        // Send the document to the backend for saving\n        const response = await frappe.call('frappe.client.save', {\n          doc: submisisonDetails.doc, // Pass the entire document, including child records\n        });\n\n        // Update the local document with the saved data\n        submisisonDetails.doc = response.message;\n\n        // Mark the document as not dirty\n        submisisonDetails.isDirty = false;\n\n        // Show a success message\n        toast.success(__('Submission saved successfully'));\n      } catch (err) {\n        // Handle errors\n        console.error('Error saving submission:', err);\n        throw err; // Re-throw the error to be handled by the caller\n      }\n    },\n  },\n});\n\nconst course = createResource({\n  url: 'seminary.seminary.utils.get_course_details',\n  cache: ['course', props.courseName],\n  params: {\n    course: props.courseName,\n  },\n  auto: true,\n}) //Neded for the breadcrumbs\n\nconst breadcrumbs = computed(() => {\n  let items = [{ label: __('Courses'), route: { name: 'Courses' } }]\n  items.push({\n    label: course?.data?.course,\n    route: { name: 'CourseDetail', params: { courseName: props.courseName } },\n  })\n  items.push({\n    label: __('Gradebook'),\n    route: { name: 'Gradebook', params: { courseName: props.courseName } },\n  })\n  items.push({\n    label: __('Exam Submissions'),\n    route: { name: 'ExamSubmissionCS', params: { courseName: props.courseName, examID: props.examID } },\n  })\n  return items\n})\n\n\n\n\nconst formatTime = (seconds) => {\n  if (!seconds) return '00:00:00'; // Handle null or undefined values\n  const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');\n  const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');\n  const secs = (seconds % 60).toString().padStart(2, '0');\n  return `${hrs}:${mins}:${secs}`;\n};\nconst setPoints = (row, points) => {\n  row.points = points;\n  row.graded = true; // Mark the question as graded\n};\n\nconst updateScoreAndPercentage = () => {\n  // Calculate the total score by summing up all row.points\n  const totalScore = (submisisonDetails.doc.result || []).reduce((sum, row) => {\n    return sum + Number(row.points || 0); // Convert row.points to a number and default to 0 if undefined\n  }, 0);\n\n  // Update the score\n  submisisonDetails.doc.score = totalScore;\n\n  // Ensure score_out_of is treated as a float\n  const scoreOutOf = parseFloat(submisisonDetails.doc.score_out_of) || 1; // Default to 1 to avoid division by 0\n  const Fudge = parseFloat(submisisonDetails.doc.fudge_points) || 0; // Default to 0 if none\n  // Calculate the exam percentage\n  const percentage = ((totalScore / scoreOutOf) * 100) + Fudge;\n  submisisonDetails.doc.percentage = parseFloat(percentage.toFixed(2)); // Ensure it's a float and round to 2 decimal places\n};\n\n// Watch for changes in row.points or fudge_points\nconst pointsArray = computed(() => {\n  return submisisonDetails.doc.result ? submisisonDetails.doc.result.map((row) => row.points) : [];\n});\n\nwatchEffect(() => {\n  if (submisisonDetails.doc && submisisonDetails.doc.result) {\n    updateScoreAndPercentage(); // Recalculate score and percentage\n  }\n});\n\n// Watch for changes in fudge_points\nwatchEffect(() => {\n  if (submisisonDetails.doc && typeof submisisonDetails.doc.fudge_points !== 'undefined') {\n    updateScoreAndPercentage(); // Recalculate score and percentage\n  }\n});\n\nconst onCommentChange = (row, value) => {\n  row.comments = value; // Update the row.comments field\n\n};\n\nconst validateSubmission = async () => {\n  // Find ungraded questions\n  const ungradedQuestions = submisisonDetails.doc.result\n    .map((row, index) => (!row.graded ? `Question ${index + 1}` : null))\n    .filter((question) => question !== null);\n\n  if (ungradedQuestions.length > 0) {\n    // Show confirmation dialog for ungraded questions\n    const confirmSave = confirm(\n      __('The following questions need grading: {questions}. Do you want to save anyway?', { questions: ungradedQuestions.join(', ') })\n    );\n\n    if (!confirmSave) {\n      // User canceled the save\n      return;\n    }\n  } else {\n    // If all questions are graded, set the status to 'Graded'\n    submisisonDetails.doc.status = 'Graded';\n  }\n\n  // Proceed with saving\n  await saveSubmission();\n};\n\nconst onPointsChange = (row, value) => {\n  row.graded = true; // Mark the question as graded\n  console.log(`Updated Points for Question: ${row.points}`); // Debugging log\n};\n\nconst saveSubmission = async () => {\n  try {\n    console.log('Saving submission:', submisisonDetails.doc); // Debugging log\n    await submisisonDetails.save.submit(); // Save the document\n    toast.success(__('Submission saved successfully'));\n  } catch (err) {\n    console.error('Error saving submission:', err); // Debugging log\n    toast.error(err.messages?.[0] || err);\n  }\n};\n\nconst currentSubmission = ref(props.submission); // Track the current submission\nconst currentIndex = computed(() =>\n  submissionlist.data?.findIndex((submission) => submission.name === currentSubmission.value)\n);\n\nconst navigateToSubmission = (index) => {\n  if (index >= 0 && index < submissionlist.data.length) {\n    const submission = submissionlist.data[index];\n    router.push({\n      name: 'ExamSubmission',\n      params: {\n        submission: submission.name,\n        courseName: props.courseName,\n        examID: props.examID,\n      },\n    });\n  }\n};\n\nconst navigateToSubmissionByName = (submissionName) => {\n  const submission = submissionlist.data.find((sub) => sub.name === submissionName);\n  if (submission) {\n    router.push({\n      name: 'ExamSubmission',\n      params: {\n        submission: submission.name,\n        courseName: props.courseName,\n        examID: props.examID,\n      },\n    });\n  }\n};\n\nwatch(currentSubmission, async (newSubmission) => {\n  if (newSubmission) {\n    console.log('Navigating to submission:', newSubmission); // Debugging log\n    submisisonDetails.name = newSubmission; // Update the document name\n    await submisisonDetails.reload(); // Reload the document\n  }\n});\n</script>\n"],"names":["props","__props","emit","__emit","internalContent","ref","watch","newContent","oldContent","updateContent","val","_createBlock","_unref","TextEditor","router","useRouter","user","inject","onMounted","_a","_b","keyboardShortcut","onBeforeUnmount","saveSubmission","submissionlist","createResource","submisisonDetails","createDocumentResource","course","breadcrumbs","computed","items","formatTime","seconds","hrs","mins","secs","setPoints","row","points","updateScoreAndPercentage","totalScore","sum","scoreOutOf","Fudge","percentage","watchEffect","onCommentChange","value","validateSubmission","__async","ungradedQuestions","index","question","onPointsChange","toast","err","currentSubmission","currentIndex","submission","navigateToSubmission","navigateToSubmissionByName","submissionName","sub","newSubmission","_createElementVNode","_hoisted_1","Breadcrumbs","_hoisted_2","Badge","__","_createVNode","Button","_hoisted_3","_cache","$event","_hoisted_4","_hoisted_5","_toDisplayString","_openBlock","_createElementBlock","_Fragment","_renderList","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_createTextVNode","_hoisted_21","_hoisted_22","_hoisted_24","_hoisted_26","_hoisted_27","Check","X","_hoisted_28","FormControl","_hoisted_29","ExamQuestionEditor","_hoisted_30","_hoisted_31","_hoisted_32","Discussions"],"mappings":"0xBAiBA,MAAMA,EAAQC,EAgBRC,EAAOC,EACb,QAAQ,IAAI,SAAUH,CAAK,EAE3B,MAAMI,EAAkBC,EAAIL,EAAM,OAAO,EAGzCM,EAAM,IAAMN,EAAM,QAAS,CAACO,EAAYC,IAAe,CACjDD,IAAeC,IACjBJ,EAAgB,MAAQG,EAE5B,CAAC,EAED,MAAME,EAAiBC,GAAQ,CAC7BN,EAAgB,MAAQM,EACxBR,EAAK,SAAUQ,CAAG,CACpB,oBA/CEC,EAQEC,EAAAC,EAAA,EAAA,CAPC,QAAST,EAAA,MACT,IAAKH,EAAA,WACL,SAAUA,EAAA,SACV,UAAW,GACX,8BAA+BA,EAAA,UAAU,GACzC,YAAa,uPACb,SAAQQ,g/CCoKb,MAAMK,EAASC,EAAS,EAClBC,EAAOC,EAAO,OAAO,EAE3BC,EAAU,IAAM,SACV,GAACC,EAAAH,EAAK,OAAL,MAAAG,EAAW,gBAAiB,GAACC,EAAAJ,EAAK,OAAL,MAAAI,EAAW,eAC3CN,EAAO,KAAK,CAAE,KAAM,SAAS,CAAE,EAEjC,OAAO,iBAAiB,UAAWO,CAAgB,EACnD,QAAQ,IAAI,kCAAkC,CAChD,CAAC,EAEDC,EAAgB,IAAM,CACpB,OAAO,oBAAoB,UAAWD,CAAgB,EACtD,QAAQ,IAAI,oCAAoC,CAElD,CAAC,EAED,MAAMA,EAAoB,GAAM,CAE5B,EAAE,MAAQ,MACT,EAAE,SAAW,EAAE,UAChB,CAAC,EAAE,OAAO,UAAU,SAAS,aAAa,IAE1CE,EAAc,EACd,EAAE,eAAc,EAEpB,EAEMvB,EAAQC,EAeRuB,EAAiBC,EAAe,CACpC,IAAK,yBACL,OAAQ,CACN,QAAS,kBACT,QAAS,CACP,CAAC,OAAQ,IAAKzB,EAAM,MAAM,EAC1B,CAAC,SAAU,IAAKA,EAAM,UAAU,CACtC,EACI,OAAQ,CAAC,OAAQ,aAAa,EAC9B,SAAU,iBACd,EACE,KAAM,EACR,CAAC,EACD,QAAQ,IAAI,mBAAoBwB,CAAc,EAE9C,MAAME,EAAoBC,GAAuB,CAC/C,QAAS,kBACT,KAAM3B,EAAM,WACZ,KAAM,EAwBR,CAAC,EAEK4B,EAASH,EAAe,CAC5B,IAAK,6CACL,MAAO,CAAC,SAAUzB,EAAM,UAAU,EAClC,OAAQ,CACN,OAAQA,EAAM,UAClB,EACE,KAAM,EACR,CAAC,EAEK6B,EAAcC,EAAS,IAAM,OACjC,IAAIC,EAAQ,CAAC,CAAE,MAAO,GAAG,SAAS,EAAG,MAAO,CAAE,KAAM,UAAW,CAAE,EACjE,OAAAA,EAAM,KAAK,CACT,OAAOZ,EAAAS,GAAA,YAAAA,EAAQ,OAAR,YAAAT,EAAc,OACrB,MAAO,CAAE,KAAM,eAAgB,OAAQ,CAAE,WAAYnB,EAAM,WAAY,CAC3E,CAAG,EACD+B,EAAM,KAAK,CACT,MAAO,GAAG,WAAW,EACrB,MAAO,CAAE,KAAM,YAAa,OAAQ,CAAE,WAAY/B,EAAM,WAAY,CACxE,CAAG,EACD+B,EAAM,KAAK,CACT,MAAO,GAAG,kBAAkB,EAC5B,MAAO,CAAE,KAAM,mBAAoB,OAAQ,CAAE,WAAY/B,EAAM,WAAY,OAAQA,EAAM,MAAM,CAAE,CACrG,CAAG,EACM+B,CACT,CAAC,EAKKC,EAAcC,GAAY,CAC9B,GAAI,CAACA,EAAS,MAAO,WACrB,MAAMC,EAAM,KAAK,MAAMD,EAAU,IAAI,EAAE,WAAW,SAAS,EAAG,GAAG,EAC3DE,EAAO,KAAK,MAAOF,EAAU,KAAQ,EAAE,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EACnEG,GAAQH,EAAU,IAAI,SAAQ,EAAG,SAAS,EAAG,GAAG,EACtD,MAAO,GAAGC,CAAG,IAAIC,CAAI,IAAIC,CAAI,EAC/B,EACMC,EAAY,CAACC,EAAKC,IAAW,CACjCD,EAAI,OAASC,EACbD,EAAI,OAAS,EACf,EAEME,EAA2B,IAAM,CAErC,MAAMC,GAAcf,EAAkB,IAAI,QAAU,CAAA,GAAI,OAAO,CAACgB,EAAKJ,IAC5DI,EAAM,OAAOJ,EAAI,QAAU,CAAC,EAClC,CAAC,EAGJZ,EAAkB,IAAI,MAAQe,EAG9B,MAAME,EAAa,WAAWjB,EAAkB,IAAI,YAAY,GAAK,EAC/DkB,EAAQ,WAAWlB,EAAkB,IAAI,YAAY,GAAK,EAE1DmB,EAAeJ,EAAaE,EAAc,IAAOC,EACvDlB,EAAkB,IAAI,WAAa,WAAWmB,EAAW,QAAQ,CAAC,CAAC,CACrE,EAGoBf,EAAS,IACpBJ,EAAkB,IAAI,OAASA,EAAkB,IAAI,OAAO,IAAKY,GAAQA,EAAI,MAAM,EAAI,CAAA,CAC/F,EAEDQ,EAAY,IAAM,CACZpB,EAAkB,KAAOA,EAAkB,IAAI,QACjDc,GAEJ,CAAC,EAGDM,EAAY,IAAM,CACZpB,EAAkB,KAAO,OAAOA,EAAkB,IAAI,cAAiB,aACzEc,GAEJ,CAAC,EAED,MAAMO,EAAkB,CAACT,EAAKU,IAAU,CACtCV,EAAI,SAAWU,CAEjB,EAEMC,EAAqB,IAAYC,EAAA,sBAErC,MAAMC,EAAoBzB,EAAkB,IAAI,OAC7C,IAAI,CAACY,EAAKc,IAAYd,EAAI,OAAmC,KAA1B,YAAYc,EAAQ,CAAC,EAAU,EAClE,OAAQC,GAAaA,IAAa,IAAI,EAEzC,GAAIF,EAAkB,OAAS,GAM7B,GAAI,CAJgB,QAClB,GAAG,iFAAkF,CAAE,UAAWA,EAAkB,KAAK,IAAI,CAAC,CAAE,CACtI,EAIM,YAIFzB,EAAkB,IAAI,OAAS,SAIjC,MAAMH,EAAc,CACtB,GAEM+B,EAAiB,CAAChB,EAAKU,IAAU,CACrCV,EAAI,OAAS,GACb,QAAQ,IAAI,gCAAgCA,EAAI,MAAM,EAAE,CAC1D,EAEMf,EAAiB,IAAY2B,EAAA,4BACjC,GAAI,CACF,QAAQ,IAAI,qBAAsBxB,EAAkB,GAAG,EACvD,MAAMA,EAAkB,KAAK,SAC7B6B,EAAM,QAAQ,GAAG,+BAA+B,CAAC,CACnD,OAASC,EAAK,CACZ,QAAQ,MAAM,2BAA4BA,CAAG,EAC7CD,EAAM,QAAMpC,EAAAqC,EAAI,WAAJ,YAAArC,EAAe,KAAMqC,CAAG,CACtC,CACF,GAEMC,EAAoBpD,EAAIL,EAAM,UAAU,EACxC0D,EAAe5B,EAAS,IAAA,OAC5B,OAAAX,EAAAK,EAAe,OAAf,YAAAL,EAAqB,UAAWwC,GAAeA,EAAW,OAASF,EAAkB,OACvF,EAEMG,EAAwBR,GAAU,CACtC,GAAIA,GAAS,GAAKA,EAAQ5B,EAAe,KAAK,OAAQ,CACpD,MAAMmC,EAAanC,EAAe,KAAK4B,CAAK,EAC5CtC,EAAO,KAAK,CACV,KAAM,iBACN,OAAQ,CACN,WAAY6C,EAAW,KACvB,WAAY3D,EAAM,WAClB,OAAQA,EAAM,MACtB,CACA,CAAK,CACH,CACF,EAEM6D,EAA8BC,GAAmB,CACrD,MAAMH,EAAanC,EAAe,KAAK,KAAMuC,GAAQA,EAAI,OAASD,CAAc,EAC5EH,GACF7C,EAAO,KAAK,CACV,KAAM,iBACN,OAAQ,CACN,WAAY6C,EAAW,KACvB,WAAY3D,EAAM,WAClB,OAAQA,EAAM,MACtB,CACA,CAAK,CAEL,EAEA,OAAAM,EAAMmD,EAA0BO,GAAkBd,EAAA,sBAC5Cc,IACF,QAAQ,IAAI,4BAA6BA,CAAa,EACtDtC,EAAkB,KAAOsC,EACzB,MAAMtC,EAAkB,SAE5B,EAAC,wBAnaCuC,EAQS,SARTC,GAQS,CAPYtD,EAAAc,CAAA,EAAkB,SAArCf,EAAiEC,EAAAuD,EAAA,EAAA,OAAtB,MAAOtC,EAAA,mCAClDoC,EAKM,MALNG,GAKM,CAJSxD,EAAAc,CAAA,EAAkB,aAA/Bf,EAAmGC,EAAAyD,EAAA,EAAA,OAA1D,MAAOC,EAAAA,GAAE,WAAA,EAAe,QAAQ,SAAS,MAAM,sCACxFC,EAES3D,EAAA4D,CAAA,EAAA,CAFD,QAAQ,QAAS,uBAAOvB,iBAC9B,IAAgB,KAAbqB,EAAAA,GAAE,MAAA,CAAA,EAAA,CAAA,cAIXL,EAyBM,MAzBNQ,GAyBM,CAvBJF,EAES3D,EAAA4D,CAAA,EAAA,CAFD,QAAQ,SAAU,SAAUd,EAAA,QAAY,EAAS,QAAKgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEf,EAAqBF,EAAA,MAAY,CAAA,eAC/F,IAAoB,KAAjBY,EAAAA,GAAE,UAAA,CAAA,EAAA,CAAA,yBAIPL,EAWM,MAXNW,GAWM,CAVJX,EAEQ,QAFRY,GAEQC,EADHR,EAAAA,GAAE,mBAAA,CAAA,EAAA,CAAA,IAEPL,EAMS,SAAA,CAND,GAAG,0DAA8BR,EAAiB,MAAAkB,GACvD,SAAMD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEd,EAA2BJ,EAAA,KAAiB,GACrD,MAAM,qHACNsB,EAAA,EAAA,EAAAC,EAESC,EAAA,KAAAC,EAFoBtE,EAAAY,CAAA,EAAe,KAA7BmC,QAAfqB,EAES,SAAA,CAF0C,IAAKrB,EAAW,KAAO,MAAOA,EAAW,IACvF,EAAAmB,EAAAnB,EAAW,WAAW,EAAA,EAAAwB,EAAA,oBAJY1B,EAAA,KAAiB,MAU5Dc,EAGS3D,EAAA4D,CAAA,EAAA,CAHD,QAAQ,SAAU,SAAQ,CAAG5D,EAAAY,CAAA,EAAe,MAAQkC,EAAA,QAAiB9C,EAAAY,CAAA,EAAe,KAAK,OAAM,EACpG,QAAKkD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEf,EAAqBF,EAAA,MAAY,CAAA,eACzC,IAAgB,KAAbY,EAAAA,GAAE,MAAA,CAAA,EAAA,CAAA,2BAGE1D,EAAAc,CAAA,EAAkB,KAA7BqD,IAAAC,EAqHM,MArHNI,GAqHM,CApHJnB,EAmHM,MAnHNoB,GAmHM,CAjHJpB,EA0FM,MA1FNqB,GA0FM,CAzFJrB,EAEM,MAFNsB,GAEMT,EADDlE,KAAkB,IAAI,WAAW,EAAA,CAAA,EAEtCqD,EA8BM,MA9BNuB,GA8BM,CA7BJvB,EA4BM,MA5BNwB,GA4BM,CA1BJxB,EAOM,MAPNyB,GAOM,CANJzB,EAEM,MAFN0B,GAEMb,EADDlE,EAAAc,CAAA,EAAkB,IAAI,YAAU,CAAA,EAAQ,KAC7C,CAAA,EACAgD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAT,EAEM,MAAA,CAFD,MAAM,2BAA0B,UAErC,EAAA,KAIFA,EAOM,MAPN2B,GAOM,CANJ3B,EAEM,MAFN4B,GAEMf,EADDlE,KAAkB,IAAI,KAAK,EAAA,CAAA,EAEhCqD,EAEM,MAFN6B,GAEMhB,EADDR,EAAAA,cAAe,IAACQ,EAAGlE,EAAAc,CAAA,EAAkB,IAAI,YAAY,EAAG,MAAI4C,EAAAA,GAAE,QAAA,CAAA,EAAA,CAAA,IAGrEL,EAOM,MAPN8B,GAOM,CANJ9B,EAEM,MAFN+B,GAEMlB,EADD9C,EAAWpB,EAAAc,CAAA,EAAkB,IAAI,UAAU,CAAA,EAAA,CAAA,EAEhDuC,EAEM,MAFNgC,GAEMnB,EADDR,EAAAA,GAAE,YAAA,CAAA,EAAA,CAAA,eAObU,EAoDMC,EAAA,KAAAC,EApDsBtE,KAAkB,IAAI,OAAM,CAA3C0B,EAAKc,SAAlB4B,EAoDM,MAAA,CApDqD,IAAK5B,EAAO,MAAM,oCACxE8C,EAAApB,EAAA,QAAQ,IAAIxC,CAAG,GAAI,IAGtB,CAAA,EAAA2B,EAKM,MALNkC,GAKM,CAJJlC,EAEM,MAFNmC,GAEMtB,EADDR,EAAAA,gBAAiB,IAACQ,EAAG1B,EAAK,CAAA,EAAO,KACtC,CAAA,EACAa,EAAwE,MAAA,CAAnE,MAAM,4BAA4B,UAAQ3B,EAAI,4BAGrD2B,EAGM,MAHNoC,GAGM,CAFJpC,EAAuC,OAAA,KAAAa,EAA7BR,EAAAA,GAAE,aAAA,CAAA,EAAkB,KAAE,CAAA,EAChCL,EAAiC,OAAA,CAA3B,UAAQ3B,EAAI,qBAGpB2B,EAmBM,MAnBNqC,GAmBM,CAjBJrC,EAOM,MAPNsC,GAOM,CANJhC,EAES3D,EAAA4D,CAAA,EAAA,CAFD,QAAQ,QAAQ,MAAM,QAAQ,KAAK,KAAM,WAAOnC,EAAUC,EAAKA,EAAI,aAAa,cACtF,IAAyB,CAAzBiC,EAAyB3D,EAAA4F,CAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,wBAExBjC,EAES3D,EAAA4D,CAAA,EAAA,CAFD,QAAQ,QAAQ,MAAM,MAAM,KAAK,KAAM,QAAKG,GAAEtC,EAAUC,EAAG,CAAA,cACjE,IAAqB,CAArBiC,EAAqB3D,EAAA6F,EAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,0BAKtBxC,EAMM,MANNyC,GAMM,CALJnC,EACgD3D,EAAA+F,CAAA,EAAA,CAD1B,WAAArE,EAAI,OAAJ,sBAAAqC,GAAArC,EAAI,OAAMqC,EAAE,KAAK,SAAS,MAAM,kBACnD,SAASjE,GAAQ4C,EAAehB,CAAQ,2DAC3C2B,EAEO,OAFP2C,GAAsC,MAClC9B,EAAG,SAASxC,EAAI,cAAa,EAAA,CAAA,EAAQ,MAAIgC,EAAAA,GAAE,QAAA,CAAA,EAAA,CAAA,MAenDC,EAEqBsC,GAAA,CAFA,WAAYvE,EAAI,KAAO,QAASA,EAAI,SAAW,SAAU,GAC3E,SAAS5B,GAAQqC,EAAgBT,EAAK5B,CAAG,EAAG,OAAA,GAAK,KAAA,GAAK,IAAA,GAAI,QAAA,GAAQ,MAAA,GAAM,KAAA,4DAS/EuD,EAkBM,MAlBN6C,GAkBM,CAjBJ7C,EAYM,MAZN8C,GAYM,CAXJxC,EAA0G3D,EAAA+F,CAAA,EAAA,YAApF/F,EAAAc,CAAA,EAAkB,IAAI,kDAAtBd,EAAAc,CAAA,EAAkB,IAAI,aAAYiD,GAAG,MAAOL,EAAAA,GAAE,cAAA,EAAmB,SAAU,mCACjGC,EASuB3D,EAAA+F,CAAA,EAAA,YATD/F,EAAAc,CAAA,EAAkB,IAAI,4CAAtBd,EAAAc,CAAA,EAAkB,IAAI,OAAMiD,GAAG,MAAOL,EAAAA,GAAE,QAAA,EAAY,KAAK,SAAU,QAAO,QAAuCA,EAAAA,GAAE,YAAA,6BAAqGA,EAAAA,GAAE,QAAA,mBAS5O,SAAU,+CAEhBL,EAGM,MAHN+C,GAGM,MAFJrG,EACoDsG,GAAA,CADtC,MAAO3C,EAAAA,GAAE,eAAA,EAAoB,QAAS,kBAAoB,QAAS1D,EAAAc,CAAA,EAAkB,IAAI,KACpG,IAAKd,EAAAc,CAAA,EAAkB,IAAI,KAAM,KAAK"}