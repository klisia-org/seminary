import{u as g,r as m,b as S,d as j,l as w,e as l,c as n,a as u,F as _,k as f,g as $,i as T,o as s,t as B,h as y,w as p,f as x}from"./index-D2hg7nHX.js";import{a as D,_ as G,c as N,b as O,d as V}from"./ListView-6JS4BnER.js";const A={key:0},E={key:0,class:"px-5 py-4"},F={class:"text-lg font-bold text-gray-700"},R={key:2,class:"flex flex-col items-center justify-center"},M={__name:"Grades",setup(z){g();const k=T("$user");m(0),g();let v=k.data.is_student,h=k.data.student;m([]),m(""),m({columns:[{label:"Course",key:"course"},{label:"Academic Term",key:"academic_term"}],rows:[]}),S({url:"seminary.seminary.api.get_student_programs",makeParams(){return{student:h}},onSuccess:o=>{i.rows=o.sort((e,t)=>e.academic_term<t.academic_term?-1:e.academic_term>t.academic_term?1:e.course_name<t.course_name?-1:e.course_name>t.course_name?1:0)},auto:!0});const i=j({rows:[],columns:[{label:"Course",key:"course_name",width:1},{label:"Academic Term",key:"academic_term",width:1},{label:"Credits",key:"credits",width:1},{label:"Grade Code",key:"pec_finalgradecode",width:1},{label:"Grade",key:"pec_finalgradenum",width:1},{label:"Status",key:"status",width:1}]}),b=w(()=>i.rows.reduce((e,t)=>{const r=t.program;return e[r]||(e[r]=[]),e[r].push(t),e},{})),C=w(()=>{const o=Object.entries(b.value).sort(([e,t],[r,a])=>{const c=t[0].pgmenrol_active,d=a[0].pgmenrol_active;return c>d?-1:c<d?1:e<r?-1:e>r?1:0});return Object.fromEntries(o)});return(o,e)=>l(v)?(s(),n("div",A,[e[2]||(e[2]=u("h2",{class:"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"}," My Transcripts ",-1)),Object.keys(b.value).length>0?(s(),n("div",E,[(s(!0),n(_,null,f(C.value,(t,r)=>(s(),n("div",{key:r},[u("h2",F,B(r),1),e[0]||(e[0]=u("br",null,null,-1)),y(l(V),{columns:i.columns,rows:t,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},{default:p(()=>[y(l(D),null,{default:p(()=>[(s(!0),n(_,null,f(i.columns,a=>(s(),x(l(G),{key:a.key,item:a},null,8,["item"]))),128))]),_:1}),(s(!0),n(_,null,f(t,a=>(s(),x(l(O),{key:a.id,row:a},{default:p(({column:c,item:d})=>[y(l(N),{item:d,align:c.align},null,8,["item","align"])]),_:2},1032,["row"]))),128))]),_:2},1032,["columns","rows"]),e[1]||(e[1]=u("br",null,null,-1))]))),128))])):$("",!0)])):(s(),n("div",R,e[3]||(e[3]=[u("p",{class:"text-lg font-bold text-gray-500"},"Individual Student Transcripts are only displayed for Students",-1)])))}};export{M as default};
