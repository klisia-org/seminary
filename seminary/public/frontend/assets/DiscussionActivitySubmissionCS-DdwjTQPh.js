var T=Object.defineProperty,U=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var $=(o,s,u)=>s in o?T(o,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[s]=u,x=(o,s)=>{for(var u in s||(s={}))L.call(s,u)&&$(o,u,s[u]);if(V)for(var u of V(s))O.call(s,u)&&$(o,u,s[u]);return o},C=(o,s)=>U(o,z(s));import{c as E,B as H,u as K,w as M,j as J,k as Q,C as W,l as X,m as Y,n as Z,o as ee}from"./frappe-ui-Qp90XKmJ.js";import{bk as G,F as se,r as h,av as ae,I as te,c as k,a8 as ie,t as y,b as l,g as f,e as r,u as i,a as D,w as d,H as N,O as q,C as ue,D as v,ce as oe}from"./vendor-CrP-kEM1.js";import{_ as B}from"./Link-B7v9_qE9.js";const re={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},le={class:"md:w-3/4 md:mx-auto py-5 mx-5"},ne={class:"grid grid-cols-3 gap-5 mb-5"},ce={key:0},de={key:1},me={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},_e={class:"text-xl font-medium"},pe={class:"leading-5"},he={__name:"DiscussionActivitySubmissionCS",props:{discussionID:{type:String,required:!1},courseName:{type:String,required:!0}},setup(o){const s=G("$user"),u=G("$dayjs"),b=se(),S=h(""),n=h(""),c=h("");ae(()=>{var e,a;!((e=s.data)!=null&&e.is_instructor)&&!((a=s.data)!=null&&a.is_moderator)&&b.push({name:"Courses"}),discussionID.value=m.discussionID||b.currentRoute.value.query.discussionID,n.value=b.currentRoute.value.query.member,c.value=b.currentRoute.value.query.status,w()});const m=o,g=E({url:"seminary.seminary.utils.get_course_details",cache:["course",m.courseName],params:{course:m.courseName},auto:!0}),R=()=>{let e={course:m.courseName};return discussionID.value&&(e.disc_activity=discussionID.value),n.value&&(e.member=n.value),c.value&&(e.status=c.value),e},_=H({doctype:"Discussion Submission",fields:["name","disc_activity","member","student_name","score","percentage","disc_title","status","extra_credit","fudge_points"],orderBy:"creation desc",transform(e){return e.map(a=>C(x({},a),{creation:u(a.creation).fromNow()}))}});te([discussionID,n,c],()=>{b.push({query:{discussionID:discussionID.value,member:n.value,status:c.value}}),w()});const w=()=>{_.update({filters:R()}),_.reload()};k(()=>[{label:__("Student"),key:"student_name",width:1},{label:__("Discussion Title"),key:"disc_title",width:2},{label:__("Submitted"),key:"creation",width:1,align:"left"},{label:__("Score"),key:"score",width:1,align:"center"},{label:__("Status"),key:"status",width:1,align:"center"}]);const j=k(()=>[{label:"",value:""},{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Not Graded",value:"Not Graded"},{label:"Graded",value:"Graded"}]),F=e=>e==="Pass"||e==="Graded"?"green":e==="Not Graded"?"blue":"red",A=k(()=>{var a;let e=[{label:"Courses",route:{name:"Courses"}}];return e.push({label:(a=g==null?void 0:g.data)==null?void 0:a.course,route:{name:"CourseDetail",params:{courseName:m.courseName}}}),e.push({label:"Gradebook",route:{name:"Gradebook",params:{courseName:m.courseName}}}),e.push({label:"Discussion Submissions"}),e});return(e,a)=>{var I;const P=ie("router-link");return l(),y(N,null,[f("header",re,[r(i(K),{items:A.value},null,8,["items"])]),f("div",le,[f("div",ne,[r(B,{doctype:"Discussion Activity",modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=t=>S.value=t),placeholder:e.__("Discussion Activity")},null,8,["modelValue","placeholder"]),r(B,{doctype:"User",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n.value=t),placeholder:e.__("Student")},null,8,["modelValue","placeholder"]),r(i(M),{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value=t),type:"select",options:j.value,placeholder:e.__("Status")},null,8,["modelValue","options","placeholder"])]),i(_).loading||(I=i(_).data)!=null&&I.length?(l(),D(i(ee),{key:0,columns:e.submissionColumns,rows:i(_).data,rowKey:"name"},{default:d(()=>[r(i(J),{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2"},{default:d(()=>[(l(!0),y(N,null,q(e.submissionColumns,t=>(l(),D(i(Q),{item:t},null,8,["item"]))),256))]),_:1}),r(i(W),null,{default:d(()=>[(l(!0),y(N,null,q(i(_).data,t=>(l(),D(P,{to:{name:"DiscussionActivitySubmission",params:{discussionID:t.disc_activity,submissionName:t.name}}},{default:d(()=>[r(i(X),{row:t},{default:d(({column:p,item:ye})=>[r(i(Y),{item:t[p.key],align:p.align},{default:d(()=>[p.key=="status"?(l(),y("div",ce,[r(i(Z),{theme:F(t[p.key])},{default:d(()=>[ue(v(t[p.key]),1)]),_:2},1032,["theme"])])):(l(),y("div",de,v(t[p.key]),1))]),_:2},1032,["item","align"])]),_:2},1032,["row"])]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["columns","rows"])):(l(),y("div",me,[r(i(oe),{class:"size-8 mx-auto stroke-1 text-ink-gray-4"}),f("div",_e,v(e.__("No submissions")),1),f("div",pe,v(e.__("There are no submissions for this course.")),1)]))])],64)}}};export{he as default};
//# sourceMappingURL=DiscussionActivitySubmissionCS-DdwjTQPh.js.map
