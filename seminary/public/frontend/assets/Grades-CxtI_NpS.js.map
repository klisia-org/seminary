{"version":3,"file":"Grades-CxtI_NpS.js","sources":["../../../../frontend/src/pages/Grades.vue"],"sourcesContent":["<template>\n    <div v-if=\"isStudent\">\n\n        <h2 class=\"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5\">\n        My Transcripts\n        </h2>\n\t<div v-if=\"Object.keys(groupedData).length > 0\" class=\"px-5 py-4\">\n\t  <div v-for=\"(group, program) in sortedGroupedData\" :key=\"program\">\n        <h2 class=\"text-lg font-bold text-gray-700\">{{ program }}</h2>\n        <br>\n       \n\t\t<ListView :columns=\"tableData.columns\" :rows=\"group\" :options=\"{\n\t\t  selectable: false,\n\t\t  showTooltip: false,\n\t\t  onRowClick: () => { },\n\t\t}\" row-key=\"id\">\n\t\t  <ListHeader>\n\t\t\t<ListHeaderItem v-for=\"column in tableData.columns\" :key=\"column.key\" :item=\"column\" />\n\t\t  </ListHeader>\n\t\t  <ListRow v-for=\"row in group\" :key=\"row.id\" :row=\"row\" v-slot=\"{ column, item }\">\n\t\t\t<ListRowItem :item=\"item\" :align=\"column.align\">\n\t\t\t</ListRowItem>\n\t\t  </ListRow>\n\t\t</ListView>\n\t\t<br>\n\t  </div>\n\t</div>\n\t<div v-else>\n\t  <MissingData message=\"No grades found\" />\n\t</div>\n  </div>\n    <div v-else class=\"flex flex-col items-center justify-center\">\n\t\t<p class=\"text-lg font-bold text-gray-500\">Individual Student Transcripts are only displayed for Students</p>\n\t</div>\n  </template>\n\n<script setup>\nimport { Dropdown, FeatherIcon, ListView, createResource, createListResource, ListHeader, ListHeaderItem, ListRow, ListRowItem, Button } from 'frappe-ui';\nimport { reactive, ref, computed, inject } from 'vue';\nimport MissingData from '@/components/MissingData.vue';\nimport { usersStore} from '../stores/user'\n   \n    \nlet studentInfo = usersStore()   \n   \n   \nconst user = inject('$user')\n  \nconst start = ref(0)\n    \nlet userResource = usersStore()\n    \nlet isStudent = user.data.is_student\n   \nlet student = user.data.student\n\nconst allPrograms = ref([]);\nconst selectedProgram = ref(\"\");\n\nconst initialTableData = ref({\n  columns: [\n    {\n      label: 'Course',\n      key: 'course',\n    },\n    {\n      label: 'Academic Term',\n      key: 'academic_term',\n    }\n  ],\n  rows: [],\n});\n\nconst student_programs = createResource({\n  url: \"seminary.seminary.api.get_student_programs\",\n  makeParams() {\n    return {\n      student: student\n    }\n  },\n  onSuccess: (response) => {\n    \n    tableData.rows = response.sort((a, b) => {\n      if (a.academic_term < b.academic_term) return -1;\n      if (a.academic_term > b.academic_term) return 1;\n      if (a.course_name < b.course_name) return -1;\n      if (a.course_name > b.course_name) return 1;\n      return 0;\n    });\n  },\n  auto: true\n});\n\nconst tableData = reactive({\n  rows: [],\n  columns: [\n\n    {\n      label: 'Course',\n      key: 'course_name',\n      width: 1,\n    },\n    {\n      label: 'Academic Term',\n      key: 'academic_term',\n      width: 1,\n    },\n    {\n      label: 'Credits',\n      key: 'credits',\n      width: 1,\n    },\n    {\n      label: 'Grade Code',\n      key: 'pec_finalgradecode',\n      width: 1,\n    },\n    {\n      label: 'Grade',\n      key: 'pec_finalgradenum',\n      width: 1,\n    },\n    {\n      label: 'Status',\n      key: 'status',\n      width: 1,\n    },\n  ],\n});\n\nconst groupedData = computed(() => {\n  const grouped = tableData.rows.reduce((acc, row) => {\n    const program = row.program;\n    if (!acc[program]) {\n      acc[program] = [];\n    }\n    acc[program].push(row);\n    return acc;\n  }, {});\n \n  return grouped;\n});\nconst sortedGroupedData = computed(() => {\n  const sorted = Object.entries(groupedData.value).sort(([programA, groupA], [programB, groupB]) => {\n    const activeA = groupA[0].pgmenrol_active;\n    const activeB = groupB[0].pgmenrol_active;\n    if (activeA > activeB) return -1;\n    if (activeA < activeB) return 1;\n    if (programA < programB) return -1;\n    if (programA > programB) return 1;\n    return 0;\n  });\n  return Object.fromEntries(sorted);\n});\n</script>"],"names":["usersStore","user","inject","ref","isStudent","student","createResource","response","tableData","a","b","reactive","groupedData","computed","acc","row","program","sortedGroupedData","sorted","programA","groupA","programB","groupB","activeA","activeB","_unref","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_openBlock","_hoisted_2","_Fragment","_renderList","group","_hoisted_3","_toDisplayString","_createVNode","ListView","ListHeader","column","_createBlock","ListHeaderItem","ListRow","item","ListRowItem","_hoisted_4","MissingData","_hoisted_5"],"mappings":"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"}