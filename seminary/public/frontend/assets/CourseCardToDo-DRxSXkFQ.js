import{c as S,v as M}from"./frappe-ui-Qp90XKmJ.js";import{c as O,bk as P,a8 as U,t as o,z as l,u as e,b as s,D as n,g as c,H as I,O as T,aa as q,a as z,w as F,e as B,bT as H,bU as L,bQ as Q}from"./vendor-CrP-kEM1.js";import"./index--sl_9lWu.js";function R(r,a){var k,i,p,h;const u=(k=a==null?void 0:a.data)==null?void 0:k.is_student,d=(i=a==null?void 0:a.data)==null?void 0:i.is_instructor;console.log("useCourseToDo",r,(p=a==null?void 0:a.data)==null?void 0:p.name,u,d);const g=S({url:"seminary.seminary.utils.get_course_details",cache:["course",r],params:{course:r},auto:!0}),m=S({url:"seminary.seminary.utils.get_assessments",cache:["assessments",r],params:{course:r}}),_=S({url:"seminary.seminary.utils.get_missingassessments",cache:["missingassessments",r],params:{course:r,member:(h=a==null?void 0:a.data)==null?void 0:h.name}}),D=S({url:"seminary.seminary.utils.get_assessments_tograde",cache:["assessments_tograde",r],params:{course:r}}),y=O(()=>{var x,f;const C=((x=_.data)==null?void 0:x.length)||0,b=(m.data||[]).filter(v=>new Date(v.due_date)>=new Date).length,w=((f=D.data)==null?void 0:f.length)||0;if(u)return C+b;if(d)return w});return console.log("Course: ",r,"countToDoItems",y.value),{course:g,assessments:m,missingAssessments:_,assessmentsToGrade:D,isStudent:u,isInstructor:d,countToDoItems:y}}const $={key:0,class:"border-2 rounded-md min-w-80 p-5"},J={key:0,class:"text-3xl font-semibold text-ink-gray-9 text-center"},K={key:1,class:"text-ink-gray-7"},W={key:0,class:"missing-assessments mt-4"},X={class:"text-xl font-semibold text-ink-gray-9"},Y={key:1,class:"due-soon mt-4"},Z={key:2,class:"no-assessments mt-4"},N={class:"text-xl font-semibold text-ink-gray-9"},G={key:2,class:"text-ink-gray-7"},tt={key:3,class:"text-ink-gray-7"},et={class:"text-xl text-center font-semibold text-gray-500 mt-5"},st={__name:"CourseCardToDo",props:{course:{type:String,required:!0},singleCourse:{type:Boolean,default:!0}},setup(r){const a=P("$user"),u=r,{course:d,assessments:g,missingAssessments:m,assessmentsToGrade:_,isStudent:D,isInstructor:y}=R(u.course,a),k=i=>q(i).fromNow();return(i,p)=>{var C,b,w,x,f,v,A,E,V,j;const h=U("router-link");return e(d)?(s(),o("div",$,[r.singleCourse?(s(),o("div",J,n(i.__("To Do")),1)):l("",!0),(C=e(d).data)!=null&&C.course&&e(D)?(s(),o("div",K,[(b=e(m).data)!=null&&b.length?(s(),o("section",W,[c("h3",X,n(i.__("Missing Assessments")),1),c("ul",null,[(s(!0),o(I,null,T(e(m).data,t=>(s(),o("li",{key:t.id,class:"text-ink-gray-7"},n(t.title)+" (Due: "+n(k(t.due_date))+") ",1))),128))])])):l("",!0),(x=(w=e(g))==null?void 0:w.data)!=null&&x.length?(s(),o("section",Y,[p[0]||(p[0]=c("h3",null,"Due Soon",-1)),c("ul",null,[(s(!0),o(I,null,T(e(g).data.filter(t=>new Date(t.due_date)>=new Date).slice(0,5),t=>(s(),o("li",{key:t.id},n(t.title)+" (Due: "+n(k(t.due_date))+") ",1))),128))])])):l("",!0),!((f=e(m).data)!=null&&f.length)&&!((v=e(g).data)!=null&&v.length)?(s(),o("section",Z,[c("h3",N,n(i.__("Congrats! No assessments for now.")),1)])):l("",!0)])):l("",!0),(A=e(d).data)!=null&&A.course&&e(y)&&((E=e(_).data)!=null&&E.length)?(s(),o("div",G,[(s(!0),o(I,null,T(e(_).data,t=>(s(),o("div",{key:t.title,class:"text-ink-gray-7 mt-4"},[c("ul",null,[t.Type==="Exam"?(s(),z(h,{key:0,to:{name:"ExamSubmissionCS",params:{courseName:u.course,examID:t.assessmentID}},class:"text-ink-gray-7 mt-4 flex items-center space-x-2"},{default:F(()=>[B(e(H),{class:"h-4 w-4 stroke-1.5"}),c("span",null,n(t.title)+" ("+n(t.ToGrade)+" "+n(i.__(" to grade"))+")",1)]),_:2},1032,["to"])):t.Type==="Assignment"?(s(),z(h,{key:1,to:{name:"AssignmentSubmissionCS",params:{courseName:u.course,assignmentID:t.assessmentID}},class:"text-ink-gray-7 flex items-center space-x-2"},{default:F(()=>[B(e(L),{class:"h-4 w-4 stroke-1.5"}),c("span",null,n(t.title)+" ("+n(t.ToGrade)+" "+n(i.__(" to grade"))+")",1)]),_:2},1032,["to"])):l("",!0)])]))),128))])):l("",!0),(V=e(d).data)!=null&&V.course&&e(y)&&!((j=e(_).data)!=null&&j.length)?(s(),o("div",tt,[B(e(Q),{class:"size-20 mx-auto stroke-1 text-gray-500 mt-5"}),c("h3",et,n(i.__("Congrats! No assessments to grade for now.")),1)])):l("",!0)])):l("",!0)}}},rt=M(st,[["__scopeId","data-v-72fc3452"]]);export{rt as C,R as u};
//# sourceMappingURL=CourseCardToDo-DRxSXkFQ.js.map
