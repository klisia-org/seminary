var U=Object.defineProperty,z=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var C=(i,s,r)=>s in i?U(i,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[s]=r,G=(i,s)=>{for(var r in s||(s={}))O.call(s,r)&&C(i,r,s[r]);if($)for(var r of $(s))E.call(s,r)&&C(i,r,s[r]);return i},I=(i,s)=>z(i,L(s));import{c as H,B as K,u as M,w as J,j as Q,k as W,C as X,l as Y,m as Z,n as ee,o as se}from"./frappe-ui-DItCq3tW.js";import{bk as q,F as ae,r as k,av as te,I as ue,c as N,a8 as re,t as y,b as l,g as b,e as o,u,a as D,w as _,H as S,O as B,C as ie,D as g,cf as oe}from"./vendor-HNRiXHBS.js";import{_ as R}from"./Link-CDfjKa6y.js";const le={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ne={class:"md:w-3/4 md:mx-auto py-5 mx-5"},ce={class:"grid grid-cols-3 gap-5 mb-5"},de={key:0},me={key:1},_e={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},pe={class:"text-xl font-medium"},ve={class:"leading-5"},ke={__name:"DiscussionActivitySubmissionCS",props:{discussionID:{type:String,required:!1},courseName:{type:String,required:!0}},setup(i){const s=q("$user"),r=q("$dayjs"),f=ae(),n=k(""),c=k(""),d=k("");te(()=>{var e,a;!((e=s.data)!=null&&e.is_instructor)&&!((a=s.data)!=null&&a.is_moderator)&&f.push({name:"Courses"}),n.value=m.discussionID||f.currentRoute.value.query.discussionID,c.value=f.currentRoute.value.query.member,d.value=f.currentRoute.value.query.status,w()});const m=i,h=H({url:"seminary.seminary.utils.get_course_details",cache:["course",m.courseName],params:{course:m.courseName},auto:!0}),j=()=>{let e={coursesc:m.courseName};return n.value&&(e.disc_activity=n.value),c.value&&(e.member=c.value),d.value&&(e.status=d.value),e},p=K({doctype:"Discussion Submission",fields:["name","disc_activity","member","student_name","grade","percentage","disc_title","status","extra_credit","fudge_points","late"],orderBy:"creation desc",transform(e){return e.map(a=>I(G({},a),{creation:r(a.creation).fromNow()}))}});ue([n,c,d],()=>{f.push({query:{discussionID:n.value,member:c.value,status:d.value}}),w()});const w=()=>{p.update({filters:j()}),p.reload()},x=N(()=>[{label:__("Student"),key:"student_name",width:1},{label:__("Discussion Title"),key:"disc_title",width:2},{label:__("Submitted"),key:"creation",width:1,align:"left"},{label:__("Score"),key:"grade",width:1,align:"center"},{label:__("Status"),key:"status",width:1,align:"center"}]),F=N(()=>[{label:"",value:""},{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Not Graded",value:"Not Graded"},{label:"Graded",value:"Graded"}]),A=e=>e==="Pass"||e==="Graded"?"green":e==="Not Graded"?"blue":"red",P=N(()=>{var a;let e=[{label:"Courses",route:{name:"Courses"}}];return e.push({label:(a=h==null?void 0:h.data)==null?void 0:a.course,route:{name:"CourseDetail",params:{courseName:m.courseName}}}),e.push({label:"Gradebook",route:{name:"Gradebook",params:{courseName:m.courseName}}}),e.push({label:"Discussion Submissions"}),e});return(e,a)=>{var V;const T=re("router-link");return l(),y(S,null,[b("header",le,[o(u(M),{items:P.value},null,8,["items"])]),b("div",ne,[b("div",ce,[o(R,{doctype:"Discussion Activity",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=t=>n.value=t),placeholder:e.__("Discussion Activity")},null,8,["modelValue","placeholder"]),o(R,{doctype:"User",modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=t=>c.value=t),placeholder:e.__("Student")},null,8,["modelValue","placeholder"]),o(u(J),{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=t=>d.value=t),type:"select",options:F.value,placeholder:e.__("Status")},null,8,["modelValue","options","placeholder"])]),u(p).loading||(V=u(p).data)!=null&&V.length?(l(),D(u(se),{key:0,columns:x.value,rows:u(p).data,rowKey:"name"},{default:_(()=>[o(u(Q),{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2"},{default:_(()=>[(l(!0),y(S,null,B(x.value,t=>(l(),D(u(W),{item:t},null,8,["item"]))),256))]),_:1}),o(u(X),null,{default:_(()=>[(l(!0),y(S,null,B(u(p).data,t=>(l(),D(T,{to:{name:"DiscussionActivitySubmission",params:{discussionID:t.disc_activity,submissionName:t.name,courseName:m.courseName}}},{default:_(()=>[o(u(Y),{row:t},{default:_(({column:v,item:ye})=>[o(u(Z),{item:t[v.key],align:v.align},{default:_(()=>[v.key=="status"?(l(),y("div",de,[o(u(ee),{theme:A(t[v.key])},{default:_(()=>[ie(g(t[v.key]),1)]),_:2},1032,["theme"])])):(l(),y("div",me,g(t[v.key]),1))]),_:2},1032,["item","align"])]),_:2},1032,["row"])]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["columns","rows"])):(l(),y("div",_e,[o(u(oe),{class:"size-8 mx-auto stroke-1 text-ink-gray-4"}),b("div",pe,g(e.__("No submissions")),1),b("div",ve,g(e.__("There are no submissions for this course.")),1)]))])],64)}}};export{ke as default};
//# sourceMappingURL=DiscussionActivitySubmissionCS-iFcvA91O.js.map
