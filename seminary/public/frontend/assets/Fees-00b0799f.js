import{u as g,i as B,r as y,c as b,a as F,b as o,d as n,e as d,t as P,f as r,w as f,g as p,h as _,j as D,o as t,F as w,k as x}from"./index-02404b00.js";import{_ as N}from"./Badge.vue_vue_type_script_setup_true_lang-d264ce2d.js";import{_ as R,a as U,b as A,c as O,d as V}from"./ListView-8c58bb68.js";import{_ as z}from"./MissingData-fe4241bf.js";import"./FolderPlugin.vue_vue_type_style_index_0_scoped_84b7d54d_lang-09f2e4ee.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-7635d666.js";const M={key:0},T={key:0,class:"flex flex-col items-center justify-center p-3"},E={class:"text-lg font-bold text-gray-800"},L={key:1,class:"flex flex-col items-center justify-center"},q={key:2,class:"px-5 py-4"},G={key:3},H={key:1,class:"flex flex-col items-center justify-center"},ee={__name:"Fees",setup(J){let c=g();const h=B("$user");y(0),g();let v=h.data.is_student,k=h.data.student;b({url:"seminary.seminary.api.get_scholarship",params:{student:k},onSuccess:s=>{c.scholarships=s},auto:!0}),b({url:"seminary.seminary.api.get_student_invoices",params:{student:k},onSuccess:s=>{s=s.sort((a,m)=>{const e={Unpaid:0,Paid:1},i=e[a.status],u=e[m.status];if(i!==u)return i-u}),l.rows=s},auto:!0});const l=F({rows:[],columns:[{label:"Name",key:"name",width:1},{label:"Customer",key:"customer",width:1},{label:"Posting Date",key:"posting_date",width:1},{label:"Total Amount",key:"total",width:1},{label:"Outsdanding Amount",key:"outstanding_amount",width:1},{label:"Status",key:"status",width:1},{label:"Invoice",key:"cta",width:1}]}),S=y(null),$=y(!1),C=s=>{let a=`/api/method/frappe.utils.print_format.download_pdf?
		doctype=${encodeURIComponent("Sales Invoice")}
		&name=${encodeURIComponent(s.name)}
		&format=${encodeURIComponent("Standard")}
	`;window.open(a,"_blank")},I=s=>{S.value=s,$.value=!0};return(s,a)=>{const m=D("Button");return o(v)?(t(),n("div",M,[a[2]||(a[2]=d("h2",{class:"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"}," My Financial Status ",-1)),o(c).scholarships&&o(c).scholarships.length>0&&o(c).scholarships?(t(),n("div",T,[d("h2",E," Scholarship: "+P(o(c).scholarships[0].scholarship),1),a[0]||(a[0]=d("br",null,null,-1))])):(t(),n("div",L,[...a[1]||(a[1]=[d("p",{class:"text-lg font-bold text-gray-800"},null,-1)])])),l.rows.length>0?(t(),n("div",q,[l.rows.length>0?(t(),r(o(V),{key:0,columns:l.columns,rows:l.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},{default:f(()=>[_(o(U),null,{default:f(()=>[(t(!0),n(w,null,x(l.columns,e=>(t(),r(o(R),{key:e.key,item:e},null,8,["item"]))),128))]),_:1}),(t(!0),n(w,null,x(l.rows,e=>(t(),r(o(A),{key:e.id,row:e},{default:f(({column:i,item:u})=>[_(o(O),{item:u,align:i.align},{default:f(()=>[i.key==="status"?(t(),r(o(N),{key:0,variant:"subtle",theme:e.status==="Paid"?s.bg_color="green":s.bg_color="red",size:"md",label:u},null,8,["theme","label"])):p("",!0),i.key==="cta"&&e.status==="Paid"?(t(),r(m,{key:1,onClick:j=>C(e),class:"hover:bg-gray-900 hover:text-white","icon-left":"download",label:"Download Invoice"},null,8,["onClick"])):p("",!0),i.key==="cta"&&(e.status==="Unpaid"||e.status==="Overdue")?(t(),r(m,{key:2,onClick:j=>I(e),class:"hover:bg-gray-900 hover:text-white flex flex-column items-center justify-center","icon-left":"credit-card",label:"Pay Now"},null,8,["onClick"])):p("",!0)]),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1},8,["columns","rows"])):p("",!0)])):(t(),n("div",G,[_(z,{message:"No Fees found"})]))])):(t(),n("div",H,[...a[3]||(a[3]=[d("p",{class:"text-lg font-bold text-gray-500"},"Student Financial Status are only displayed for Students",-1)])]))}}};export{ee as default};
//# sourceMappingURL=Fees-00b0799f.js.map
