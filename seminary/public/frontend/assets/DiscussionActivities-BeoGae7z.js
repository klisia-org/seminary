var q=Object.defineProperty,P=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var k=(i,s,o)=>s in i?q(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o,g=(i,s)=>{for(var o in s||(s={}))T.call(s,o)&&k(i,o,s[o]);if(b)for(var o of b(s))z.call(s,o)&&k(i,o,s[o]);return i},x=(i,s)=>P(i,S(s));import{B as I,u as L,q as D,w as C,o as M}from"./frappe-ui-BC6vlBMo.js";import{bk as V,r as N,F as U,av as E,I as G,c as p,a8 as H,t as w,b as f,g as d,e as n,u as a,w as v,C as $,D as y,cc as Y,a as J,z as K,ce as O,H as Q}from"./vendor-CA0oFrry.js";const W={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},X={class:"md:w-3/4 md:mx-auto py-5 mx-5"},Z={class:"grid grid-cols-3 gap-5 mb-5"},ee={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},se={class:"text-xl font-medium"},te={class:"leading-5"},ae={key:2,class:"flex justify-center my-5"},ne={__name:"DiscussionActivities",setup(i){const s=V("$user"),o=V("$dayjs"),l=N(""),u=N(""),m=U();E(()=>{var t,e;!((t=s.data)!=null&&t.is_moderator)&&!((e=s.data)!=null&&e.is_instructor)&&m.push({name:"Courses"}),l.value=m.currentRoute.value.query.title,u.value=m.currentRoute.value.query.course}),G([l,u],()=>{m.push({query:{title:l.value,course:u.value}}),A()});const A=()=>{r.update({filters:B.value}),r.reload()},B=p(()=>{var e,_;let t={};return l.value&&(t.title=["like",`%${l.value}%`]),u.value&&(t.course=u.value),(e=s.data)!=null&&e.is_moderator||(t.owner=(_=s.data)==null?void 0:_.email),t}),r=I({doctype:"Discussion Activity",fields:["name","discussion_name","course","post_before","use_studentgroup","creation"],orderBy:"modified desc",cache:["discussions"],transform(t){return t.map(e=>x(g({},e),{creation:o(e.creation).fromNow()}))}}),F=p(()=>[{label:__("Title"),key:"discussion_name",width:2},{label:__("Course"),key:"course",width:1,align:"left"},{label:__("Post Before Reply is Mandatory"),key:"post_before",width:1,align:"left"},{label:__("Use Student Group"),key:"use_studentgroup",width:1,align:"left"},{label:__("Created"),key:"creation",width:1,align:"center"}]),R=p(()=>r.data?Array.from(new Set(r.data.map(e=>e.course))).map(e=>({label:e,value:e})):[]),j=p(()=>[{label:"Discussion Activities",route:{name:"DiscussionActivities"}}]);return(t,e)=>{var h;const _=H("router-link");return f(),w(Q,null,[d("header",W,[n(a(L),{items:j.value},null,8,["items"]),n(_,{to:{name:"DiscussionActivityForm",params:{discussionID:"new"}}},{default:v(()=>[n(a(D),{variant:"solid"},{prefix:v(()=>[n(a(Y),{class:"w-4 h-4"})]),default:v(()=>[$(" "+y(t.__("New")),1)]),_:1})]),_:1})]),d("div",X,[d("div",Z,[n(a(C),{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=c=>l.value=c),placeholder:t.__("Search by title")},null,8,["modelValue","placeholder"]),n(a(C),{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=c=>u.value=c),type:"select",options:R.value,placeholder:t.__("Course")},null,8,["modelValue","options","placeholder"])]),(h=a(r).data)!=null&&h.length?(f(),J(a(M),{key:0,columns:F.value,rows:a(r).data,"row-key":"name",options:{showTooltip:!1,selectable:!1,getRowRoute:c=>({name:"DiscussionActivityForm",params:{discussionID:c.name}})}},null,8,["columns","rows","options"])):(f(),w("div",ee,[n(a(O),{class:"size-10 mx-auto stroke-1 text-ink-gray-4"}),d("div",se,y(t.__("No discussion activities found")),1),d("div",te,y(t.__('You have not created any discussion activities yet. To create a new discussion activity, click on the "New" button above.')),1)])),a(r).data&&a(r).hasNextPage?(f(),w("div",ae,[n(a(D),{onClick:e[2]||(e[2]=c=>a(r).next())},{default:v(()=>[$(y(t.__("Load More")),1)]),_:1})])):K("",!0)])],64)}}};export{ne as default};
//# sourceMappingURL=DiscussionActivities-BeoGae7z.js.map
