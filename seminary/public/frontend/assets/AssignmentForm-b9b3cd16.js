var C=Object.defineProperty;var w=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var k=(i,t,n)=>t in i?C(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,d=(i,t)=>{for(var n in t||(t={}))F.call(t,n)&&k(i,n,t[n]);if(w)for(var n of w(t))$.call(t,n)&&k(i,n,t[n]);return i};import{i as L,x as T,a as B,m as N,$ as R,ad as U,c as j,n as P,l as x,d as K,e as r,h as u,b as l,f as M,w as g,g as O,t as p,A as b,F as z,j as Q,o as A,_ as h}from"./index-02404b00.js";import{_ as G}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-cfe3999d.js";import{a as S}from"./plus-8456e85b.js";import{s as _,_ as H}from"./index-e83657f9.js";import{e as f}from"./exam-ace3b5b7.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-7635d666.js";import"./Badge.vue_vue_type_script_setup_true_lang-d264ce2d.js";import"./Link-a70f2c53.js";import"./pencil-66476ae0.js";import"./FolderPlugin.vue_vue_type_style_index_0_scoped_84b7d54d_lang-09f2e4ee.js";import"./book-open-check-0ff0eb37.js";const J={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},W={class:"space-x-2"},X={class:"w-3/4 mx-auto py-5"},Y={class:"font-semibold mb-4"},Z={class:"grid grid-cols-2 gap-5 mt-4 mb-8"},ee={class:"text-xs text-ink-gray-5 mb-2"},pe={__name:"AssignmentForm",props:{assignmentID:{type:String,required:!1}},setup(i){const t=L("$user"),n=T(),c=i,a=B({title:"",type:"PDF",question:""});N(()=>{var e,s;c.assignmentID=="new"&&!((e=t.data)!=null&&e.is_moderator)&&!((s=t.data)!=null&&s.is_instructor)&&n.push({name:"Courses"}),c.assignmentID==="new"&&(f.prefillData.title&&(a.title=f.prefillData.title),f.prefillData.course&&(a.course=f.prefillData.course)),c.assignmentID!=="new"&&o.reload(),window.addEventListener("keydown",y)});const y=e=>{e.key==="s"&&(e.ctrlKey||e.metaKey)&&(v(),e.preventDefault())};R(()=>{window.removeEventListener("keydown",y)});const o=U({doctype:"Assignment Activity",name:c.assignmentID,auto:!1}),V=j({url:"frappe.client.insert",makeParams(e){return{doc:d({doctype:"Assignment Activity"},e)}},onSuccess(e){_(__("Success"),__("Assignment saved successfully"),"check"),n.push({name:"AssignmentForm",params:{assignmentID:e.name}})},onError(e){var s;_(__("Error"),__(((s=e.messages)==null?void 0:s[0])||e),"x")}}),v=()=>{c.assignmentID=="new"?V.submit(d({},a)):o.setValue.submit(d({},a),{onSuccess(e){_(__("Success"),__("Assignment saved successfully"),"check"),o.reload()},onError(e){var s;_(__("Error"),__(((s=e.messages)==null?void 0:s[0])||e),"x")}})};P(o,()=>{o.doc&&Object.keys(o.doc).forEach(e=>{a[e]=o.doc[e]})});const I=x(()=>[{label:__("Assignments"),route:{name:"Assignments"}},{label:o.doc?o.doc.title:__("New Assignment")}]),E=x(()=>[{label:"PDF",value:"PDF"},{label:"Image",value:"Image"},{label:"Document",value:"Document"},{label:"Text",value:"Text"},{label:"URL",value:"URL"}]);return(e,s)=>{var D;const q=Q("router-link");return A(),K(z,null,[r("header",J,[u(l(G),{items:I.value},null,8,["items"]),r("div",W,[(D=l(o).doc)!=null&&D.name?(A(),M(q,{key:0,to:{name:"AssignmentSubmissionList",query:{assignmentID:l(o).doc.name}}},{default:g(()=>[u(l(h),null,{default:g(()=>[b(p(e.__("Submission List")),1)]),_:1})]),_:1},8,["to"])):O("",!0),u(l(h),{variant:"solid",onClick:s[0]||(s[0]=m=>v())},{default:g(()=>[b(p(e.__("Save")),1)]),_:1})])]),r("div",X,[r("div",Y,p(e.__("Details")),1),r("div",Z,[u(l(S),{modelValue:a.title,"onUpdate:modelValue":s[1]||(s[1]=m=>a.title=m),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),u(l(S),{modelValue:a.type,"onUpdate:modelValue":s[2]||(s[2]=m=>a.type=m),type:"select",options:E.value,label:e.__("Type"),required:!0},null,8,["modelValue","options","label"])]),r("div",null,[r("div",ee,[b(p(e.__("Question"))+" ",1),s[4]||(s[4]=r("span",{class:"text-ink-red-3"},"*",-1))]),u(l(H),{content:a.question,onChange:s[3]||(s[3]=m=>a.question=m),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]"},null,8,["content"])])])],64)}}};export{pe as default};
//# sourceMappingURL=AssignmentForm-b9b3cd16.js.map
