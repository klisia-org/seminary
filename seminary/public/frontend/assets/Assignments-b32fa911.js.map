{"version":3,"file":"Assignments-b32fa911.js","sources":["../../../../frontend/src/pages/Assignments.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs :items=\"breadcrumbs\" />\n\t\t<router-link\n\t\t\t:to=\"{\n\t\t\t\tname: 'AssignmentForm',\n\t\t\t\tparams: {\n\t\t\t\t\tassignmentID: 'new',\n\t\t\t\t},\n\t\t\t}\"\n\t\t>\n\t\t\t<Button variant=\"solid\">\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<Plus class=\"w-4 h-4\" />\n\t\t\t\t</template>\n\t\t\t\t{{ __('New') }}\n\t\t\t</Button>\n\t\t</router-link>\n\t</header>\n\n\t<div class=\"md:w-3/4 md:mx-auto py-5 mx-5\">\n\t\t<div class=\"grid grid-cols-3 gap-5 mb-5\">\n\t\t\t<FormControl v-model=\"titleFilter\" :placeholder=\"__('Search by title')\" />\n\t\t\t<FormControl\n\t\t\t\tv-model=\"courseFilter\"\n\t\t\t\ttype=\"select\"\n\t\t\t\t:options=\"coursesListed\"\n\t\t\t\t:placeholder=\"__('Course')\"\n\t\t\t/>\n\t\t\t<FormControl\n\t\t\t\tv-model=\"typeFilter\"\n\t\t\t\ttype=\"select\"\n\t\t\t\t:options=\"assignmentTypes\"\n\t\t\t\t:placeholder=\"__('Type')\"\n\t\t\t/>\n\t\t</div>\n\t\t<ListView\n\t\t\tv-if=\"assignments.data?.length\"\n\t\t\t:columns=\"assignmentColumns\"\n\t\t\t:rows=\"assignments.data\"\n\t\t\trow-key=\"name\"\n\t\t\t:options=\"{\n\t\t\t\tshowTooltip: false,\n\t\t\t\tselectable: false,\n\t\t\t\tgetRowRoute: (row) => ({\n\t\t\t\t\tname: 'AssignmentForm',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tassignmentID: row.name,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t}\"\n\t\t>\n\t\t</ListView>\n\t\t<div\n\t\t\tv-else\n\t\t\tclass=\"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2\"\n\t\t>\n\t\t\t<Pencil class=\"size-10 mx-auto stroke-1 text-ink-gray-4\" />\n\t\t\t<div class=\"text-xl font-medium\">\n\t\t\t\t{{ __('No assignments found') }}\n\t\t\t</div>\n\t\t\t<div class=\"leading-5\">\n\t\t\t\t{{\n\t\t\t\t\t__(\n\t\t\t\t\t\t'You have not created any assignments yet. To create a new assignment, click on the \"New\" button above.'\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-if=\"assignments.data && assignments.hasNextPage\"\n\t\t\tclass=\"flex justify-center my-5\"\n\t\t>\n\t\t\t<Button @click=\"assignments.next()\">\n\t\t\t\t{{ __('Load More') }}\n\t\t\t</Button>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tBreadcrumbs,\n\tButton,\n\tcreateListResource,\n\tFormControl,\n\tListView,\n} from 'frappe-ui'\nimport { computed, inject, onMounted, ref, watch } from 'vue'\nimport { Plus, Pencil } from 'lucide-vue-next'\nimport { useRouter } from 'vue-router'\n\nconst user = inject('$user')\nconst dayjs = inject('$dayjs')\nconst titleFilter = ref('')\nconst typeFilter = ref('')\nconst courseFilter = ref('')\nconst router = useRouter()\n\nonMounted(() => {\n\tif (!user.data?.is_moderator && !user.data?.is_instructor) {\n\t\trouter.push({ name: 'Courses' })\n\t}\n\n\ttitleFilter.value = router.currentRoute.value.query.title\n\tcourseFilter.value = router.currentRoute.value.query.course\n\ttypeFilter.value = router.currentRoute.value.query.type\n})\n\nwatch([titleFilter, courseFilter, typeFilter], () => {\n\trouter.push({\n\t\tquery: {\n\t\t\ttitle: titleFilter.value,\n\t\t\tcourse: courseFilter.value,\n\t\t\ttype: typeFilter.value,\n\t\t},\n\t})\n\treloadAssignments()\n})\n\nconst reloadAssignments = () => {\n\tassignments.update({\n\t\tfilters: assignmentFilter.value,\n\t})\n\tassignments.reload()\n}\n\nconst assignmentFilter = computed(() => {\n\tlet filters = {}\n\tif (titleFilter.value) {\n\t\tfilters.title = ['like', `%${titleFilter.value}%`]\n\t}\n\tif (courseFilter.value) {\n\t\tfilters.course = courseFilter.value\n\t}\n\tif (typeFilter.value) {\n\t\tfilters.type = typeFilter.value\n\t}\n\tif (!user.data?.is_moderator) {\n\t\tfilters.owner = user.data?.email\n\t}\n\treturn filters\n})\n\nconst assignments = createListResource({\n\tdoctype: 'Assignment Activity',\n\tfields: ['name', 'title', 'course', 'type', 'creation'],\n\torderBy: 'modified desc',\n\tcache: ['assignments'],\n\ttransform(data) {\n\t\treturn data.map((row) => {\n\t\t\treturn {\n\t\t\t\t...row,\n\t\t\t\tcreation: dayjs(row.creation).fromNow(),\n\t\t\t}\n\t\t})\n\t},\n})\n\nconst assignmentColumns = computed(() => {\n\treturn [\n\t\t{\n\t\t\tlabel: __('Title'),\n\t\t\tkey: 'title',\n\t\t\twidth: 2,\n\t\t},\n\t\t{\n\t\t\tlabel: __('Course'),\n\t\t\tkey: 'course',\n\t\t\twidth: 1,\n\t\t\talign: 'left',\n\t\t},\n\t\t{\n\t\t\tlabel: __('Type'),\n\t\t\tkey: 'type',\n\t\t\twidth: 1,\n\t\t\talign: 'left',\n\t\t},\n\t\t{\n\t\t\tlabel: __('Created'),\n\t\t\tkey: 'creation',\n\t\t\twidth: 1,\n\t\t\talign: 'center',\n\t\t},\n\t]\n})\n\nconst assignmentTypes = computed(() => {\n\tlet types = ['', 'Document', 'Image', 'PDF', 'URL', 'Text']\n\treturn types.map((type) => {\n\t\treturn {\n\t\t\tlabel: __(type),\n\t\t\tvalue: type,\n\t\t}\n\t})\n})\n\nconst coursesListed = computed(() => {\n\tif (!assignments.data) return []\n\tlet courses = Array.from(\n\t\tnew Set(assignments.data.map((assignment) => assignment.course))\n\t)\n\treturn courses.map((course) => {\n\t\treturn {\n\t\t\tlabel: course,\n\t\t\tvalue: course,\n\t\t}\n\t})\n})\n\nconst breadcrumbs = computed(() => [\n\t{\n\t\tlabel: 'Assignments',\n\t\troute: { name: 'Assignments' },\n\t},\n])\n</script>\n"],"names":["user","inject","dayjs","titleFilter","ref","typeFilter","courseFilter","router","useRouter","onMounted","_a","_b","watch","reloadAssignments","assignments","assignmentFilter","computed","filters","createListResource","data","row","__spreadProps","__spreadValues","assignmentColumns","assignmentTypes","type","coursesListed","assignment","course","breadcrumbs","_createElementVNode","_hoisted_1","_createVNode","_unref","Breadcrumbs","_component_router_link","Button","Plus","_createTextVNode","__","_hoisted_2","_hoisted_3","FormControl","$event","_createBlock","ListView","_openBlock","_createElementBlock","_hoisted_4","Pencil","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_cache"],"mappings":"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"}