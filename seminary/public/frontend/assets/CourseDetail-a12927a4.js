import{s as E,x as D,i as j,l as C,j as L,o as d,d as p,g,e,h as c,w as _,b as t,_ as $,t as u,f as x,B as q,y as I,z as U,a as H,c as V,A as O,I as T,D as P,F as z,k as B,C as R,r as F}from"./index-aa2d5c8c.js";import{_ as G}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-f4602792.js";import{_ as Y}from"./CourseOutline-7c8501d8.js";import{f as J,s as A,_ as K,t as Q,u as W}from"./index-ae42c77f.js";import{_ as X}from"./InstructorAvatar-60ad83da.js";import{C as Z}from"./CourseCardToDo-14521de2.js";import{S as ee}from"./send-90966041.js";import"./plus-35171fed.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-98ed7af9.js";import"./telemetry-2432aede.js";import"./settings-80a9a1d3.js";import"./Link-4414b9a7.js";import"./book-open-check-240c5796.js";import"./file-up-4aa267c8.js";import"./check-ab924c81.js";import"./Badge.vue_vue_type_script_setup_true_lang-db3ab37b.js";import"./pencil-d10cdea0.js";import"./FolderPlugin.vue_vue_type_style_index_0_scoped_84b7d54d_lang-09f2e4ee.js";/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=E("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),te={class:"border-2 rounded-md min-w-80"},oe=["src"],ne={class:"p-5"},ae={key:0,class:"space-y-2"},re={class:"space-y-4"},le={class:"flex items-center text-ink-gray-9"},ue={class:"ml-2"},ie={class:"flex items-center text-ink-gray-9"},de={class:"ml-2"},ce={__name:"CourseCardOverlay",props:{course:{type:Object,default:null}},setup(n){const v=D(),a=j("$user"),r=n,o=C(()=>r.course.data.video_link?"https://www.youtube.com/embed/"+r.course.data.video_link:null);function h(){a.data?setTimeout(()=>{v.push({name:"Lesson",params:{courseName:r.course.data.name,chapterNumber:1,lessonNumber:1}})},2e3):(A(__("Please Login"),__("You need to login first to enroll for this course"),"alert-circle"),setTimeout(()=>{window.location.href=`/login?redirect-to=${window.location.pathname}`},2e3))}const i=()=>{let l=!1;return r.course.data.instructors.forEach(s=>{var y;!l&&s.user==((y=a.data)==null?void 0:y.name)&&(l=!0)}),console.log(l),l};return(l,s)=>{var f,m,k,w,N,b,M,S;const y=L("router-link");return d(),p("div",te,[n.course.data.video_link?(d(),p("iframe",{key:0,src:o.value,class:"rounded-t-md min-h-56 w-full"},null,8,oe)):g("",!0),e("div",ne,[n.course.data.membership?(d(),p("div",ae,[c(y,{to:{name:"Lesson",params:{courseName:n.course.name,chapterNumber:n.course.data.current_lesson?n.course.data.current_lesson.split("-")[0]:1,lessonNumber:n.course.data.current_lesson?n.course.data.current_lesson.split("-")[1]:1}}},{default:_(()=>[c(t($),{variant:"solid",size:"md",class:"w-full"},{default:_(()=>[...s[1]||(s[1]=[e("span",null,u("Continue Learning"),-1)])]),_:1})]),_:1},8,["to"])])):(d(),x(t($),{key:1,onClick:s[0]||(s[0]=Je=>h()),variant:"solid",class:"w-full",size:"md"},{default:_(()=>[...s[2]||(s[2]=[e("span",null,u("Start Learning"),-1)])]),_:1})),(m=(f=t(a))==null?void 0:f.data)!=null&&m.is_moderator||i()?(d(),x(y,{key:2,to:{name:"CourseForm",params:{courseName:n.course.data.name}}},{default:_(()=>[c(t($),{variant:"subtle",class:"w-full mt-2",size:"md"},{default:_(()=>[...s[3]||(s[3]=[e("span",null,u("Edit"),-1)])]),_:1})]),_:1},8,["to"])):g("",!0),(w=(k=t(a))==null?void 0:k.data)!=null&&w.is_moderator||i()?(d(),x(y,{key:3,to:{name:"CourseAssessment",params:{courseName:n.course.data.name}}},{default:_(()=>[c(t($),{variant:"subtle",class:"w-full mt-2",size:"md"},{default:_(()=>[...s[4]||(s[4]=[e("span",null,u("Configure Assessments"),-1)])]),_:1})]),_:1},8,["to"])):g("",!0),(b=(N=t(a))==null?void 0:N.data)!=null&&b.is_moderator||i()?(d(),x(y,{key:4,to:{name:"Gradebook",params:{courseName:n.course.data.name}}},{default:_(()=>[c(t($),{variant:"subtle",class:"w-full mt-2",size:"md"},{default:_(()=>[...s[5]||(s[5]=[e("span",null,u("Gradebook"),-1)])]),_:1})]),_:1},8,["to"])):g("",!0),(S=(M=t(a))==null?void 0:M.data)!=null&&S.is_moderator||i()?(d(),x(y,{key:5,to:{name:"StudentAttendanceCS",params:{courseName:n.course.data.name}}},{default:_(()=>[c(t($),{variant:"subtle",class:"w-full mt-2",size:"md"},{default:_(()=>[...s[6]||(s[6]=[e("span",null,u("Attendance"),-1)])]),_:1})]),_:1},8,["to"])):g("",!0),e("div",re,[s[7]||(s[7]=e("div",{class:"mt-8 font-medium text-ink-gray-9"},u("This course has:"),-1)),e("div",le,[c(t(q),{class:"h-4 w-4 stroke-1.5"}),e("span",ue,u(n.course.data.lessons)+" "+u("Lessons"),1)]),e("div",ie,[c(t(se),{class:"h-4 w-4 stroke-1.5"}),e("span",de,u(t(J)(n.course.data.enrollments))+" "+u("Enrolled Students"),1)])])])])}}},me={class:"flex flex-col gap-4"},_e={class:""},pe={class:"mb-1.5 text-sm text-ink-gray-5"},fe={class:""},ve={class:"mb-1.5 text-sm text-ink-gray-5"},ye={class:"mb-4"},be={class:"mb-1.5 text-sm text-ink-gray-5"},he={__name:"AnnouncementModal",props:I({cs:{type:String,required:!0},students:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const v=U(n,"modelValue"),a=n,r=H({subject:"",replyTo:"",announcement:""}),o=V({url:"frappe.core.doctype.communication.email.make",makeParams(i){return{recipients:a.students.join(", "),cc:r.replyTo,subject:r.subject,content:r.announcement,doctype:"Course Schedule",name:a.cs,send_email:1}}}),h=i=>{o.submit({},{validate(){if(!a.students.length)return"No students in this course";if(!r.subject)return"Subject is required"},onSuccess(){i(),A(__("Success"),__("Announcement has been sent successfully"),"check")},onError(l){var s;A(__("Error"),__(((s=l.messages)==null?void 0:s[0])||l),"alert-circle")}})};return(i,l)=>(d(),x(t(P),{modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=s=>v.value=s),options:{title:i.__("Make an Announcement"),size:"xl",actions:[{label:"Submit",variant:"solid",onClick:s=>h(s)}]}},{"body-content":_(()=>[e("div",me,[e("div",_e,[e("div",pe,[O(u(i.__("Subject"))+" ",1),l[4]||(l[4]=e("span",{class:"text-ink-red-3"},"*",-1))]),c(t(T),{type:"text",modelValue:r.subject,"onUpdate:modelValue":l[0]||(l[0]=s=>r.subject=s)},null,8,["modelValue"])]),e("div",fe,[e("div",ve,u(i.__("Reply To")),1),c(t(T),{type:"text",modelValue:r.replyTo,"onUpdate:modelValue":l[1]||(l[1]=s=>r.replyTo=s)},null,8,["modelValue"])]),e("div",ye,[e("div",be,u(i.__("Announcement")),1),c(t(K),{fixedMenu:!0,onChange:l[2]||(l[2]=s=>r.announcement=s),editorClass:"prose-sm py-2 px-2 min-h-[200px] border-outline-gray-2 hover:border-outline-gray-3 rounded-b-md bg-surface-gray-3"})])])]),_:1},8,["modelValue","options"]))}};const ke={class:"border-2 rounded-md min-w-80 p-5"},ge={key:0},xe={class:"mb-8"},$e={class:"flex items-center justify-between mb-2"},we={class:"flex items-center"},Ne={class:"ml-2 text-ink-gray-7"},Ce={class:"text-sm"},Ve=["innerHTML"],Ae={key:1,class:"text-sm italic text-ink-gray-5"},Me={__name:"Announcements",props:{cs:{type:String,required:!0}},setup(n){const v=n,a=V({url:"seminary.seminary.api.get_announcements",makeParams(r){return{cs:v.cs}},auto:!0,cache:["announcement",v.cs]});return(r,o)=>{var h;return d(),p("div",ke,[(h=t(a).data)!=null&&h.length?(d(),p("div",ge,[(d(!0),p(z,null,B(t(a).data,i=>(d(),p("div",null,[e("div",xe,[e("div",$e,[e("div",we,[c(t(R),{label:i.sender_full_name,size:"lg"},null,8,["label"]),e("div",Ne,u(i.sender_full_name),1)]),e("div",Ce,u(t(Q)(i.communication_date)),1)]),e("div",{class:"prose prose-sm bg-surface-menu-bar !min-w-full px-4 py-2 rounded-md",innerHTML:i.content},null,8,Ve)])]))),256))])):(d(),p("div",Ae,u(r.__("No announcements")),1))])}}},Se={key:0},Te={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},je={class:"m-5"},Le={class:"flex justify-between w-full"},ze={class:"md:w-2/3"},Be={class:"text-3xl font-semibold text-ink-gray-9"},Ee={class:"my-3 leading-6 text-ink-gray-7"},De=["innerHTML"],qe={class:"mt-10"},Ie={key:0,class:"text-lg font-semibold"},Ue={key:1,class:"text-lg font-semibold"},He={class:"flex flex-wrap gap-4"},Oe={class:"text-center text-sm font-medium"},Pe={class:"mt-10"},Re={class:"border-0 rounded-md min-w-80"},Fe={class:"mt-5"},Ge={class:"mt-5"},Ye={class:"mt-5"},_s={__name:"CourseDetail",props:{courseName:{type:String,required:!0}},setup(n){const v=j("$user"),a=n,r=F(!1),o=V({url:"seminary.seminary.utils.get_course_details",cache:["course",a.courseName],params:{course:a.courseName},auto:!0});console.log(o);const h=V({url:"seminary.seminary.utils.get_roster",cache:["roster",a.courseName],params:{course:a.courseName},auto:!0}),i=C(()=>(h.data||[]).map(f=>f.stuemail_rc));console.log("Student Emails:",i.value);const l=()=>{r.value=!0},s=C(()=>{var m,k;let f=[{label:"Courses",route:{name:"Courses"}}];return f.push({label:(m=o==null?void 0:o.data)==null?void 0:m.course,route:{name:"CourseDetail",params:{courseName:(k=o==null?void 0:o.data)==null?void 0:k.name}}}),f}),y=C(()=>{var f,m;return{title:(f=o==null?void 0:o.data)==null?void 0:f.title,description:(m=o==null?void 0:o.data)==null?void 0:m.short_introduction}});return W(y),(f,m)=>{var w,N;const k=L("Button");return t(o).data?(d(),p("div",Se,[e("header",Te,[c(t(G),{class:"h-7",items:s.value},null,8,["items"])]),e("div",je,[e("div",Le,[e("div",ze,[e("div",Be,u(t(o).data.course),1),e("div",Ee,u(t(o).data.short_introduction),1),e("div",{innerHTML:t(o).data.course_description_for_lms,class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal"},null,8,De),e("div",qe,[t(o).data.instructors.length===1?(d(),p("div",Ie,"Instructor")):(d(),p("div",Ue,"Instructors")),m[2]||(m[2]=e("br",null,null,-1)),e("div",He,[(d(!0),p(z,null,B(t(o).data.instructors,b=>(d(),p("div",{key:b.instructor_name,class:"flex flex-col items-center"},[c(X,{instructor:b,size:"xl",class:"mb-2 w-20 h-20"},null,8,["instructor"]),e("div",Oe,u(b.instructor_name),1)]))),128))])]),e("div",Pe,[c(Y,{title:"Course Outline",courseName:t(o).data.name,showOutline:!0},null,8,["courseName"])])]),e("div",Re,[c(ce,{course:t(o),class:"mb-4"},null,8,["course"]),e("div",Fe,[c(Z,{course:a.courseName},null,8,["course"])]),e("div",Ge,[c(Me,{cs:a.courseName},null,8,["cs"])]),(w=t(v).data)!=null&&w.is_moderator||(N=t(v).data)!=null&&N.is_instructor?(d(),x(k,{key:0,onClick:m[0]||(m[0]=b=>l())},{suffix:_(()=>[c(t(ee),{class:"h-4 stroke-1.5"})]),default:_(()=>[e("span",null,u(f.__("Make an Announcement")),1)]),_:1})):g("",!0),e("div",Ye,[c(he,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=b=>r.value=b),cs:a.courseName,students:i.value},null,8,["modelValue","cs","students"])])])])])])):g("",!0)}}};export{_s as default};
//# sourceMappingURL=CourseDetail-a12927a4.js.map
