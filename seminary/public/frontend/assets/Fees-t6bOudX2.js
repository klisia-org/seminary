import{o as e,c as o,a as u,t as $,u as b,r as y,b as x,d as F,e as n,f as c,g as f,h,i as N,j as P,w as p,F as w,k as v}from"./index-D2hg7nHX.js";import{_ as R}from"./table-DhGkjCET.js";import{_ as U,a as A,b as M,c as O,d as V}from"./ListView-6JS4BnER.js";const z={class:"flex items-center justify-center h-[250px]"},T={class:"text-gray-500"},E={__name:"MissingData",props:{message:{type:String,default:"No data found"}},setup(g){return(r,_)=>(e(),o("div",z,[u("p",T,$(g.message),1)]))}},L={key:0},q={key:0,class:"flex flex-col items-center justify-center p-3"},G={class:"text-lg font-bold text-gray-800"},H={key:1,class:"flex flex-col items-center justify-center"},J={key:2,class:"px-5 py-4"},K={key:3},Q={key:1,class:"flex flex-col items-center justify-center"},Z={__name:"Fees",setup(g){let r=b();const _=N("$user");y(0),b();let S=_.data.is_student,k=_.data.student;x({url:"seminary.seminary.api.get_scholarship",params:{student:k},onSuccess:s=>{r.scholarships=s},auto:!0}),x({url:"seminary.seminary.api.get_student_invoices",params:{student:k},onSuccess:s=>{s=s.sort((a,m)=>{const t={Unpaid:0,Paid:1},i=t[a.status],d=t[m.status];if(i!==d)return i-d}),l.rows=s},auto:!0});const l=F({rows:[],columns:[{label:"Name",key:"name",width:1},{label:"Customer",key:"customer",width:1},{label:"Posting Date",key:"posting_date",width:1},{label:"Total Amount",key:"total",width:1},{label:"Outsdanding Amount",key:"outstanding_amount",width:1},{label:"Status",key:"status",width:1},{label:"Invoice",key:"cta",width:1}]}),C=y(null),j=y(!1),I=s=>{let a=`/api/method/frappe.utils.print_format.download_pdf?
		doctype=${encodeURIComponent("Sales Invoice")}
		&name=${encodeURIComponent(s.name)}
		&format=${encodeURIComponent("Standard")}
	`;window.open(a,"_blank")},B=s=>{C.value=s,j.value=!0};return(s,a)=>{const m=P("Button");return n(S)?(e(),o("div",L,[a[2]||(a[2]=u("h2",{class:"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"}," My Financial Status ",-1)),n(r).scholarships&&n(r).scholarships.length>0&&n(r).scholarships?(e(),o("div",q,[u("h2",G," Scholarship: "+$(n(r).scholarships[0].scholarship),1),a[0]||(a[0]=u("br",null,null,-1))])):(e(),o("div",H,a[1]||(a[1]=[u("p",{class:"text-lg font-bold text-gray-800"},null,-1)]))),l.rows.length>0?(e(),o("div",J,[l.rows.length>0?(e(),c(n(V),{key:0,columns:l.columns,rows:l.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},{default:p(()=>[h(n(A),null,{default:p(()=>[(e(!0),o(w,null,v(l.columns,t=>(e(),c(n(U),{key:t.key,item:t},null,8,["item"]))),128))]),_:1}),(e(!0),o(w,null,v(l.rows,t=>(e(),c(n(M),{key:t.id,row:t},{default:p(({column:i,item:d})=>[h(n(O),{item:d,align:i.align},{default:p(()=>[i.key==="status"?(e(),c(n(R),{key:0,variant:"subtle",theme:t.status==="Paid"?s.bg_color="green":s.bg_color="red",size:"md",label:d},null,8,["theme","label"])):f("",!0),i.key==="cta"&&t.status==="Paid"?(e(),c(m,{key:1,onClick:D=>I(t),class:"hover:bg-gray-900 hover:text-white","icon-left":"download",label:"Download Invoice"},null,8,["onClick"])):f("",!0),i.key==="cta"&&(t.status==="Unpaid"||t.status==="Overdue")?(e(),c(m,{key:2,onClick:D=>B(t),class:"hover:bg-gray-900 hover:text-white flex flex-column items-center justify-center","icon-left":"credit-card",label:"Pay Now"},null,8,["onClick"])):f("",!0)]),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1},8,["columns","rows"])):f("",!0)])):(e(),o("div",K,[h(E,{message:"No Fees found"})]))])):(e(),o("div",Q,a[3]||(a[3]=[u("p",{class:"text-lg font-bold text-gray-500"},"Student Financial Status are only displayed for Students",-1)])))}}};export{Z as default};
