import{c as v,v as M}from"./frappe-ui-CI8g03ZE.js";import{c as O,bk as P,a8 as R,t as r,z as l,u as e,b as a,D as s,g as c,H as I,O as B,aa as U,a as z,w as F,e as T,bU as q,bV as H,bR as L}from"./vendor-DaZfNO8R.js";import"./index-B8YZNaeX.js";function $(i,o){var k,n,S,h;const u=(k=o==null?void 0:o.data)==null?void 0:k.is_student,d=(n=o==null?void 0:o.data)==null?void 0:n.is_instructor;console.log("useCourseToDo",i,(S=o==null?void 0:o.data)==null?void 0:S.name,u,d);const g=v({url:"seminary.seminary.utils.get_course_details",cache:["course",i],params:{course:i},auto:!0}),m=v({url:"seminary.seminary.utils.get_assessments",cache:["assessments",i],params:{course:i}}),_=v({url:"seminary.seminary.utils.get_missingassessments",cache:["missingassessments",i],params:{course:i,member:(h=o==null?void 0:o.data)==null?void 0:h.name}}),f=v({url:"seminary.seminary.utils.get_assessments_tograde",cache:["assessments_tograde",i],params:{course:i}}),y=O(()=>{var p,x;const D=((p=_.data)==null?void 0:p.length)||0,C=(m.data||[]).filter(w=>new Date(w.due_date)>=new Date).length,b=((x=f.data)==null?void 0:x.length)||0;if(u)return D+C;if(d)return b});return console.log("Course: ",i,"countToDoItems",y.value),{course:g,assessments:m,missingAssessments:_,assessmentsToGrade:f,isStudent:u,isInstructor:d,countToDoItems:y}}const J={key:0,class:"border-2 rounded-md min-w-80 p-5"},K={key:0,class:"text-3xl font-semibold text-ink-gray-9 text-center"},Q={key:1,class:"text-ink-gray-7"},W={key:0,class:"missing-assessments mt-4"},X={class:"text-xl font-semibold text-ink-gray-9"},Y={key:1,class:"due-soon mt-4"},Z={key:2,class:"no-assessments mt-4"},N={class:"text-xl font-semibold text-ink-gray-9"},G={key:2,class:"text-ink-gray-7"},tt={key:3,class:"text-ink-gray-7"},et={class:"text-xl text-center font-semibold text-gray-500 mt-5"},st={__name:"CourseCardToDo",props:{course:{type:String,required:!0},singleCourse:{type:Boolean,default:!0}},setup(i){const o=P("$user"),u=i,{course:d,assessments:g,missingAssessments:m,assessmentsToGrade:_,isStudent:f,isInstructor:y}=$(u.course,o),k=n=>U(n).fromNow();return(n,S)=>{var D,C,b,p,x,w,A,V,E,j;const h=R("router-link");return e(d)?(a(),r("div",J,[i.singleCourse?(a(),r("div",K,s(n.__("To Do")),1)):l("",!0),(D=e(d).data)!=null&&D.course&&e(f)?(a(),r("div",Q,[(C=e(m).data)!=null&&C.length?(a(),r("section",W,[c("h3",X,s(n.__("Missing Assessments")),1),c("ul",null,[(a(!0),r(I,null,B(e(m).data,t=>(a(),r("li",{key:t.id,class:"text-ink-gray-7"},s(t.title)+" ("+s(n.__("Due"))+": "+s(k(t.due_date))+") ",1))),128))])])):l("",!0),(p=(b=e(g))==null?void 0:b.data)!=null&&p.length?(a(),r("section",Y,[c("h3",null,s(n.__("Due Soon")),1),c("ul",null,[(a(!0),r(I,null,B(e(g).data.filter(t=>new Date(t.due_date)>=new Date).slice(0,5),t=>(a(),r("li",{key:t.id},s(t.title)+" ("+s(n.__("Due"))+": "+s(k(t.due_date))+") ",1))),128))])])):l("",!0),!((x=e(m).data)!=null&&x.length)&&!((w=e(g).data)!=null&&w.length)?(a(),r("section",Z,[c("h3",N,s(n.__("Congrats! No assessments for now.")),1)])):l("",!0)])):l("",!0),(A=e(d).data)!=null&&A.course&&e(y)&&((V=e(_).data)!=null&&V.length)?(a(),r("div",G,[(a(!0),r(I,null,B(e(_).data,t=>(a(),r("div",{key:t.title,class:"text-ink-gray-7 mt-4"},[c("ul",null,[t.Type==="Exam"?(a(),z(h,{key:0,to:{name:"ExamSubmissionCS",params:{courseName:u.course,examID:t.assessmentID}},class:"text-ink-gray-7 mt-4 flex items-center space-x-2"},{default:F(()=>[T(e(q),{class:"h-4 w-4 stroke-1.5"}),c("span",null,s(t.title)+" ("+s(t.ToGrade)+" "+s(n.__(" to grade"))+")",1)]),_:2},1032,["to"])):t.Type==="Assignment"?(a(),z(h,{key:1,to:{name:"AssignmentSubmissionCS",params:{courseName:u.course,assignmentID:t.assessmentID}},class:"text-ink-gray-7 flex items-center space-x-2"},{default:F(()=>[T(e(H),{class:"h-4 w-4 stroke-1.5"}),c("span",null,s(t.title)+" ("+s(t.ToGrade)+" "+s(n.__(" to grade"))+")",1)]),_:2},1032,["to"])):l("",!0)])]))),128))])):l("",!0),(E=e(d).data)!=null&&E.course&&e(y)&&!((j=e(_).data)!=null&&j.length)?(a(),r("div",tt,[T(e(L),{class:"size-20 mx-auto stroke-1 text-gray-500 mt-5"}),c("h3",et,s(n.__("Congrats! No assessments to grade for now.")),1)])):l("",!0)])):l("",!0)}}},rt=M(st,[["__scopeId","data-v-6917df0b"]]);export{rt as C,$ as u};
//# sourceMappingURL=CourseCardToDo-Dr1Q61xT.js.map
