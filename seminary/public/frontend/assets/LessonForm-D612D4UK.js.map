{"version":3,"file":"LessonForm-D612D4UK.js","sources":["../../../../frontend/src/pages/LessonForm.vue"],"sourcesContent":["<template>\n\t<div class=\"\">\n\t\t<div class=\"grid md:grid-cols-[75%,25%] h-screen\">\n\t\t\t<div class=\"border-r\">\n\t\t\t\t<header\n\t\t\t\t\tclass=\"sticky top-0 z-10 flex flex-col md:flex-row md:items-center justify-between border-b overflow-hidden bg-surface-white px-3 py-2.5 sm:px-5\"\n\t\t\t\t>\n\t\t\t\t\t<Breadcrumbs class=\"text-ellipsis\" :items=\"breadcrumbs\" />\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t@click=\"saveLesson({ showSuccessMessage: true })\"\n\t\t\t\t\t\tclass=\"mt-3 md:mt-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ __('Save') }}\n\t\t\t\t\t</Button>\n\t\t\t\t\t\n\t\t\t\t</header>\n\t\t\t\t<div class=\"py-5\">\n\t\t\t\t\t<div class=\"w-5/6 mx-auto\">\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"lesson.lesson_title\"\n\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\tclass=\"mb-4\"\n\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"lesson.preview\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tlabel=\"Text for Preview on the Course Page\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"lesson.allow_discuss\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tlabel=\"Allow Discussions? (Discussions will be automatically disabled for quizzes)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"border-t mt-4\">\n\t\t\t\t\t\t<div class=\"w-5/6 mx-auto pt-4\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"flex justify-between cursor-pointer\"\n\t\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\topenInstructorEditor = !openInstructorEditor\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label class=\"block font-medium text-ink-gray-5 mb-1\">\n\t\t\t\t\t\t\t\t\t{{ __('Instructor Notes') }}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\t\t\t\tclass=\"stroke-2 h-5 w-5 text-ink-gray-5\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t'rotate-90 transform duration-200': openInstructorEditor,\n\t\t\t\t\t\t\t\t\t\t'duration-200': !openInstructorEditor,\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-show=\"openInstructorEditor\"\n\t\t\t\t\t\t\t\tid=\"instructor-notes\"\n\t\t\t\t\t\t\t\tclass=\"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal py-3\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"border-t mt-4\">\n\t\t\t\t\t\t<div class=\"w-5/6 mx-auto pt-4\">\n\t\t\t\t\t\t\t<label class=\"block font-medium text-ink-gray-5 mb-1\">\n\t\t\t\t\t\t\t\t{{ __('Content') }}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tid=\"content\"\n\t\t\t\t\t\t\t\tclass=\"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal py-3\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { Breadcrumbs, Button, createResource, FormControl, toast } from 'frappe-ui'\nimport {\n\tcomputed,\n\treactive,\n\tonMounted,\n\tinject,\n\tref,\n\tonBeforeUnmount,\n} from 'vue'\nimport EditorJS from '@editorjs/editorjs'\nimport { ChevronRight } from 'lucide-vue-next'\nimport { updateDocumentTitle, createToast, getEditorTools } from '@/utils'\nimport { capture } from '@/telemetry'\nimport { useSettings } from '@/stores/settings'\n\nconst editor = ref(null)\nconst instructorEditor = ref(null)\nconst user = inject('$user')\nconst openInstructorEditor = ref(false)\nconst settingsStore = useSettings()\nlet autoSaveInterval\nlet showSuccessMessage = false\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tchapterNumber: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tlessonNumber: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nlocalStorage.setItem('activeCourseName', props.courseName);\n\nonMounted(() => {\n\tif (!user.data?.is_moderator && !user.data?.is_instructor) {\n\t\twindow.location.href = '/login'\n\t}\n\tcapture('lesson_form_opened')\n\teditor.value = renderEditor('content')\n\tinstructorEditor.value = renderEditor('instructor-notes')\n\twindow.addEventListener('keydown', keyboardShortcut)\n})\n\n\n\nconst renderEditor = (holder) => {\n\treturn new EditorJS({\n\t\tholder: holder,\n\t\ttools: getEditorTools(true),\n\t\tautofocus: true,\n\t\tdefaultBlock: 'markdown',\n\t})\n}\n\nconst lesson = reactive({\n\tlesson_title: '',\n\tpreview: '',\n\tbody: '',\n\tinstructor_notes: '',\n\tcontent: '',\n\tdiscussion_id: null,\n})\n\nconst lessonDetails = createResource({\n\turl: 'seminary.seminary.utils.get_lesson_creation_details',\n\tparams: {\n\t\tcourse: props.courseName,\n\t\tchapter: props.chapterNumber,\n\t\tlesson: props.lessonNumber,\n\t},\n\tauto: true,\n\tonSuccess(data) {\n\t\tif (data.lesson) {\n\t\t\tObject.keys(data.lesson).forEach((key) => {\n\t\t\t\tlesson[key] = data.lesson[key]\n\t\t\t})\n\t\t\tlesson.include_in_preview = data?.lesson?.include_in_preview\n\t\t\t\t? true\n\t\t\t\t: false\n\t\t\taddLessonContent(data)\n\t\t\taddInstructorNotes(data)\n\t\t\tenableAutoSave()\n\t\t}\n\t},\n})\n\nconst addLessonContent = (data) => {\n\teditor.value.isReady.then(() => {\n\t\tif (data.lesson.content) {\n\t\t\teditor.value.render(JSON.parse(data.lesson.content))\n\t\t} else if (data.lesson.body) {\n\t\t\tlet blocks = convertToJSON(data.lesson)\n\t\t\teditor.value.render({\n\t\t\t\tblocks: blocks,\n\t\t\t})\n\t\t}\n\t})\n}\n\nconst addInstructorNotes = (data) => {\n\tinstructorEditor.value.isReady.then(() => {\n\t\tif (data.lesson.instructor_content) {\n\t\t\tinstructorEditor.value.render(JSON.parse(data.lesson.instructor_content))\n\t\t} else if (data.lesson.instructor_notes) {\n\t\t\tlet blocks = convertToJSON(data.lesson)\n\t\t\tinstructorEditor.value.render({\n\t\t\t\tblocks: blocks,\n\t\t\t})\n\t\t}\n\t})\n}\n\nconst enableAutoSave = () => {\n\tautoSaveInterval = setInterval(() => {\n\t\tsaveLesson({ showSuccessMessage: false })\n\t}, 10000)\n}\n\nconst keyboardShortcut = (e) => {\n\tif (\n\t\te.key === 's' &&\n\t\t(e.ctrlKey || e.metaKey) &&\n\t\t!e.target.classList.contains('ProseMirror')\n\t) {\n\t\tsaveLesson({ showSuccessMessage: true })\n\t\te.preventDefault()\n\t}\n}\n\n//Remove activeCourseName from local storage when the user leaves the page\nonBeforeUnmount(() => {\n\tlocalStorage.removeItem('activeCourseName');\n\tclearInterval(autoSaveInterval)\n\twindow.removeEventListener('keydown', keyboardShortcut)\n})\n\n\nconst newLessonResource = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Course Lesson',\n\t\t\t\tcourse_sc: props.courseName,\n\t\t\t\tchapter: lessonDetails.data.chapter.name,\n\t\t\t\t...lesson,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst editLesson = createResource({\n\turl: 'frappe.client.set_value',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'Course Lesson',\n\t\t\tname: values.lesson,\n\t\t\tfieldname: lesson,\n\t\t}\n\t},\n})\n\nconst lessonReference = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Course Schedule Lesson Reference',\n\t\t\t\tparent: lessonDetails.data?.chapter.name,\n\t\t\t\tparenttype: 'Course Schedule Chapter',\n\t\t\t\tparentfield: 'lessons',\n\t\t\t\tlesson: values.lesson,\n\t\t\t\tidx: props.lessonNumber,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst convertToJSON = (lessonData) => {\n\tlet blocks = []\n\tif (lessonData.youtube) {\n\t\tlet youtubeID = lessonData.youtube.split('/').pop()\n\t\tblocks.push({\n\t\t\ttype: 'embed',\n\t\t\tdata: {\n\t\t\t\tservice: 'youtube',\n\t\t\t\tembed: `https://www.youtube.com/embed/${youtubeID}`,\n\t\t\t},\n\t\t})\n\t}\n\tlessonData.body.split('\\n').forEach((block) => {\n\t\tif (block.includes('{{ YouTubeVideo')) {\n\t\t\tlet youtubeID = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tif (!youtubeID.includes('https://'))\n\t\t\t\tyoutubeID = `https://www.youtube.com/embed/${youtubeID}`\n\t\t\tblocks.push({\n\t\t\t\ttype: 'embed',\n\t\t\t\tdata: {\n\t\t\t\t\tservice: 'youtube',\n\t\t\t\t\tembed: youtubeID,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ Quiz')) {\n\t\t\tlet quiz = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'quiz',\n\t\t\t\tdata: {\n\t\t\t\t\tquiz: quiz,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ Exam')) {\n\t\t\tlet exam = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'exam',\n\t\t\t\tdata: {\n\t\t\t\t\texam: exam,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ DiscussionActivity')) {\n\t\t\tlet discussionActivity = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'discussionActivity',\n\t\t\t\tdata: {\n\t\t\t\t\tdiscussionID: discussionActivity,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ Folder')) {\n\t\t\tlet folder = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'folder',\n\t\t\t\tdata: {\n\t\t\t\t\tfolder: folder,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ Video')) {\n\t\t\tlet video = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'upload',\n\t\t\t\tdata: {\n\t\t\t\t\tfile_url: video,\n\t\t\t\t\tfile_type: video.split('.').pop(),\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ Audio')) {\n\t\t\tlet audio = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'upload',\n\t\t\t\tdata: {\n\t\t\t\t\tfile_url: audio,\n\t\t\t\t\tfile_type: audio.split('.').pop(),\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ PDF')) {\n\t\t\tlet pdf = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'upload',\n\t\t\t\tdata: {\n\t\t\t\t\tfile_url: pdf,\n\t\t\t\t\tfile_type: 'pdf',\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('{{ Embed')) {\n\t\t\tlet embed = block.match(/\\([\"']([^\"']+?)[\"']\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'embed',\n\t\t\t\tdata: {\n\t\t\t\t\tservice: embed.split('|||')[0],\n\t\t\t\t\tembed: embed.split('|||')[1],\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('![]')) {\n\t\t\tlet image = block.match(/\\((.*?)\\)/)[1]\n\t\t\tblocks.push({\n\t\t\t\ttype: 'upload',\n\t\t\t\tdata: {\n\t\t\t\t\tfile_url: image,\n\t\t\t\t\tfile_type: 'image',\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (block.includes('#')) {\n\t\t\tlet level = (block.match(/#/g) || []).length\n\t\t\tblocks.push({\n\t\t\t\ttype: 'header',\n\t\t\t\tdata: {\n\t\t\t\t\ttext: block.replace(/#/g, '').trim(),\n\t\t\t\t\tlevel: level,\n\t\t\t\t},\n\t\t\t})\n\t\t} else {\n\t\t\tblocks.push({\n\t\t\t\ttype: 'paragraph',\n\t\t\t\tdata: {\n\t\t\t\t\ttext: block,\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t})\n\n\tif (lessonData.quizId) {\n\t\tblocks.push({\n\t\t\ttype: 'quiz',\n\t\t\tdata: {\n\t\t\t\tquiz: lessonData.quizId,\n\t\t\t},\n\t\t})\n\t}\n\tif (lessonData.examId) {\n\t\tblocks.push({\n\t\t\ttype: 'exam',\n\t\t\tdata: {\n\t\t\t\texam: lessonData.examId,\n\t\t\t},\n\t\t})\n\t}\n\tif (lessonData.discussionID) {\n\t\tblocks.push({\n\t\t\ttype: 'discussionActivity',\n\t\t\tdata: {\n\t\t\t\tdiscussionID: lessonData.discussionID,\n\t\t\t},\n\t\t})\n\t}\n\tif (lessonData.folder) {\n\t\tblocks.push({\n\t\t\ttype: 'folder',\n\t\t\tdata: {\n\t\t\t\tfolder: lessonData.folder,\n\t\t\t},\n\t\t})\n\t}\n\n\treturn blocks\n}\n\nconst saveLesson = (e) => {\n\tshowSuccessMessage = false;\n\tif (typeof e != 'undefined' && e.showSuccessMessage) {\n\t\tshowSuccessMessage = true;\n\t}\n\n\teditor.value.save().then((outputData) => {\n\t\tconsole.log(\"Editor Output Data:\", outputData); // Debugging log\n\t\tlesson.content = JSON.stringify(outputData);\n\n\t\tinstructorEditor.value.save().then((outputData) => {\n\t\t\tconsole.log(\"Instructor Editor Output Data:\", outputData); // Debugging log\n\t\t\tlesson.instructor_content = JSON.stringify(outputData);\n\n\t\t\t// Ensure discussion_id is included in the lesson object\n\t\t\tconst discussionBlock = outputData.blocks.find(\n\t\t\t\t(block) =>\n\t\t\t\t\t['discussionActivity', 'discussionactivity'].includes(block.type) &&\n\t\t\t\t\tblock.data?.discussionID\n\t\t\t)\n\t\t\tlesson.discussion_id = discussionBlock ? discussionBlock.data.discussionID : null;\n\n\t\t\t// Log only if discussion_id is null or during manual save\n\t\t\tif (!lesson.discussion_id || showSuccessMessage) {\n\t\t\t\tconsole.log(\"Lesson Object Before Save:\", lesson);\n\t\t\t}\n\n\t\t\tif (lessonDetails.data?.lesson) {\n\t\t\t\teditCurrentLesson();\n\t\t\t} else {\n\t\t\t\tcreateNewLesson();\n\t\t\t}\n\t\t});\n\t});\n}\n\nconst createNewLesson = () => {\n\tnewLessonResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\treturn validateLesson()\n\t\t\t},\n\t\t\tonSuccess(data) {\n\t\t\t\tlessonReference.submit(\n\t\t\t\t\t{ lesson: data.name },\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess() {\n\t\t\t\t\t\t\tcapture('lesson_created')\n\t\t\t\t\t\t\ttoast.success(__('Lesson created successfully'));\n\t\t\t\t\t\t\t/* if (!settingsStore.onboardingDetails.data?.is_onboarded) {\n\t\t\t\t\t\t\t\tsettingsStore.onboardingDetails.reload()\n\t\t\t\t\t\t\t} */\n\t\t\t\t\t\t\tlessonDetails.reload()\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst editCurrentLesson = () => {\n\teditLesson.submit(\n\t\t{\n\t\t\tlesson: lessonDetails.data.lesson.name,\n\t\t},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\treturn validateLesson()\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\tconsole.log(\"Lesson updated successfully\"); // Debugging log\n\t\t\t\tshowSuccessMessage\n\t\t\t\t\t? toast.success(__('Lesson updated successfully'))\n\t\t\t\t\t: ''\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst validateLesson = () => {\n\tif (!lesson.lesson_title) {\n\t\treturn 'Title is required'\n\t}\n\tif (!lesson.content) {\n\t\treturn 'Content is required'\n\t}\n}\n\nconst showToast = (lesson_title, text, icon) => {\n\tcreateToast({\n\t\tlesson_title: lesson_title,\n\t\ttext: text,\n\t\ticon: icon,\n\t\ticonClasses:\n\t\t\ticon == 'check'\n\t\t\t\t? 'bg-surface-green-3 text-ink-white rounded-md p-px'\n\t\t\t\t: 'bg-surface-red-5 text-ink-white rounded-md p-px',\n\t\tposition: icon == 'check' ? 'bottom-right' : 'top-center',\n\t\ttimeout: icon == 'check' ? 5 : 10,\n\t})\n}\n\nconst breadcrumbs = computed(() => {\n\tlet crumbs = [\n\t\t{\n\t\t\tlabel: 'Courses',\n\t\t\troute: { name: 'Courses' },\n\t\t},\n\t\t{\n\t\t\tlabel: lessonDetails.data?.course_title,\n\t\t\troute: { name: 'CourseForm', params: { courseName: props.courseName } },\n\t\t},\n\t]\n\n\tif (lessonDetails?.data?.lesson) {\n\t\tcrumbs.push({\n\t\t\tlabel: lessonDetails.data.lesson.lesson_title,\n\t\t\troute: {\n\t\t\t\tname: 'Lesson',\n\t\t\t\tparams: {\n\t\t\t\t\tcourseName: props.courseName,\n\t\t\t\t\tchapterNumber: props.chapterNumber,\n\t\t\t\t\tlessonNumber: props.lessonNumber,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t}\n\tcrumbs.push({\n\t\tlabel: lessonDetails?.data?.lesson ? 'Edit Lesson' : 'Create Lesson',\n\t\troute: {\n\t\t\tname: 'LessonForm',\n\t\t\tparams: {\n\t\t\t\tcourseName: props.courseName,\n\t\t\t\tchapterNumber: props.chapterNumber,\n\t\t\t\tlessonNumber: props.lessonNumber,\n\t\t\t},\n\t\t},\n\t})\n\treturn crumbs\n})\n\nconst pageMeta = computed(() => {\n\treturn {\n\t\ttitle: 'Lesson Editor',\n\t\tdescription: 'Create and edit lessons for your course',\n\t}\n})\n\nupdateDocumentTitle(pageMeta)\n\n</script>\n<style>\n.embed-tool__caption,\n.cdx-simple-image__caption {\n\tdisplay: none;\n}\n\n.ce-block__content {\n\tmax-width: none;\n}\n\n.codex-editor--narrow .ce-toolbar__actions {\n\tright: 100%;\n}\n\n.ce-toolbar__content {\n\tmax-width: none;\n}\n\n.codeBoxHolder {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: flex-start;\n\talign-items: flex-start;\n}\n\n.codeBoxTextArea {\n\twidth: 100%;\n\tmin-height: 30px;\n\tpadding: 10px;\n\tborder-radius: 2px 2px 2px 0;\n\tborder: none !important;\n\toutline: none !important;\n\tfont: 14px monospace;\n}\n\n.codeBoxSelectDiv {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: flex-start;\n\talign-items: flex-start;\n\tposition: relative;\n}\n\n.codeBoxSelectInput {\n\tborder-radius: 0 0 20px 2px;\n\tpadding: 2px 26px;\n\tpadding-top: 0;\n\tpadding-right: 0;\n\ttext-align: left;\n\tcursor: pointer;\n\tborder: none !important;\n\toutline: none !important;\n}\n\n.codeBoxSelectDropIcon {\n\tposition: absolute !important;\n\tleft: 10px !important;\n\tbottom: 0 !important;\n\twidth: unset !important;\n\theight: unset !important;\n\tfont-size: 16px !important;\n}\n\n.codeBoxSelectPreview {\n\tdisplay: none;\n\tflex-direction: column;\n\tjustify-content: flex-start;\n\talign-items: flex-start;\n\tborder-radius: 2px;\n\tbox-shadow: 0 3px 15px -3px rgba(13, 20, 33, 0.13);\n\tposition: absolute;\n\ttop: 100%;\n\tmargin: 5px 0;\n\tmax-height: 30vh;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tz-index: 10000;\n}\n\n.codeBoxSelectItem {\n\twidth: 100%;\n\tpadding: 5px 20px;\n\tmargin: 0;\n\tcursor: pointer;\n}\n\n.codeBoxSelectedItem {\n\tbackground-color: lightblue !important;\n}\n\n.codeBoxShow {\n\tdisplay: flex !important;\n}\n\n.dark {\n\tcolor: #abb2bf;\n\tbackground-color: #282c34;\n}\n\n.light {\n\tcolor: #383a42;\n\tbackground-color: #fafafa;\n}\n\n.codeBoxTextArea {\n\tline-height: 1.7;\n}\n\n.prose :where(pre):not(:where([class~='not-prose'], [class~='not-prose'] *)) {\n\toverflow-x: unset;\n}\n\niframe {\n\tborder-top: 3px solid theme('colors.gray.700');\n\tborder-bottom: 3px solid theme('colors.gray.700');\n}\n\n.tc-table {\n\tborder-left: 1px solid #e8e8eb;\n}\n</style>\n"],"names":["editor","ref","instructorEditor","user","inject","openInstructorEditor","useSettings","autoSaveInterval","showSuccessMessage","props","__props","onMounted","_a","_b","capture","renderEditor","keyboardShortcut","holder","EditorJS","getEditorTools","lesson","reactive","lessonDetails","createResource","data","key","addLessonContent","addInstructorNotes","enableAutoSave","blocks","convertToJSON","saveLesson","onBeforeUnmount","newLessonResource","values","__spreadValues","editLesson","lessonReference","lessonData","youtubeID","block","quiz","exam","discussionActivity","folder","video","audio","pdf","embed","image","level","outputData","discussionBlock","editCurrentLesson","createNewLesson","validateLesson","toast","err","breadcrumbs","computed","crumbs","_c","pageMeta","updateDocumentTitle","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_unref","Breadcrumbs","Button","__","_hoisted_5","_hoisted_6","FormControl","_cache","$event","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","ChevronRight","_withDirectives","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13"],"mappings":"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"}