var T=Object.defineProperty;var w=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var k=(a,t,n)=>t in a?T(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,c=(a,t)=>{for(var n in t||(t={}))q.call(t,n)&&k(a,n,t[n]);if(w)for(var n of w(t))C.call(t,n)&&k(a,n,t[n]);return a};import{d as F,m as L,N,al as B,b as R,n as U,l as x,c as $,a as i,h as u,e as l,f as j,w as g,g as P,t as p,A as b,F as K,i as M,x as O,j as z,o as D,_ as A}from"./index-flDXq_bA.js";import{_ as Q}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-BCDqT5C6.js";import{a as h}from"./plus-DlUOwXB2.js";import{s as _,T as G}from"./index-nCb1JY8w.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-DT0r2lvZ.js";import"./Badge.vue_vue_type_script_setup_true_lang-DXoAtOCS.js";import"./Link-DjgbRK92.js";import"./pencil-3qaHjsB3.js";import"./FolderPlugin.vue_vue_type_style_index_0_scoped_84b7d54d_lang-BGvM5k8c.js";import"./book-open-check-CFVdhsmI.js";const H={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},J={class:"space-x-2"},W={class:"w-3/4 mx-auto py-5"},X={class:"font-semibold mb-4"},Y={class:"grid grid-cols-2 gap-5 mt-4 mb-8"},Z={class:"text-xs text-ink-gray-5 mb-2"},de={__name:"AssignmentForm",props:{assignmentID:{type:String,required:!0}},setup(a){const t=M("$user"),n=O(),d=a,r=F({title:"",type:"PDF",question:""});L(()=>{var e,s;d.assignmentID=="new"&&!((e=t.data)!=null&&e.is_moderator)&&!((s=t.data)!=null&&s.is_instructor)&&n.push({name:"Courses"}),d.assignmentID!=="new"&&o.reload(),window.addEventListener("keydown",f)});const f=e=>{e.key==="s"&&(e.ctrlKey||e.metaKey)&&(y(),e.preventDefault())};N(()=>{window.removeEventListener("keydown",f)});const o=B({doctype:"Assignment Activity",name:d.assignmentID,auto:!1}),V=R({url:"frappe.client.insert",makeParams(e){return{doc:c({doctype:"Assignment Activity"},e)}},onSuccess(e){_(__("Success"),__("Assignment saved successfully"),"check"),n.push({name:"AssignmentForm",params:{assignmentID:e.name}})},onError(e){var s;_(__("Error"),__(((s=e.messages)==null?void 0:s[0])||e),"x")}}),y=()=>{d.assignmentID=="new"?V.submit(c({},r)):o.setValue.submit(c({},r),{onSuccess(e){_(__("Success"),__("Assignment saved successfully"),"check"),o.reload()},onError(e){var s;_(__("Error"),__(((s=e.messages)==null?void 0:s[0])||e),"x")}})};U(o,()=>{o.doc&&Object.keys(o.doc).forEach(e=>{r[e]=o.doc[e]})});const S=x(()=>[{label:__("Assignments"),route:{name:"Assignments"}},{label:o.doc?o.doc.title:__("New Assignment")}]),E=x(()=>[{label:"PDF",value:"PDF"},{label:"Image",value:"Image"},{label:"Document",value:"Document"},{label:"Text",value:"Text"},{label:"URL",value:"URL"}]);return(e,s)=>{var v;const I=z("router-link");return D(),$(K,null,[i("header",H,[u(l(Q),{items:S.value},null,8,["items"]),i("div",J,[(v=l(o).doc)!=null&&v.name?(D(),j(I,{key:0,to:{name:"AssignmentSubmissionList",query:{assignmentID:l(o).doc.name}}},{default:g(()=>[u(l(A),null,{default:g(()=>[b(p(e.__("Submission List")),1)]),_:1})]),_:1},8,["to"])):P("",!0),u(l(A),{variant:"solid",onClick:s[0]||(s[0]=m=>y())},{default:g(()=>[b(p(e.__("Save")),1)]),_:1})])]),i("div",W,[i("div",X,p(e.__("Details")),1),i("div",Y,[u(l(h),{modelValue:r.title,"onUpdate:modelValue":s[1]||(s[1]=m=>r.title=m),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),u(l(h),{modelValue:r.type,"onUpdate:modelValue":s[2]||(s[2]=m=>r.type=m),type:"select",options:E.value,label:e.__("Type"),required:!0},null,8,["modelValue","options","label"])]),i("div",null,[i("div",Z,[b(p(e.__("Question"))+" ",1),s[4]||(s[4]=i("span",{class:"text-ink-red-3"},"*",-1))]),u(l(G),{content:r.question,onChange:s[3]||(s[3]=m=>r.question=m),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]"},null,8,["content"])])])],64)}}};export{de as default};
