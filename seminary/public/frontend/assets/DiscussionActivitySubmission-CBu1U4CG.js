import{F as x,bk as C,r as g,av as B,c as h,I as $,a8 as V,t as p,b,g as u,e as c,u as r,w as S,C as I,D as l,L as j,aR as q,H as w,O as L}from"./vendor-CrP-kEM1.js";import{c as v,u as R}from"./frappe-ui-Qp90XKmJ.js";import"./index--sl_9lWu.js";/* empty css                                                                     */import{l as A}from"./index-C61emWxo.js";import"./Link-B7v9_qE9.js";const F={class:"flex justify-between sticky top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},G={class:"flex items-center justify-between mb-5"},M={class:"w-1/3"},z={for:"submissionDropdown",class:"block text-sm font-medium text-gray-700"},E=["value"],H={class:"overflow-hidden h-[calc(100vh-3.2rem)]"},Q={__name:"DiscussionActivitySubmission",props:{discussionID:{type:String,required:!0},submissionName:{type:String,required:!0},courseName:{type:String,required:!0}},setup(_){const f=x(),N=C("$user"),a=_,i=g(a.submissionName),D=g(a.submissionName);v({url:"frappe.client.get_value",params:{doctype:"Discussion Activity",fieldname:"title",filters:{name:a.discussionID}},auto:!0});const t=v({url:"frappe.client.get_list",params:{doctype:"Discussion Submission",filters:[["disc_activity","=",a.discussionID],["coursesc","=",a.courseName]],fields:["name","student_name"],order_by:"student_name asc"},auto:!0});console.log("Submission List:",t),B(()=>{var s,e;!((s=N.data)!=null&&s.is_instructor)&&!((e=N.data)!=null&&e.is_moderator)&&f.push({name:"Courses"})});const m=h(()=>{var s;return(s=t.data)==null?void 0:s.findIndex(e=>e.name===i.value)});$(i,s=>{D.value=s,f.push({name:"DiscussionSubmission",params:{discussionID:a.discussionID,courseName:a.courseName,submissionName:s}})});const d=v({url:"seminary.seminary.utils.get_course_details",cache:["course",a.courseName],params:{course:a.courseName},auto:!0}),k=h(()=>{var e;let s=[{label:"Courses",route:{name:"Courses"}}];return s.push({label:(e=d==null?void 0:d.data)==null?void 0:e.course,route:{name:"CourseDetail",params:{courseName:a.courseName}}}),s.push({label:"Gradebook",route:{name:"Gradebook",params:{courseName:a.courseName}}}),s.push({label:"Discussion Submissions",route:{name:"DiscussionSubmissionCS",params:{courseName:a.courseName,discussionID:a.discussionID}}}),s});return(s,e)=>{const y=V("Button");return b(),p(w,null,[u("header",F,[c(r(R),{items:k.value},null,8,["items"])]),u("div",G,[c(y,{variant:"subtle",disabled:m.value===0,onClick:e[0]||(e[0]=o=>{var n;return i.value=(n=r(t).data[m.value-1])==null?void 0:n.name})},{default:S(()=>[I(l(s.__("Previous")),1)]),_:1},8,["disabled"]),u("div",M,[u("label",z,l(s.__("Select Submission")),1),j(u("select",{id:"submissionDropdown","onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[(b(!0),p(w,null,L(r(t).data,o=>(b(),p("option",{key:o.name,value:o.name},l(o.student_name),9,E))),128))],512),[[q,i.value]])]),c(y,{variant:"subtle",disabled:!r(t).data||m.value===r(t).data.length-1,onClick:e[2]||(e[2]=o=>{var n;return i.value=(n=r(t).data[m.value+1])==null?void 0:n.name})},{default:S(()=>[I(l(s.__("Next")),1)]),_:1},8,["disabled"])]),u("div",H,[c(A,{discussionID:_.discussionID,submissionName:D.value},null,8,["discussionID","submissionName"])])],64)}}};export{Q as default};
//# sourceMappingURL=DiscussionActivitySubmission-CBu1U4CG.js.map
