var B=Object.defineProperty,D=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var k=(n,t,o)=>t in n?B(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,b=(n,t)=>{for(var o in t||(t={}))I.call(t,o)&&k(n,o,t[o]);if(w)for(var o of w(t))L.call(t,o)&&k(n,o,t[o]);return n},x=(n,t)=>D(n,q(t));import{r as V,m as U,n as z,l as _,aj as M,c as v,a as d,h as l,e as a,w as y,f as S,t as f,g as E,F as Y,i as A,x as G,j as H,o as g,_ as N,A as F}from"./index-flDXq_bA.js";import{_ as J}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-BCDqT5C6.js";import{P as K,a as T}from"./plus-DlUOwXB2.js";import{d as O}from"./ListView-BTNGfjAN.js";import{P as Q}from"./pencil-3qaHjsB3.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-DT0r2lvZ.js";const W={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},X={class:"md:w-3/4 md:mx-auto py-5 mx-5"},Z={class:"grid grid-cols-3 gap-5 mb-5"},ee={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},te={class:"text-xl font-medium"},se={class:"leading-5"},ae={key:2,class:"flex justify-center my-5"},de={__name:"Assignments",setup(n){const t=A("$user"),o=A("$dayjs"),r=V(""),i=V(""),c=G();U(()=>{var s,e;!((s=t.data)!=null&&s.is_moderator)&&!((e=t.data)!=null&&e.is_instructor)&&c.push({name:"Courses"}),r.value=c.currentRoute.value.query.title,i.value=c.currentRoute.value.query.type}),z([r,i],()=>{c.push({query:{title:r.value,type:i.value}}),$()});const $=()=>{m.update({filters:j.value}),m.reload()},j=_(()=>{var e,p;let s={};return r.value&&(s.title=["like",`%${r.value}%`]),i.value&&(s.type=i.value),(e=t.data)!=null&&e.is_moderator||(s.owner=(p=t.data)==null?void 0:p.email),s}),m=M({doctype:"Assignment Activity",fields:["name","title","type","creation"],orderBy:"modified desc",cache:["assignments"],transform(s){return s.map(e=>x(b({},e),{creation:o(e.creation).fromNow()}))}}),C=_(()=>[{label:__("Title"),key:"title",width:2},{label:__("Type"),key:"type",width:1,align:"left"},{label:__("Created"),key:"creation",width:1,align:"center"}]),R=_(()=>["","Document","Image","PDF","URL","Text"].map(e=>({label:__(e),value:e}))),P=_(()=>[{label:"Assignments",route:{name:"Assignments"}}]);return(s,e)=>{var h;const p=H("router-link");return g(),v(Y,null,[d("header",W,[l(a(J),{items:P.value},null,8,["items"]),l(p,{to:{name:"AssignmentForm",params:{assignmentID:"new"}}},{default:y(()=>[l(a(N),{variant:"solid"},{prefix:y(()=>[l(a(K),{class:"w-4 h-4"})]),default:y(()=>[F(" "+f(s.__("New")),1)]),_:1})]),_:1})]),d("div",X,[d("div",Z,[l(a(T),{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=u=>r.value=u),placeholder:s.__("Search by title")},null,8,["modelValue","placeholder"]),l(a(T),{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=u=>i.value=u),type:"select",options:R.value,placeholder:s.__("Type")},null,8,["modelValue","options","placeholder"])]),(h=a(m).data)!=null&&h.length?(g(),S(a(O),{key:0,columns:C.value,rows:a(m).data,"row-key":"name",options:{showTooltip:!1,selectable:!1,getRowRoute:u=>({name:"AssignmentForm",params:{assignmentID:u.name}})}},null,8,["columns","rows","options"])):(g(),v("div",ee,[l(a(Q),{class:"size-10 mx-auto stroke-1 text-ink-gray-4"}),d("div",te,f(s.__("No assignments found")),1),d("div",se,f(s.__('You have not created any assignments yet. To create a new assignment, click on the "New" button above.')),1)])),a(m).data&&a(m).hasNextPage?(g(),v("div",ae,[l(a(N),{onClick:e[2]||(e[2]=u=>a(m).next())},{default:y(()=>[F(f(s.__("Load More")),1)]),_:1})])):E("",!0)])],64)}}};export{de as default};
