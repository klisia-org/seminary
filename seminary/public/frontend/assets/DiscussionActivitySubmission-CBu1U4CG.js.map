{"version":3,"file":"DiscussionActivitySubmission-CBu1U4CG.js","sources":["../../../../frontend/src/pages/DiscussionActivitySubmission.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"flex justify-between sticky top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs :items=\"breadcrumbs\" />\n\t</header>\n\t<div class=\"flex items-center justify-between mb-5\">\n<!-- Previous Button -->\n<Button\n  variant=\"subtle\"\n  :disabled=\"currentIndex === 0\"\n  @click=\"currentSubmission = submissionlist.data[currentIndex - 1]?.name\"\n>\n  {{ __('Previous') }}\n</Button>\n\n  <!-- Dropdown for All Submissions -->\n  <div class=\"w-1/3\">\n    <label for=\"submissionDropdown\" class=\"block text-sm font-medium text-gray-700\">\n      {{ __('Select Submission') }}\n    </label>\n    <select\n      id=\"submissionDropdown\"\n      v-model=\"currentSubmission\"\n      class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n    >\n      <option\n        v-for=\"submission in submissionlist.data\"\n        :key=\"submission.name\"\n        :value=\"submission.name\"\n      >\n        {{ submission.student_name }}\n      </option>\n    </select>\n  </div>\n\n<!-- Next Button -->\n<Button\n  variant=\"subtle\"\n  :disabled=\"!submissionlist.data || currentIndex === submissionlist.data.length - 1\"\n  @click=\"currentSubmission = submissionlist.data[currentIndex + 1]?.name\"\n>\n  {{ __('Next') }}\n</Button>\n</div>\n\t<div class=\"overflow-hidden h-[calc(100vh-3.2rem)]\">\n\t\t<DiscussionActivity :discussionID=\"discussionID\" :submissionName=\"submissionName\" />\n\t</div>\n</template>\n<script setup>\nimport { Breadcrumbs, createResource } from 'frappe-ui'\nimport { computed, onBeforeUnmount, onMounted, inject, watch, watchEffect, ref } from 'vue'\nimport Assignment from '@/components/Assignment.vue'\nimport { useRouter } from 'vue-router'\nimport DiscussionActivity from '@/components/DiscussionActivity.vue'\n\n\nconst router = useRouter()\nconst user = inject('$user')\n\nconst props = defineProps({\n\tdiscussionID: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tsubmissionName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\nconst currentSubmission = ref(props.submissionName); // Initialize with the current submissionName\nconst submissionName = ref(props.submissionName); // Create a reactive copy of the prop\n\nconst title = createResource({\n\turl: 'frappe.client.get_value',\n\tparams: {\n\t\tdoctype: 'Discussion Activity',\n\t\tfieldname: 'title',\n\t\tfilters: {\n\t\t\tname: props.discussionID,\n\t\t},\n\t},\n\tauto: true,\n})\n\nconst submissionlist = createResource({\n  url: 'frappe.client.get_list',\n  params: {\n    doctype: 'Discussion Submission',\n    filters: [\n      ['disc_activity', '=', props.discussionID],\n      ['coursesc', '=', props.courseName],\n    ],\n    fields: ['name', 'student_name'], // Fetch only necessary fields\n    order_by: 'student_name asc', // Order by student name\n  },\n  auto: true,\n});\nconsole.log('Submission List:', submissionlist)\n\nonMounted(() => {\n\tif (!user.data?.is_instructor && !user.data?.is_moderator)\n\t\trouter.push({ name: 'Courses' })\n})\n\nconst currentIndex = computed(() =>\n  submissionlist.data?.findIndex((submission) => submission.name === currentSubmission.value)\n);\n\nwatch(currentSubmission, (newSubmission) => {\n  submissionName.value = newSubmission; // Update submissionName\n  router.push({\n    name: 'DiscussionSubmission',\n    params: {\n      discussionID: props.discussionID,\n      courseName: props.courseName,\n      submissionName: newSubmission,\n    },\n  });\n});\n\nconst course = createResource({\n\turl: 'seminary.seminary.utils.get_course_details',\n\tcache: ['course', props.courseName],\n\tparams: {\n\t\tcourse: props.courseName,\n\t},\n\tauto: true,\n}) //Neded for the breadcrumbs\n\nconst breadcrumbs = computed(() => {\n\tlet items = [{ label: 'Courses', route: { name: 'Courses' } }]\n\titems.push({\n\t\tlabel: course?.data?.course,\n\t\troute: { name: 'CourseDetail', params: { courseName: props.courseName } },\n\t})\n    items.push({\n        label: 'Gradebook',\n        route: { name: 'Gradebook', params: { courseName: props.courseName} },\n    })\n\titems.push({\n\t\tlabel: 'Discussion Submissions',\n\t\troute: { name: 'DiscussionSubmissionCS', params: { courseName: props.courseName, discussionID: props.discussionID } },\n\t})\n\treturn items\n})\n\n\n</script>\n"],"names":["router","useRouter","user","inject","props","__props","currentSubmission","ref","submissionName","createResource","submissionlist","onMounted","_a","_b","currentIndex","computed","submission","watch","newSubmission","course","breadcrumbs","items","_createElementVNode","_hoisted_1","_createVNode","_unref","Breadcrumbs","_hoisted_2","_component_Button","_cache","$event","__","_hoisted_3","_hoisted_4","_toDisplayString","_openBlock","_createElementBlock","_Fragment","_renderList","_hoisted_5","_hoisted_6","DiscussionActivity"],"mappings":"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"}