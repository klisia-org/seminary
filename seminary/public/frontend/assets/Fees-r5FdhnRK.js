import{c as v,j as F,k as N,l as R,m as U,n as O,o as z}from"./frappe-ui-DY2hYblR.js";import{bk as A,r as y,am as V,a8 as M,t as n,u as a,b as s,g as d,D as p,a as i,z as f,w as h,e as k,H as x,O as S}from"./vendor-BwXEY6tq.js";import{_ as T}from"./MissingData-BReUdTsw.js";import{u as $}from"./index-C-gjsqqd.js";import"./index-CedffXRa.js";import"./Link-B7-sIXzn.js";const E={key:0},H={class:"text-xl font-bold text-gray-800 sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},L={key:0,class:"flex flex-col items-center justify-center p-3"},q={class:"text-lg font-bold text-gray-800"},G={key:1,class:"flex flex-col items-center justify-center"},J={key:2,class:"px-5 py-4"},K={key:3},Q={key:1,class:"flex flex-col items-center justify-center"},W={class:"text-lg font-bold text-gray-500"},oe={__name:"Fees",setup(X){let r=$();const g=A("$user");y(0),$();let C=g.data.is_student,b=g.data.student;v({url:"seminary.seminary.api.get_scholarship",params:{student:b},onSuccess:e=>{r.scholarships=e},auto:!0}),console.log("Student Scholarships:",r.scholarships),v({url:"seminary.seminary.api.get_student_invoices",params:{student:b},onSuccess:e=>{e=e.sort((o,_)=>{const c={Unpaid:0,Paid:1},u=c[o.status],t=c[_.status];if(u!==t)return u-t}),l.rows=e},auto:!0});const l=V({rows:[],columns:[{label:__("Name"),key:"name",width:1},{label:__("Customer"),key:"customer",width:1},{label:__("Posting Date"),key:"posting_date",width:1},{label:__("Total Amount"),key:"total",width:1},{label:__("Outstanding Amount"),key:"outstanding_amount",width:1},{label:__("Status"),key:"status",width:1},{label:__("Invoice"),key:"cta",width:1}]}),I=y(null),j=y(!1),B=e=>{let o=`/api/method/frappe.utils.print_format.download_pdf?
		doctype=${encodeURIComponent("Sales Invoice")}
		&name=${encodeURIComponent(e.name)}
		&format=${encodeURIComponent("Standard")}
	`;window.open(o,"_blank")},D=e=>{I.value=e,j.value=!0};return(e,o)=>{var c,u;const _=M("Button");return a(C)?(s(),n("div",E,[d("h2",H,p(e.__("My Financial Status")),1),a(r).scholarships&&((u=(c=a(r).scholarships)==null?void 0:c[0])!=null&&u.scholarship)?(s(),n("div",L,[d("h2",q,p(e.__("Scholarship"))+": "+p(a(r).scholarships[0].scholarship),1),o[0]||(o[0]=d("br",null,null,-1))])):(s(),n("div",G,[...o[1]||(o[1]=[d("p",{class:"text-lg font-bold text-gray-800"},null,-1)])])),l.rows.length>0?(s(),n("div",J,[l.rows.length>0?(s(),i(a(z),{key:0,columns:l.columns,rows:l.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},{default:h(()=>[k(a(F),null,{default:h(()=>[(s(!0),n(x,null,S(l.columns,t=>(s(),i(a(N),{key:t.key,item:t},null,8,["item"]))),128))]),_:1}),(s(!0),n(x,null,S(l.rows,t=>(s(),i(a(R),{key:t.id,row:t},{default:h(({column:m,item:w})=>[k(a(U),{item:w,align:m.align},{default:h(()=>[m.key==="status"?(s(),i(a(O),{key:0,variant:"subtle",theme:t.status==="Paid"?e.bg_color="green":e.bg_color="red",size:"md",label:w},null,8,["theme","label"])):f("",!0),m.key==="cta"&&t.status==="Paid"?(s(),i(_,{key:1,onClick:P=>B(t),class:"hover:bg-gray-900 hover:text-white","icon-left":"download",label:"Download Invoice"},null,8,["onClick"])):f("",!0),m.key==="cta"&&(t.status==="Unpaid"||t.status==="Overdue")?(s(),i(_,{key:2,onClick:P=>D(t),class:"hover:bg-gray-900 hover:text-white flex flex-column items-center justify-center","icon-left":"credit-card",label:"Pay Now"},null,8,["onClick"])):f("",!0)]),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1},8,["columns","rows"])):f("",!0)])):(s(),n("div",K,[k(T,{message:"No Fees found"})]))])):(s(),n("div",Q,[d("p",W,p(e.__("Student Financial Status are only displayed for Students")),1)]))}}};export{oe as default};
//# sourceMappingURL=Fees-r5FdhnRK.js.map
