{"version":3,"file":"CourseCalendar-Dh_QfPWv.js","sources":["../../../../frontend/src/pages/CourseCalendar.vue"],"sourcesContent":["<template>\n\n    <header\n        class=\"sticky top-0 z-10 flex flex-col md:flex-row md:items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\">\n        <Breadcrumbs class=\"h-7\" :items=\"breadcrumbs\" />\n    </header>\n    <div class=\"mt-5 mb-10 w-full px-5\">\n        <h3 class=\"text-2xl font-bold mb-3\">{{ __('Course Calendar') }}</h3>\n        <p class=\"text-gray-700 mb-5\">{{ __('Subscribe to this course calendar to stay updated with assignments'\n            +\n            ' due dates and class schedule.') }}</p>\n        <Button variant=\"solid\" @click=\"subscribeCourseCalendar()\" class=\"mt-5 mb-5\">\n            <span>\n                {{ __('Subscribe to this course calendar') }}\n            </span>\n        </Button>\n\n        <div class=\"space-y-4\">\n\n            <div v-if=\"CalendarInstructions.data\">\n                <p class=\"text-sm text-gray-600\" v-html=\"CalendarInstructions.data\"></p>\n            </div>\n            <div v-else>\n                <div>\n                    <h3 class=\"text-2xl font-bold mt-8 mb-3\">{{ __('How to Import the Calendar in the Major Platforms')\n                    }}</h3>\n                    <h4 class=\"text-lg font-semibold mt-3\">{{ __('Google Calendar') }}</h4>\n                    <p class=\"text-sm text-gray-600\">{{ __('Copy the calendar URL and add it to your Google Calendar by'\n                        +\n                        ' selecting \"Other Calendars\" > \"From URL\".') }}</p>\n                </div>\n\n                <div>\n                    <h4 class=\"text-lg font-semibold mt-3\">{{ __('Outlook Calendar') }}</h4>\n                    <p class=\"text-sm text-gray-600\">{{ __('Copy the calendar URL and add it to your Outlook '\n                        + 'Calendar by'\n                        +\n                        ' selecting \"Add Calendar\" > \"Subscribe from Web\".') }}</p>\n                </div>\n\n                <div>\n                    <h4 class=\"text-lg font-semibold mt-3\">{{ __('Apple Calendar') }}</h4>\n                    <p class=\"text-sm text-gray-600\">{{ __('Copy the calendar URL and add it to your Apple Calendar by'\n                        +\n                        ' selecting \"File\" > \"New Calendar Subscription\".') }}</p>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n<script setup>\nimport { createResource, Breadcrumbs, Button } from 'frappe-ui'\nimport { computed, reactive, onMounted, inject, ref, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { updateDocumentTitle } from '@/utils'\n\nconst route = useRoute()\nconst router = useRouter()\nconst user = inject('$user')\n\n\nconst props = defineProps({\n    courseName: {\n        type: String,\n        required: true,\n    },\n})\n\n\nconst CalendarInstructions = createResource({\n    url: 'seminary.seminary.calendar.get_calendar_instructions',\n    cache: ['instructions'],\n    auto: true,\n})\n\nconst course = createResource({\n    url: 'seminary.seminary.utils.get_course_details',\n    cache: ['course', props.courseName],\n    params: {\n        course: props.courseName,\n    },\n    auto: true,\n})\n\n\nconst subscribeCourseCalendar = () => {\n\n    const calendarUrl = `${window.location.origin}/api/method/seminary.seminary.calendar.course_ics?course_schedule=${encodeURIComponent(props.courseName)}&token=${encodeURIComponent(course.data.calendar_token)}`;\n    const calendardata = fetch(calendarUrl).then(response => {\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n        return response.json();\n    });\n    console.log('Calendar URL:', calendarUrl);\n    console.log('Calendar Data:', calendardata);\n    navigator.clipboard.writeText(calendarUrl).then(() => {\n        alert(__('Calendar URL copied to clipboard! You can now add it to your calendar application.'));\n    }, () => {\n        alert(__('Failed to copy calendar URL. Please try again.'));\n    });\n};\n\n// For downloading the calendar as an .ics file for validation purposes\n// <Button variant=\"solid\" @click=\"downloadCourseCalendar()\" class=\"mt-5 mb-5\">\n//     <span>\n//         {{ __('JUNK BUTTON Download this course calendar') }}\n//     </span>\n// </Button>\n// const downloadCourseCalendar = () => {\n\n//     const calendarUrl = `${window.location.origin}/api/method/seminary.seminary.calendar.course_ics?course_schedule=${encodeURIComponent(props.courseName)}&token=${encodeURIComponent(course.data.calendar_token)}`;\n//     window.location.href = calendarUrl;\n//     console.log('Downloading Calendar from URL:', calendarUrl);\n// };\n\nconst breadcrumbs = computed(() => {\n    let items = [{ label: 'Courses', route: { name: 'Courses' } }]\n    items.push({\n        label: course?.data?.course,\n        route: { name: 'CourseCalendar', params: { courseName: props.courseName } },\n    })\n\n    return items\n})\n\nconst pageMeta = computed(() => {\n    return {\n        title: course?.data?.title,\n        description: \"Course Calendar for the course\",\n    }\n})\n\nupdateDocumentTitle(pageMeta)\n\n\n</script>"],"names":["useRoute","useRouter","inject","props","__props","CalendarInstructions","createResource","course","subscribeCourseCalendar","calendarUrl","calendardata","response","breadcrumbs","computed","items","_a","pageMeta","updateDocumentTitle","_createElementVNode","_hoisted_1","_createVNode","_unref","Breadcrumbs","_hoisted_2","_hoisted_3","_toDisplayString","__","_hoisted_4","Button","_hoisted_5","_createElementBlock","_hoisted_6","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15"],"mappings":"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"}