var I=Object.defineProperty,L=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var V=(l,s,o)=>s in l?I(l,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[s]=o,C=(l,s)=>{for(var o in s||(s={}))U.call(s,o)&&V(l,o,s[o]);if(x)for(var o of x(s))z.call(s,o)&&V(l,o,s[o]);return l},A=(l,s)=>L(l,P(s));import{E as S,w as E,j as F,y as w,t as M}from"./frappe-ui-BzEkZ7NZ.js";import{bk as N,r as h,F as H,av as Y,I as G,c as p,a8 as J,t as k,b as v,g as _,e as r,u as a,w as f,C as R,D as g,cc as K,a as O,z as Q,ce as W,H as X}from"./vendor-IWZbD1HA.js";const Z={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ee={class:"md:w-3/4 md:mx-auto py-5 mx-5"},te={class:"grid grid-cols-3 gap-5 mb-5"},se={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},ae={class:"text-xl font-medium"},oe={class:"leading-5"},le={key:2,class:"flex justify-center my-5"},ie={__name:"Assignments",setup(l){const s=N("$user"),o=N("$dayjs"),i=h(""),m=h(""),c=h(""),d=H();Y(()=>{var t,e;!((t=s.data)!=null&&t.is_moderator)&&!((e=s.data)!=null&&e.is_instructor)&&d.push({name:"Courses"}),i.value=d.currentRoute.value.query.title,c.value=d.currentRoute.value.query.course,m.value=d.currentRoute.value.query.type}),G([i,c,m],()=>{d.push({query:{title:i.value,course:c.value,type:m.value}}),T()});const T=()=>{n.update({filters:$.value}),n.reload()},$=p(()=>{var e,y;let t={};return i.value&&(t.title=["like",`%${i.value}%`]),c.value&&(t.course=c.value),m.value&&(t.type=m.value),(e=s.data)!=null&&e.is_moderator||(t.owner=(y=s.data)==null?void 0:y.email),t}),n=S({doctype:"Assignment Activity",fields:["name","title","course","type","creation"],orderBy:"modified desc",cache:["assignments"],transform(t){return t.map(e=>A(C({},e),{creation:o(e.creation).fromNow()}))}}),j=p(()=>[{label:__("Title"),key:"title",width:2},{label:__("Course"),key:"course",width:1,align:"left"},{label:__("Type"),key:"type",width:1,align:"left"},{label:__("Created"),key:"creation",width:1,align:"center"}]),D=p(()=>["","Document","Image","PDF","URL","Text"].map(e=>({label:__(e),value:e}))),B=p(()=>n.data?Array.from(new Set(n.data.map(e=>e.course))).map(e=>({label:e,value:e})):[]),q=p(()=>[{label:"Assignments",route:{name:"Assignments"}}]);return(t,e)=>{var b;const y=J("router-link");return v(),k(X,null,[_("header",Z,[r(a(E),{items:q.value},null,8,["items"]),r(y,{to:{name:"AssignmentForm",params:{assignmentID:"new"}}},{default:f(()=>[r(a(F),{variant:"solid"},{prefix:f(()=>[r(a(K),{class:"w-4 h-4"})]),default:f(()=>[R(" "+g(t.__("New")),1)]),_:1})]),_:1})]),_("div",ee,[_("div",te,[r(a(w),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=u=>i.value=u),placeholder:t.__("Search by title")},null,8,["modelValue","placeholder"]),r(a(w),{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=u=>c.value=u),type:"select",options:B.value,placeholder:t.__("Course")},null,8,["modelValue","options","placeholder"]),r(a(w),{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=u=>m.value=u),type:"select",options:D.value,placeholder:t.__("Type")},null,8,["modelValue","options","placeholder"])]),(b=a(n).data)!=null&&b.length?(v(),O(a(M),{key:0,columns:j.value,rows:a(n).data,"row-key":"name",options:{showTooltip:!1,selectable:!1,getRowRoute:u=>({name:"AssignmentForm",params:{assignmentID:u.name}})}},null,8,["columns","rows","options"])):(v(),k("div",se,[r(a(W),{class:"size-10 mx-auto stroke-1 text-ink-gray-4"}),_("div",ae,g(t.__("No assignments found")),1),_("div",oe,g(t.__('You have not created any assignments yet. To create a new assignment, click on the "New" button above.')),1)])),a(n).data&&a(n).hasNextPage?(v(),k("div",le,[r(a(F),{onClick:e[3]||(e[3]=u=>a(n).next())},{default:f(()=>[R(g(t.__("Load More")),1)]),_:1})])):Q("",!0)])],64)}}};export{ie as default};
//# sourceMappingURL=Assignments-DXoM2CZY.js.map
